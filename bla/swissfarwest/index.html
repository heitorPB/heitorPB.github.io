<!DOCTYPE html>
<html lang="en">

<head>
    <title>The Swiss Far West and GPX fun | Heitor&#x27;s log</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="robots" content="noodp"/>

    <link rel="stylesheet" href="https://heitorpb.github.io/style.css">
    <link rel="stylesheet" href="https://heitorpb.github.io/color/green.css">

        <link rel="stylesheet" href="https://heitorpb.github.io/color/background_dark.css">
    
    <link rel="stylesheet" href="https://heitorpb.github.io/font-hack-subset.css">

    <meta name="description" content="GPX fun in Python.">

    <meta property="og:description" content="GPX fun in Python.">
    <meta property="og:title" content="The Swiss Far West and GPX fun | Heitor's log">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://heitorpb.github.io/bla/swissfarwest/">

    <meta property="og:image" content="https://heitorpb.github.io/bla/swissfarwest/map.png">
    <meta name="twitter:image" content="https://heitorpb.github.io/bla/swissfarwest/map.png">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="GPX fun in Python.">
    <meta name="twitter:title" content="The Swiss Far West and GPX fun | Heitor's log">
    <meta property="twitter:domain" content="heitorpb.github.io">
    <meta property="twitter:url" content="https://heitorpb.github.io/bla/swissfarwest/">

                <link rel="alternate" type="application/atom+xml" title="Heitor&#x27;s log Atom Feed" href="https://heitorpb.github.io/atom.xml" />
<!-- KaTeX css and JS -->
<link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js" integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>

<script defer>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          // customised options
          // ‚Ä¢ auto-render specific keys, e.g.:
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '\\(', right: '\\)', display: false},
          ],
          // ‚Ä¢ rendering keys, e.g.:
          //throwOnError : false
        });
    });
</script>

</head>

<body class="">
<div class="container">
    
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                    
                <a href="https://heitorpb.github.io" style="text-decoration: none;">
                    <div class="logo">
                      
                            Heitor&#x27;s Log
                        
                    </div>
                </a>
            </div>
        </div>

        
        <nav class="menu">
            <ul class="menu__inner">
                <li><a href="https://heitorpb.github.io">Home</a></li>
            
                <li><a href="https://heitorpb.github.io/me/">About me</a></li>
            
                <li><a href="https://flickr.com/photos/heitorpb/">Photos</a></li>
            
                <li class="active"><a href="https://heitorpb.github.io/bla/">Articles</a></li>
            </ul>
        </nav>
    
    
        
    </header>
    

    <div class="content">
        
    <div class="post">
        
    <h1 class="post-title"><a href="https://heitorpb.github.io/bla/swissfarwest/">The Swiss Far West and GPX fun</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            Sep 25, 2018
        </span>

    </div>

    
        <span class="post-tags-inline" style="font-size: .8rem">
                :: tags:&nbsp;
                <a class="post-tag" href="https://heitorpb.github.io/tags/python/">#Python</a>&nbsp;
                <a class="post-tag" href="https://heitorpb.github.io/tags/analysis/">#analysis</a>&nbsp;
                <a class="post-tag" href="https://heitorpb.github.io/tags/hiking/">#hiking</a></span>
    
    
    <br><div class="post-meta-inline"><small>
        Reading time: 3 minutes
    </small></div>
    

        
        <div class="post-content">
            <p>Yesterday my supervisor and I went to a hike to the <em>Swiss Far West</em>, the westernmost
part of Switzerland. Unfortunately, we couldn‚Äôt go to the precise westernmost point
of the border with France, because that‚Äôs in the
<abbr title="Latitude: 46.1323565, Longitude: 5.9559113">middle</abbr> of the
river <em>Le Rh√¥ne</em><sup class="footnote-reference"><a href="#1">1</a></sup> and we didn‚Äôt want to get inside the water.</p>
<p>I recorded our hike using <a rel="external" href="https://osmand.net/">OsmAnd</a>, a very nice app for
maps and location and finding out how to go from one place to another. And all
that offline! You only need internet connection to download the app :) Oh, and
it‚Äôs <abbr title="as in free beer">free</abbr>!</p>
<p>The app gave me <a href="https://heitorpb.github.io/bla/swissfarwest/hike.gpx">this <abbr title="GPS Exchange Format">GPX</abbr>
file</a>. It‚Äôs basically an XML file with coordinates (latitude,
longidute, elevation and time) and some more information. You can read more
about the format on
<a rel="external" href="https://en.wikipedia.org/wiki/GPS_Exchange_Format">WikiPedia</a>.</p>
<p>I found this <a rel="external" href="https://github.com/tkrajina/gpxpy">gpxpy</a> library to work with
<abbr title="GPS Exchange Format">GPX</abbr> files. It‚Äôs quite easy to use it
together with <a rel="external" href="https://matplotlib.org/">matplotlib</a>:</p>
<pre class="giallo" style="color: #E6EDF3; background-color: #0D1117;"><code data-lang="python"><span class="giallo-l"><span style="color: #FF7B72;">import</span><span> gpxpy</span></span>
<span class="giallo-l"><span style="color: #FF7B72;">import</span><span> matplotlib.pyplot</span><span style="color: #FF7B72;"> as</span><span> plt</span></span>
<span class="giallo-l"><span style="color: #FF7B72;">from</span><span> matplotlib</span><span style="color: #FF7B72;"> import</span><span> animation</span></span>
<span class="giallo-l"><span style="color: #FF7B72;">from</span><span> mpl_toolkits.mplot3d</span><span style="color: #FF7B72;"> import</span><span> Axes3D</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span>gpx_filename</span><span style="color: #FF7B72;"> =</span><span style="color: #A5D6FF;"> &quot;hike.gpx&quot;</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span>gps_lat</span><span style="color: #FF7B72;"> =</span><span> []</span></span>
<span class="giallo-l"><span>gps_long</span><span style="color: #FF7B72;"> =</span><span> []</span></span>
<span class="giallo-l"><span>gps_elevation</span><span style="color: #FF7B72;"> =</span><span> []</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span>fig</span><span style="color: #FF7B72;"> =</span><span> plt.figure()</span></span>
<span class="giallo-l"><span>ax</span><span style="color: #FF7B72;"> =</span><span> fig.add_subplot(</span><span style="color: #79C0FF;">111</span><span>,</span><span style="color: #FFA657;"> projection</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;3d&#39;</span><span>)</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span style="color: #FF7B72;">with</span><span style="color: #79C0FF;"> open</span><span>(gpx_filename,</span><span style="color: #A5D6FF;"> &#39;r&#39;</span><span>)</span><span style="color: #FF7B72;"> as</span><span> bla:</span></span>
<span class="giallo-l"><span>    gpx</span><span style="color: #FF7B72;"> =</span><span> gpxpy.parse(bla)</span></span>
<span class="giallo-l"><span style="color: #FF7B72;">    for</span><span> track</span><span style="color: #FF7B72;"> in</span><span> gpx.tracks:</span></span>
<span class="giallo-l"><span style="color: #FF7B72;">        for</span><span> segment</span><span style="color: #FF7B72;"> in</span><span> track.segments:</span></span>
<span class="giallo-l"><span style="color: #FF7B72;">            for</span><span> point</span><span style="color: #FF7B72;"> in</span><span> segment.points:</span></span>
<span class="giallo-l"><span>                gps_lat.append(point.latitude)</span></span>
<span class="giallo-l"><span>                gps_long.append(point.longitude)</span></span>
<span class="giallo-l"><span>                gps_elevation.append(point.elevation)</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span style="color: #FF7B72;">def</span><span style="color: #D2A8FF;"> init</span><span>():</span></span>
<span class="giallo-l"><span>    N</span><span style="color: #FF7B72;"> =</span><span style="color: #79C0FF;"> len</span><span>(gps_lat)</span></span>
<span class="giallo-l"><span style="color: #FF7B72;">    for</span><span> i</span><span style="color: #FF7B72;"> in</span><span style="color: #79C0FF;"> range</span><span>(N</span><span style="color: #FF7B72;"> -</span><span style="color: #79C0FF;"> 1</span><span>):</span></span>
<span class="giallo-l"><span>        ax.plot(gps_long[i:i</span><span style="color: #FF7B72;"> +</span><span style="color: #79C0FF;"> 2</span><span>],</span><span style="color: #8B949E;">           # x coordinate</span></span>
<span class="giallo-l"><span>                gps_lat[i:i</span><span style="color: #FF7B72;"> +</span><span style="color: #79C0FF;"> 2</span><span>],</span><span style="color: #8B949E;">            # y,</span></span>
<span class="giallo-l"><span>                gps_elevation[i:i</span><span style="color: #FF7B72;"> +</span><span style="color: #79C0FF;"> 2</span><span>],</span><span style="color: #8B949E;">      # z</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                color</span><span style="color: #FF7B72;">=</span><span>plt.cm.viridis(i</span><span style="color: #FF7B72;"> /</span><span> N))</span><span style="color: #8B949E;"> # sequential color</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span>    ax.set_xlabel(</span><span style="color: #A5D6FF;">&quot;longitude&quot;</span><span>)</span></span>
<span class="giallo-l"><span>    ax.set_ylabel(</span><span style="color: #A5D6FF;">&quot;latitude&quot;</span><span>)</span></span>
<span class="giallo-l"><span>    ax.set_zlabel(</span><span style="color: #A5D6FF;">&quot;altitude (meters)&quot;</span><span>)</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span style="color: #FF7B72;">    return</span><span> fig,</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span style="color: #FF7B72;">def</span><span style="color: #D2A8FF;"> animate</span><span>(i):</span></span>
<span class="giallo-l"><span>    ax.view_init(</span><span style="color: #FFA657;">elev</span><span style="color: #FF7B72;">=</span><span style="color: #79C0FF;">10</span><span>.,</span><span style="color: #FFA657;"> azim</span><span style="color: #FF7B72;">=</span><span>i)</span></span>
<span class="giallo-l"><span style="color: #FF7B72;">    return</span><span> fig,</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span>anim</span><span style="color: #FF7B72;"> =</span><span> animation.FuncAnimation(fig, animate,</span><span style="color: #FFA657;"> init_func</span><span style="color: #FF7B72;">=</span><span>init,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                               frames</span><span style="color: #FF7B72;">=</span><span style="color: #79C0FF;">360</span><span>,</span><span style="color: #FFA657;"> interval</span><span style="color: #FF7B72;">=</span><span style="color: #79C0FF;">20</span><span>,</span><span style="color: #FFA657;"> blit</span><span style="color: #FF7B72;">=</span><span style="color: #79C0FF;">True</span><span>)</span></span>
<span class="giallo-l"><span>anim.save(</span><span style="color: #A5D6FF;">&#39;hike.mp4&#39;</span><span>,</span><span style="color: #FFA657;"> fps</span><span style="color: #FF7B72;">=</span><span style="color: #79C0FF;">30</span><span>,</span><span style="color: #FFA657;"> extra_args</span><span style="color: #FF7B72;">=</span><span>[</span><span style="color: #A5D6FF;">&#39;-vcodec&#39;</span><span>,</span><span style="color: #A5D6FF;"> &#39;libx264&#39;</span><span>])</span></span>
<span class="giallo-l"></span></code></pre>
<p>And this codes gives the path of our hike, after about 150 seconds:</p>
<video width="100%" height="100%" loop="True" controls>
  <source src="hike.mp4" type="video/mp4">
  Your browser does not support the HTML5 video tag :(
  click <a href="hike.mp4"> here </a> to view the animation.
</video><br>
<p>And that‚Äôs pretty cool üòé</p>
<p>Lets extract some more information about this <abbr title="GPS Exchange Format">GPX</abbr>
file, in Python:</p>
<pre class="giallo" style="color: #E6EDF3; background-color: #0D1117;"><code data-lang="python"><span class="giallo-l"><span style="color: #FF7B72;">import</span><span> gpxpy</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span>gpx_filename</span><span style="color: #FF7B72;"> =</span><span style="color: #A5D6FF;"> &quot;hike.gpx&quot;</span></span>
<span class="giallo-l"><span>gpx</span><span style="color: #FF7B72;"> =</span><span> gpxpy.parse(</span><span style="color: #79C0FF;">open</span><span>(gpx_filename))</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span style="color: #79C0FF;">print</span><span>(</span><span style="color: #A5D6FF;">&quot;&quot;</span><span>)</span></span>
<span class="giallo-l"><span style="color: #79C0FF;">print</span><span>(</span><span style="color: #A5D6FF;">&quot;distance:&quot;</span><span>, gpx.length_3d(),</span><span style="color: #A5D6FF;"> &quot;m&quot;</span><span>)</span></span>
<span class="giallo-l"><span style="color: #79C0FF;">print</span><span>(</span><span style="color: #A5D6FF;">&quot;duration:&quot;</span><span>, gpx.get_duration(),</span><span style="color: #A5D6FF;"> &quot;s&quot;</span><span>)</span></span>
<span class="giallo-l"><span style="color: #79C0FF;">print</span><span>(</span><span style="color: #A5D6FF;">&quot;started:&quot;</span><span>, gpx.get_time_bounds()[</span><span style="color: #79C0FF;">0</span><span>])</span></span>
<span class="giallo-l"><span style="color: #79C0FF;">print</span><span>(</span><span style="color: #A5D6FF;">&quot;ended:&quot;</span><span>,   gpx.get_time_bounds()[</span><span style="color: #79C0FF;">1</span><span>])</span></span>
<span class="giallo-l"><span style="color: #79C0FF;">print</span><span>(</span><span style="color: #A5D6FF;">&quot;elevation extremes:&quot;</span><span>, gpx.get_elevation_extremes()[:],</span><span style="color: #A5D6FF;"> &quot;m&quot;</span><span>)</span></span>
<span class="giallo-l"><span style="color: #79C0FF;">print</span><span>(</span><span style="color: #A5D6FF;">&quot;Max speed: &quot;</span><span>, gpx.get_moving_data()[</span><span style="color: #FF7B72;">-</span><span style="color: #79C0FF;">1</span><span>],</span><span style="color: #A5D6FF;"> &quot;m/s&quot;</span><span>)</span></span>
<span class="giallo-l"><span style="color: #79C0FF;">print</span><span>(</span><span style="color: #A5D6FF;">&quot;Boundaries: &quot;</span><span>, [bla</span><span style="color: #FF7B72;"> for</span><span> bla</span><span style="color: #FF7B72;"> in</span><span> gpx.get_bounds()])</span></span>
<span class="giallo-l"></span></code></pre>
<p>Which gives:</p>
<pre class="giallo" style="color: #E6EDF3; background-color: #0D1117;"><code data-lang="shellscript"><span class="giallo-l"><span style="color: #FFA657;">$</span><span style="color: #A5D6FF;"> python infos.py</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span style="color: #FFA657;">distance:</span><span style="color: #79C0FF;"> 5892.264830266586</span><span style="color: #A5D6FF;"> m</span></span>
<span class="giallo-l"><span style="color: #FFA657;">duration</span><span>;</span><span style="color: #FFA657;"> 5550</span><span style="color: #A5D6FF;"> s</span></span>
<span class="giallo-l"><span style="color: #FFA657;">started:</span><span style="color: #A5D6FF;"> 2018-09-24 07:36:10</span></span>
<span class="giallo-l"><span style="color: #FFA657;">ended:</span><span style="color: #A5D6FF;"> 2018-09-24 09:08:40</span></span>
<span class="giallo-l"><span style="color: #FFA657;">elevation</span><span style="color: #A5D6FF;"> extremes:</span><span> (320.36,</span><span style="color: #79C0FF;"> 429.36</span><span>) m</span></span>
<span class="giallo-l"><span style="color: #FFA657;">Max</span><span style="color: #A5D6FF;"> speed:</span><span style="color: #79C0FF;">  1.8713130924592616</span><span style="color: #A5D6FF;"> m/s</span></span>
<span class="giallo-l"><span style="color: #FFA657;">Boundaries:</span><span>  [46.1285393,</span><span style="color: #A5D6FF;"> 46.13805, 5.9561619, 5.9720922]</span></span></code></pre>
<p>Nice! But the nicest thing would be a simple way to add the
<abbr title="GPS Exchange Format">GPX</abbr> coordinates on top of the map of
the region. The library <a rel="external" href="https://github.com/wrobell/geotiler">geotiler</a>
provides a way to get the map from <a rel="external" href="http://openstreetmap.org/">OpenStreetMap</a>.
You might need <a rel="external" href="https://redis.io/">Redis</a> running as server in the background
for <em>geotiler</em> to work. Here‚Äôs the code:</p>
<pre class="giallo" style="color: #E6EDF3; background-color: #0D1117;"><code data-lang="python"><span class="giallo-l"><span style="color: #FF7B72;">import</span><span> matplotlib.pyplot</span><span style="color: #FF7B72;"> as</span><span> plt</span></span>
<span class="giallo-l"><span style="color: #FF7B72;">from</span><span> mpl_toolkits.basemap</span><span style="color: #FF7B72;"> import</span><span> Basemap</span></span>
<span class="giallo-l"><span style="color: #FF7B72;">import</span><span> matplotlib.patheffects</span><span style="color: #FF7B72;"> as</span><span> PathEffects</span></span>
<span class="giallo-l"><span style="color: #FF7B72;">from</span><span> matplotlib.patches</span><span style="color: #FF7B72;"> import</span><span> Ellipse</span></span>
<span class="giallo-l"><span style="color: #FF7B72;">import</span><span> geotiler</span></span>
<span class="giallo-l"><span style="color: #FF7B72;">import</span><span> gpxpy</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span>gpx_filename</span><span style="color: #FF7B72;"> =</span><span style="color: #A5D6FF;"> &quot;hike.gpx&quot;</span></span>
<span class="giallo-l"><span>gpx</span><span style="color: #FF7B72;"> =</span><span> gpxpy.parse(</span><span style="color: #79C0FF;">open</span><span>(gpx_filename))</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span>bbox</span><span style="color: #FF7B72;"> =</span><span> [gpx.get_bounds().min_longitude</span><span style="color: #FF7B72;"> -</span><span style="color: #79C0FF;"> 0.002</span><span>,</span></span>
<span class="giallo-l"><span>        gpx.get_bounds().min_latitude</span><span style="color: #FF7B72;">  -</span><span style="color: #79C0FF;"> 0.002</span><span>,</span></span>
<span class="giallo-l"><span>        gpx.get_bounds().max_longitude</span><span style="color: #FF7B72;"> +</span><span style="color: #79C0FF;"> 0.002</span><span>,</span></span>
<span class="giallo-l"><span>        gpx.get_bounds().max_latitude</span><span style="color: #FF7B72;">  +</span><span style="color: #79C0FF;"> 0.002</span><span>]</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span>fig</span><span style="color: #FF7B72;"> =</span><span> plt.figure(</span><span style="color: #FFA657;">figsize</span><span style="color: #FF7B72;">=</span><span>(</span><span style="color: #79C0FF;">13</span><span>,</span><span style="color: #79C0FF;"> 13</span><span>))</span></span>
<span class="giallo-l"><span>ax</span><span style="color: #FF7B72;"> =</span><span> plt.subplot(</span><span style="color: #79C0FF;">111</span><span>)</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span style="color: #8B949E;"># download tiles from OSM</span></span>
<span class="giallo-l"><span>mm</span><span style="color: #FF7B72;"> =</span><span> geotiler.Map(</span><span style="color: #FFA657;">extent</span><span style="color: #FF7B72;"> =</span><span> bbox,</span><span style="color: #FFA657;"> zoom</span><span style="color: #FF7B72;"> =</span><span style="color: #79C0FF;"> 16</span><span>)</span></span>
<span class="giallo-l"><span>img</span><span style="color: #FF7B72;"> =</span><span> geotiler.render_map(mm)</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span>myMap</span><span style="color: #FF7B72;"> =</span><span> Basemap(</span><span style="color: #FFA657;">llcrnrlon</span><span style="color: #FF7B72;">=</span><span>bbox[</span><span style="color: #79C0FF;">0</span><span>],</span><span style="color: #FFA657;"> llcrnrlat</span><span style="color: #FF7B72;">=</span><span>bbox[</span><span style="color: #79C0FF;">1</span><span>],</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                urcrnrlon</span><span style="color: #FF7B72;">=</span><span>bbox[</span><span style="color: #79C0FF;">2</span><span>],</span><span style="color: #FFA657;"> urcrnrlat</span><span style="color: #FF7B72;">=</span><span>bbox[</span><span style="color: #79C0FF;">3</span><span>],</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                projection</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;merc&#39;</span><span>,</span><span style="color: #FFA657;"> ax</span><span style="color: #FF7B72;">=</span><span>ax)</span></span>
<span class="giallo-l"><span>myMap.imshow(img,</span><span style="color: #FFA657;"> interpolation</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;lanczos&#39;</span><span>,</span><span style="color: #FFA657;"> origin</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;upper&#39;</span><span>)</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span style="color: #8B949E;"># plot hike</span></span>
<span class="giallo-l"><span>points</span><span style="color: #FF7B72;"> =</span><span> gpx.get_points_data()</span></span>
<span class="giallo-l"><span>lon</span><span style="color: #FF7B72;"> =</span><span> [p[</span><span style="color: #79C0FF;">0</span><span>].longitude</span><span style="color: #FF7B72;"> for</span><span> p</span><span style="color: #FF7B72;"> in</span><span> points]</span></span>
<span class="giallo-l"><span>lat</span><span style="color: #FF7B72;"> =</span><span> [p[</span><span style="color: #79C0FF;">0</span><span>].latitude</span><span style="color: #FF7B72;">  for</span><span> p</span><span style="color: #FF7B72;"> in</span><span> points]</span></span>
<span class="giallo-l"><span>index</span><span style="color: #FF7B72;"> =</span><span> [p.point_no</span><span style="color: #FF7B72;"> for</span><span> p</span><span style="color: #FF7B72;"> in</span><span> points]</span><span style="color: #8B949E;"> # to color sequentially each point</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span>x, y</span><span style="color: #FF7B72;"> =</span><span> myMap(lon, lat)</span><span style="color: #8B949E;"> # map (long, lat) to (x,y) coordinates in plot</span></span>
<span class="giallo-l"><span>ax.scatter(x, y,</span><span style="color: #FFA657;"> c</span><span style="color: #FF7B72;"> =</span><span> index,</span><span style="color: #FFA657;"> s</span><span style="color: #FF7B72;"> =</span><span style="color: #79C0FF;"> 4</span><span>,</span><span style="color: #FFA657;"> cmap</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;brg&#39;</span><span>)</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span style="color: #8B949E;"># add some texts and arrows with style</span></span>
<span class="giallo-l"><span>t1</span><span style="color: #FF7B72;"> =</span><span> ax.annotate(</span><span style="color: #A5D6FF;">&#39;France&#39;</span><span>,</span><span style="color: #FFA657;"> xy</span><span style="color: #FF7B72;">=</span><span>(</span><span style="color: #79C0FF;">.01</span><span>,</span><span style="color: #79C0FF;"> .96</span><span>),</span><span style="color: #FFA657;"> xycoords</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;axes fraction&#39;</span><span>,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                 horizontalalignment</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;left&#39;</span><span>,</span><span style="color: #FFA657;"> fontsize</span><span style="color: #FF7B72;"> =</span><span style="color: #79C0FF;"> 20</span><span>,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                 verticalalignment</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;bottom&#39;</span><span>,</span><span style="color: #FFA657;"> fontname</span><span style="color: #FF7B72;"> =</span><span style="color: #A5D6FF;"> &#39;monospace&#39;</span><span>)</span></span>
<span class="giallo-l"><span>t2</span><span style="color: #FF7B72;"> =</span><span> ax.annotate(</span><span style="color: #A5D6FF;">&#39;Switzerland&#39;</span><span>,</span><span style="color: #FFA657;"> xy</span><span style="color: #FF7B72;">=</span><span>(</span><span style="color: #79C0FF;">.99</span><span>,</span><span style="color: #79C0FF;"> .96</span><span>),</span><span style="color: #FFA657;"> xycoords</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;axes fraction&#39;</span><span>,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                 horizontalalignment</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;right&#39;</span><span>,</span><span style="color: #FFA657;"> fontsize</span><span style="color: #FF7B72;"> =</span><span style="color: #79C0FF;"> 20</span><span>,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                 verticalalignment</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;bottom&#39;</span><span>,</span><span style="color: #FFA657;"> fontname</span><span style="color: #FF7B72;"> =</span><span style="color: #A5D6FF;"> &#39;monospace&#39;</span><span>)</span></span>
<span class="giallo-l"><span>el</span><span style="color: #FF7B72;"> =</span><span> Ellipse((</span><span style="color: #79C0FF;">2</span><span>,</span><span style="color: #FF7B72;"> -</span><span style="color: #79C0FF;">1</span><span>),</span><span style="color: #79C0FF;"> 0.5</span><span>,</span><span style="color: #79C0FF;"> 0.5</span><span>)</span></span>
<span class="giallo-l"><span>t3</span><span style="color: #FF7B72;"> =</span><span> ax.annotate(</span><span style="color: #A5D6FF;">&#39;Border&#39;</span><span>,</span><span style="color: #FFA657;"> xy</span><span style="color: #FF7B72;">=</span><span>(</span><span style="color: #79C0FF;">.61</span><span>,</span><span style="color: #79C0FF;"> .90</span><span>),</span><span style="color: #FFA657;"> xycoords</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;axes fraction&#39;</span><span>,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                 xytext</span><span style="color: #FF7B72;">=</span><span>(</span><span style="color: #79C0FF;">.5</span><span>,</span><span style="color: #79C0FF;"> .96</span><span>),</span><span style="color: #FFA657;"> textcoords</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;axes fraction&#39;</span><span>,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                 horizontalalignment</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;center&#39;</span><span>,</span><span style="color: #FFA657;"> fontsize</span><span style="color: #FF7B72;"> =</span><span style="color: #79C0FF;"> 20</span><span>,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                 verticalalignment</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;bottom&#39;</span><span>,</span><span style="color: #FFA657;"> fontname</span><span style="color: #FF7B72;"> =</span><span style="color: #A5D6FF;"> &#39;monospace&#39;</span><span>,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                 arrowprops</span><span style="color: #FF7B72;">=</span><span style="color: #79C0FF;">dict</span><span>(</span><span style="color: #FFA657;">arrowstyle</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&quot;simple&quot;</span><span>,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                                 fc</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&quot;black&quot;</span><span>,</span><span style="color: #FFA657;"> ec</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&quot;none&quot;</span><span>,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                                 patchB</span><span style="color: #FF7B72;">=</span><span>el,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                                 connectionstyle</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&quot;arc3,rad=0.3&quot;</span><span>))</span></span>
<span class="giallo-l"><span>t4</span><span style="color: #FF7B72;"> =</span><span> ax.annotate(</span><span style="color: #A5D6FF;">&quot;Switzerland&#39;s</span><span style="color: #FF7B72;">\n</span><span style="color: #A5D6FF;">westest point&quot;</span><span>,</span><span style="color: #FFA657;"> xy</span><span style="color: #FF7B72;">=</span><span>myMap(</span><span style="color: #79C0FF;">5.9559555</span><span>,</span><span style="color: #79C0FF;"> 46.1323555</span><span>),</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                 xytext</span><span style="color: #FF7B72;">=</span><span>(</span><span style="color: #79C0FF;">.3</span><span>,</span><span style="color: #79C0FF;"> .42</span><span>),</span><span style="color: #FFA657;"> textcoords</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;axes fraction&#39;</span><span>,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                 horizontalalignment</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;center&#39;</span><span>,</span><span style="color: #FFA657;"> fontsize</span><span style="color: #FF7B72;"> =</span><span style="color: #79C0FF;"> 20</span><span>,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                 verticalalignment</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;bottom&#39;</span><span>,</span><span style="color: #FFA657;"> fontname</span><span style="color: #FF7B72;"> =</span><span style="color: #A5D6FF;"> &#39;monospace&#39;</span><span>,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                 arrowprops</span><span style="color: #FF7B72;">=</span><span style="color: #79C0FF;">dict</span><span>(</span><span style="color: #FFA657;">arrowstyle</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&quot;simple&quot;</span><span>,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                                 fc</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&quot;black&quot;</span><span>,</span><span style="color: #FFA657;"> ec</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&quot;none&quot;</span><span>,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                                 patchB</span><span style="color: #FF7B72;">=</span><span>el,</span></span>
<span class="giallo-l"><span style="color: #FFA657;">                                 connectionstyle</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&quot;arc3,rad=0.3&quot;</span><span>))</span></span>
<span class="giallo-l"><span style="color: #FF7B72;">for</span><span> t</span><span style="color: #FF7B72;"> in</span><span> [t1, t2, t3, t4]:</span></span>
<span class="giallo-l"><span>    t.set_path_effects([PathEffects.withStroke(</span><span style="color: #FFA657;">linewidth</span><span style="color: #FF7B72;">=</span><span style="color: #79C0FF;">5</span><span>,</span><span style="color: #FFA657;"> foreground</span><span style="color: #FF7B72;">=</span><span style="color: #A5D6FF;">&#39;w&#39;</span><span>,</span><span style="color: #FFA657;"> alpha</span><span style="color: #FF7B72;"> =</span><span style="color: #79C0FF;"> 0.666</span><span>)])</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span>plt.savefig(</span><span style="color: #A5D6FF;">&#39;map.png&#39;</span><span>,</span><span style="color: #FFA657;"> quality</span><span style="color: #FF7B72;"> =</span><span style="color: #79C0FF;"> 100</span><span>,</span><span style="color: #FFA657;"> bbox_inches</span><span style="color: #FF7B72;"> =</span><span style="color: #A5D6FF;"> &#39;tight&#39;</span><span>)</span></span>
<span class="giallo-l"><span>plt.close()</span></span></code></pre>
<p>It reads the <abbr title="GPS Exchange Format">GPX</abbr> file, gets the map of
the region from OpenStreeMap, adds coloured points showing the path and some
texts. The result:</p>
<p><a href="https://heitorpb.github.io/bla/swissfarwest/map.png"><img src="https://heitorpb.github.io/bla/swissfarwest/map.png" alt="The coloured points are our hiking path :)" loading="lazy" decoding="async" /></a></p>
<p>The blue points mark the beginning of the hike. And it changes colours all the
way to the green points, marking the end of our 5892.3 meters walk :) As you
can see, we got pretty close to the westernmost Swiss point! For
some reason, my phone lost GPS connection in the beginning, that‚Äôs why it‚Äôs
missing some blue points.</p>
<hr />
<p>Footnotes:</p>
<ul>
<li>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p><a rel="external" href="https://osm.org/go/0CFL8Bq5?m=">Latitude: 46.1323565, Longitude: 5.9559113</a></p>
</div>
</li>
</ul>

        </div>

        
        <div class="pagination">
            <div class="pagination__title">
                <span class="pagination__title-h">Thanks for reading! Read more?</span>
                <hr />
            </div>
            <div class="pagination__buttons">
                    <span class="button previous">
                        <a href="https://heitorpb.github.io/bla/lorem/">
                            <span class="button__icon">‚Üê</span>&nbsp;
                            <span class="button__text">Mussum Ipsum</span>
                        </a>
                    </span>
                
                
                    <span class="button next">
                        <a href="https://heitorpb.github.io/bla/essertineshiking/">
                            <span class="button__text">Hiking in Essertines - Switzerland</span>&nbsp;
                            <span class="button__icon">‚Üí</span>
                        </a>
                    </span>
                </div>
        </div>
    
    </div>

    </div>

    
    <footer class="footer">
        <div class="footer__inner">
                <div class="copyright copyright--user">¬© 2018-2025 Heitor de Bittencourt</div>
            </div>
    </footer>
    

</div>
</body>

</html>
