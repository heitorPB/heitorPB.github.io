<!DOCTYPE html>
<html lang="en">

<head>
    <title>The Swiss Far West and GPX fun | Heitor&#x27;s log</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="robots" content="noodp"/>

    <link rel="stylesheet" href="https://heitorpb.github.io/style.css">
    <link rel="stylesheet" href="https://heitorpb.github.io/color/green.css">

        <link rel="stylesheet" href="https://heitorpb.github.io/color/background_dark.css">
    
    <link rel="stylesheet" href="https://heitorpb.github.io/font-hack-subset.css">

    <meta name="description" content="GPX fun in Python.">

    <meta property="og:description" content="GPX fun in Python.">
    <meta property="og:title" content="The Swiss Far West and GPX fun | Heitor's log">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://heitorpb.github.io/bla/swissfarwest/">

    <meta property="og:image" content="https://heitorpb.github.io/bla/swissfarwest/map.png">
    <meta name="twitter:image" content="https://heitorpb.github.io/bla/swissfarwest/map.png">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="GPX fun in Python.">
    <meta name="twitter:title" content="The Swiss Far West and GPX fun | Heitor's log">
    <meta property="twitter:domain" content="heitorpb.github.io">
    <meta property="twitter:url" content="https://heitorpb.github.io/bla/swissfarwest/">

            
        <link rel="alternate" type="application/atom+xml" title="RSS" href="https://heitorpb.github.io/atom.xml">
    
<!-- KaTeX css and JS -->
<link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js" integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>

<script defer>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          // customised options
          // • auto-render specific keys, e.g.:
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '\\(', right: '\\)', display: false},
          ],
          // • rendering keys, e.g.:
          //throwOnError : false
        });
    });
</script>

</head>

<body class="">
<div class="container">
    
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                    
                <a href="https://heitorpb.github.io" style="text-decoration: none;">
                    <div class="logo">
                      
                            Heitor&#x27;s Log
                        
                    </div>
                </a>
            </div>
        </div>

        
        <nav class="menu">
            <ul class="menu__inner">
                <li><a href="https://heitorpb.github.io">Home</a></li>
            
                <li><a href="https://heitorpb.github.io/me">About me</a></li>
            
                <li><a href="https://flickr.com/photos/heitorpb">Photos</a></li>
            
                <li class="active"><a href="https://heitorpb.github.io/bla">Articles</a></li>
            </ul>
        </nav>
    
    
        
    </header>
    

    <div class="content">
        
    <div class="post">
        
    <h1 class="post-title"><a href="https://heitorpb.github.io/bla/swissfarwest/">The Swiss Far West and GPX fun</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            Sep 25, 2018
        </span>

    </div>

    
        <span class="post-tags-inline">
                :: tags:&nbsp;
                <a class="post-tag" href="https://heitorpb.github.io/tags/analysis/">#analysis</a>&nbsp;
                <a class="post-tag" href="https://heitorpb.github.io/tags/hiking/">#hiking</a>&nbsp;
                <a class="post-tag" href="https://heitorpb.github.io/tags/python/">#python</a></span>
    
    
    <br><div class="post-meta-inline"><small>
        Reading time: 3 minutes
    </small></div>
    

        
        <div class="post-content">
            <p>Yesterday my supervisor and I went to a hike to the <em>Swiss Far West</em>, the westernmost
part of Switzerland. Unfortunately, we couldn’t go to the precise westernmost point
of the border with France, because that’s in the
<abbr title="Latitude: 46.1323565, Longitude: 5.9559113">middle</abbr> of the
river <em>Le Rhône</em><sup class="footnote-reference"><a href="#1">1</a></sup> and we didn’t want to get inside the water.</p>
<p>I recorded our hike using <a href="https://osmand.net/">OsmAnd</a>, a very nice app for
maps and location and finding out how to go from one place to another. And all
that offline! You only need internet connection to download the app :) Oh, and
it’s <abbr title="as in free beer">free</abbr>!</p>
<p>The app gave me <a href="https://heitorpb.github.io/bla/swissfarwest/hike.gpx">this <abbr title="GPS Exchange Format">GPX</abbr>
file</a>. It’s basically an XML file with coordinates (latitude,
longidute, elevation and time) and some more information. You can read more
about the format on
<a href="https://en.wikipedia.org/wiki/GPS_Exchange_Format">WikiPedia</a>.</p>
<p>I found this <a href="https://github.com/tkrajina/gpxpy">gpxpy</a> library to work with
<abbr title="GPS Exchange Format">GPX</abbr> files. It’s quite easy to use it
together with <a href="https://matplotlib.org/">matplotlib</a>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>gpxpy
</span><span style="color:#b48ead;">import </span><span>matplotlib.pyplot </span><span style="color:#b48ead;">as </span><span>plt
</span><span style="color:#b48ead;">from </span><span>matplotlib </span><span style="color:#b48ead;">import </span><span>animation
</span><span style="color:#b48ead;">from </span><span>mpl_toolkits.mplot3d </span><span style="color:#b48ead;">import </span><span>Axes3D
</span><span>
</span><span>gpx_filename = &quot;</span><span style="color:#a3be8c;">hike.gpx</span><span>&quot;
</span><span>
</span><span>gps_lat = []
</span><span>gps_long = []
</span><span>gps_elevation = []
</span><span>
</span><span>fig = plt.</span><span style="color:#bf616a;">figure</span><span>()
</span><span>ax = fig.</span><span style="color:#bf616a;">add_subplot</span><span>(</span><span style="color:#d08770;">111</span><span>, </span><span style="color:#bf616a;">projection</span><span>=&#39;</span><span style="color:#a3be8c;">3d</span><span>&#39;)
</span><span>
</span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(gpx_filename, &#39;</span><span style="color:#a3be8c;">r</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>bla:
</span><span>    gpx = gpxpy.</span><span style="color:#bf616a;">parse</span><span>(bla)
</span><span>    </span><span style="color:#b48ead;">for </span><span>track </span><span style="color:#b48ead;">in </span><span>gpx.tracks:
</span><span>        </span><span style="color:#b48ead;">for </span><span>segment </span><span style="color:#b48ead;">in </span><span>track.segments:
</span><span>            </span><span style="color:#b48ead;">for </span><span>point </span><span style="color:#b48ead;">in </span><span>segment.points:
</span><span>                gps_lat.</span><span style="color:#bf616a;">append</span><span>(point.latitude)
</span><span>                gps_long.</span><span style="color:#bf616a;">append</span><span>(point.longitude)
</span><span>                gps_elevation.</span><span style="color:#bf616a;">append</span><span>(point.elevation)
</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">init</span><span>():
</span><span>    N = </span><span style="color:#96b5b4;">len</span><span>(gps_lat)
</span><span>    </span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(N - </span><span style="color:#d08770;">1</span><span>):
</span><span>        ax.</span><span style="color:#bf616a;">plot</span><span>(gps_long[i:i + </span><span style="color:#d08770;">2</span><span>],           </span><span style="color:#65737e;"># x coordinate
</span><span>                gps_lat[i:i + </span><span style="color:#d08770;">2</span><span>],            </span><span style="color:#65737e;"># y,
</span><span>                gps_elevation[i:i + </span><span style="color:#d08770;">2</span><span>],      </span><span style="color:#65737e;"># z
</span><span>                </span><span style="color:#bf616a;">color</span><span>=plt.cm.</span><span style="color:#bf616a;">viridis</span><span>(i / N)) </span><span style="color:#65737e;"># sequential color
</span><span>
</span><span>    ax.</span><span style="color:#bf616a;">set_xlabel</span><span>(&quot;</span><span style="color:#a3be8c;">longitude</span><span>&quot;)
</span><span>    ax.</span><span style="color:#bf616a;">set_ylabel</span><span>(&quot;</span><span style="color:#a3be8c;">latitude</span><span>&quot;)
</span><span>    ax.</span><span style="color:#bf616a;">set_zlabel</span><span>(&quot;</span><span style="color:#a3be8c;">altitude (meters)</span><span>&quot;)
</span><span>
</span><span>    </span><span style="color:#b48ead;">return </span><span>fig,
</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">animate</span><span>(</span><span style="color:#bf616a;">i</span><span>):
</span><span>    ax.</span><span style="color:#bf616a;">view_init</span><span>(</span><span style="color:#bf616a;">elev</span><span>=</span><span style="color:#d08770;">10.</span><span>, </span><span style="color:#bf616a;">azim</span><span>=i)
</span><span>    </span><span style="color:#b48ead;">return </span><span>fig,
</span><span>
</span><span>anim = animation.</span><span style="color:#bf616a;">FuncAnimation</span><span>(fig, animate, </span><span style="color:#bf616a;">init_func</span><span>=init,
</span><span>                               </span><span style="color:#bf616a;">frames</span><span>=</span><span style="color:#d08770;">360</span><span>, </span><span style="color:#bf616a;">interval</span><span>=</span><span style="color:#d08770;">20</span><span>, </span><span style="color:#bf616a;">blit</span><span>=</span><span style="color:#d08770;">True</span><span>)
</span><span>anim.</span><span style="color:#bf616a;">save</span><span>(&#39;</span><span style="color:#a3be8c;">hike.mp4</span><span>&#39;, </span><span style="color:#bf616a;">fps</span><span>=</span><span style="color:#d08770;">30</span><span>, </span><span style="color:#bf616a;">extra_args</span><span>=[&#39;</span><span style="color:#a3be8c;">-vcodec</span><span>&#39;, &#39;</span><span style="color:#a3be8c;">libx264</span><span>&#39;])
</span><span>
</span></code></pre>
<p>And this codes gives the path of our hike, after about 150 seconds:</p>
<video width="100%" height="100%" loop="True" controls>
  <source src="hike.mp4" type="video/mp4">
  Your browser does not support the HTML5 video tag :(
  click <a href="hike.mp4"> here </a> to view the animation.
</video><br>
<p>And that’s pretty cool 😎</p>
<p>Lets extract some more information about this <abbr title="GPS Exchange Format">GPX</abbr>
file, in Python:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>gpxpy
</span><span>
</span><span>gpx_filename = &quot;</span><span style="color:#a3be8c;">hike.gpx</span><span>&quot;
</span><span>gpx = gpxpy.</span><span style="color:#bf616a;">parse</span><span>(</span><span style="color:#96b5b4;">open</span><span>(gpx_filename))
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(&quot;&quot;)
</span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">distance:</span><span>&quot;, gpx.</span><span style="color:#bf616a;">length_3d</span><span>(), &quot;</span><span style="color:#a3be8c;">m</span><span>&quot;)
</span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">duration:</span><span>&quot;, gpx.</span><span style="color:#bf616a;">get_duration</span><span>(), &quot;</span><span style="color:#a3be8c;">s</span><span>&quot;)
</span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">started:</span><span>&quot;, gpx.</span><span style="color:#bf616a;">get_time_bounds</span><span>()[</span><span style="color:#d08770;">0</span><span>])
</span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">ended:</span><span>&quot;,   gpx.</span><span style="color:#bf616a;">get_time_bounds</span><span>()[</span><span style="color:#d08770;">1</span><span>])
</span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">elevation extremes:</span><span>&quot;, gpx.</span><span style="color:#bf616a;">get_elevation_extremes</span><span>()[:], &quot;</span><span style="color:#a3be8c;">m</span><span>&quot;)
</span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">Max speed: </span><span>&quot;, gpx.</span><span style="color:#bf616a;">get_moving_data</span><span>()[-</span><span style="color:#d08770;">1</span><span>], &quot;</span><span style="color:#a3be8c;">m/s</span><span>&quot;)
</span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">Boundaries: </span><span>&quot;, [bla </span><span style="color:#b48ead;">for </span><span>bla </span><span style="color:#b48ead;">in </span><span>gpx.</span><span style="color:#bf616a;">get_bounds</span><span>()])
</span><span>
</span></code></pre>
<p>Which gives:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">$</span><span> python infos.py
</span><span>
</span><span style="color:#bf616a;">distance:</span><span> 5892.264830266586 m
</span><span style="color:#bf616a;">duration</span><span>; </span><span style="color:#bf616a;">5550</span><span> s
</span><span style="color:#bf616a;">started:</span><span> 2018-09-24 07:36:10
</span><span style="color:#bf616a;">ended:</span><span> 2018-09-24 09:08:40
</span><span style="color:#bf616a;">elevation</span><span> extremes: (320.36, 429.36) </span><span style="color:#bf616a;">m
</span><span style="color:#bf616a;">Max</span><span> speed:  1.8713130924592616 m/s
</span><span style="color:#bf616a;">Boundaries:  </span><span style="color:#b48ead;">[</span><span>46.1285393, 46.13805, 5.9561619, 5.9720922</span><span style="color:#b48ead;">]
</span></code></pre>
<p>Nice! But the nicest thing would be a simple way to add the
<abbr title="GPS Exchange Format">GPX</abbr> coordinates on top of the map of
the region. The library <a href="https://github.com/wrobell/geotiler">geotiler</a>
provides a way to get the map from <a href="http://openstreetmap.org/">OpenStreetMap</a>.
You might need <a href="https://redis.io/">Redis</a> running as server in the background
for <em>geotiler</em> to work. Here’s the code:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>matplotlib.pyplot </span><span style="color:#b48ead;">as </span><span>plt
</span><span style="color:#b48ead;">from </span><span>mpl_toolkits.basemap </span><span style="color:#b48ead;">import </span><span>Basemap
</span><span style="color:#b48ead;">import </span><span>matplotlib.patheffects </span><span style="color:#b48ead;">as </span><span>PathEffects
</span><span style="color:#b48ead;">from </span><span>matplotlib.patches </span><span style="color:#b48ead;">import </span><span>Ellipse
</span><span style="color:#b48ead;">import </span><span>geotiler
</span><span style="color:#b48ead;">import </span><span>gpxpy
</span><span>
</span><span>gpx_filename = &quot;</span><span style="color:#a3be8c;">hike.gpx</span><span>&quot;
</span><span>gpx = gpxpy.</span><span style="color:#bf616a;">parse</span><span>(</span><span style="color:#96b5b4;">open</span><span>(gpx_filename))
</span><span>
</span><span>bbox = [gpx.</span><span style="color:#bf616a;">get_bounds</span><span>().min_longitude - </span><span style="color:#d08770;">0.002</span><span>,
</span><span>        gpx.</span><span style="color:#bf616a;">get_bounds</span><span>().min_latitude  - </span><span style="color:#d08770;">0.002</span><span>,
</span><span>        gpx.</span><span style="color:#bf616a;">get_bounds</span><span>().max_longitude + </span><span style="color:#d08770;">0.002</span><span>,
</span><span>        gpx.</span><span style="color:#bf616a;">get_bounds</span><span>().max_latitude  + </span><span style="color:#d08770;">0.002</span><span>]
</span><span>
</span><span>fig = plt.</span><span style="color:#bf616a;">figure</span><span>(</span><span style="color:#bf616a;">figsize</span><span>=(</span><span style="color:#d08770;">13</span><span>, </span><span style="color:#d08770;">13</span><span>))
</span><span>ax = plt.</span><span style="color:#bf616a;">subplot</span><span>(</span><span style="color:#d08770;">111</span><span>)
</span><span>
</span><span style="color:#65737e;"># download tiles from OSM
</span><span>mm = geotiler.</span><span style="color:#bf616a;">Map</span><span>(</span><span style="color:#bf616a;">extent </span><span>= bbox, </span><span style="color:#bf616a;">zoom </span><span>= </span><span style="color:#d08770;">16</span><span>)
</span><span>img = geotiler.</span><span style="color:#bf616a;">render_map</span><span>(mm)
</span><span>
</span><span>myMap = </span><span style="color:#bf616a;">Basemap</span><span>(</span><span style="color:#bf616a;">llcrnrlon</span><span>=bbox[</span><span style="color:#d08770;">0</span><span>], </span><span style="color:#bf616a;">llcrnrlat</span><span>=bbox[</span><span style="color:#d08770;">1</span><span>],
</span><span>                </span><span style="color:#bf616a;">urcrnrlon</span><span>=bbox[</span><span style="color:#d08770;">2</span><span>], </span><span style="color:#bf616a;">urcrnrlat</span><span>=bbox[</span><span style="color:#d08770;">3</span><span>],
</span><span>                </span><span style="color:#bf616a;">projection</span><span>=&#39;</span><span style="color:#a3be8c;">merc</span><span>&#39;, </span><span style="color:#bf616a;">ax</span><span>=ax)
</span><span>myMap.</span><span style="color:#bf616a;">imshow</span><span>(img, </span><span style="color:#bf616a;">interpolation</span><span>=&#39;</span><span style="color:#a3be8c;">lanczos</span><span>&#39;, </span><span style="color:#bf616a;">origin</span><span>=&#39;</span><span style="color:#a3be8c;">upper</span><span>&#39;)
</span><span>
</span><span style="color:#65737e;"># plot hike
</span><span>points = gpx.</span><span style="color:#bf616a;">get_points_data</span><span>()
</span><span>lon = [p[</span><span style="color:#d08770;">0</span><span>].longitude </span><span style="color:#b48ead;">for </span><span>p </span><span style="color:#b48ead;">in </span><span>points]
</span><span>lat = [p[</span><span style="color:#d08770;">0</span><span>].latitude  </span><span style="color:#b48ead;">for </span><span>p </span><span style="color:#b48ead;">in </span><span>points]
</span><span>index = [p.point_no </span><span style="color:#b48ead;">for </span><span>p </span><span style="color:#b48ead;">in </span><span>points] </span><span style="color:#65737e;"># to color sequentially each point
</span><span>
</span><span>x, y = </span><span style="color:#bf616a;">myMap</span><span>(lon, lat) </span><span style="color:#65737e;"># map (long, lat) to (x,y) coordinates in plot
</span><span>ax.</span><span style="color:#bf616a;">scatter</span><span>(x, y, </span><span style="color:#bf616a;">c </span><span>= index, </span><span style="color:#bf616a;">s </span><span>= </span><span style="color:#d08770;">4</span><span>, </span><span style="color:#bf616a;">cmap</span><span>=&#39;</span><span style="color:#a3be8c;">brg</span><span>&#39;)
</span><span>
</span><span style="color:#65737e;"># add some texts and arrows with style
</span><span>t1 = ax.</span><span style="color:#bf616a;">annotate</span><span>(&#39;</span><span style="color:#a3be8c;">France</span><span>&#39;, </span><span style="color:#bf616a;">xy</span><span>=(</span><span style="color:#d08770;">.01</span><span>, </span><span style="color:#d08770;">.96</span><span>), </span><span style="color:#bf616a;">xycoords</span><span>=&#39;</span><span style="color:#a3be8c;">axes fraction</span><span>&#39;,
</span><span>                 </span><span style="color:#bf616a;">horizontalalignment</span><span>=&#39;</span><span style="color:#a3be8c;">left</span><span>&#39;, </span><span style="color:#bf616a;">fontsize </span><span>= </span><span style="color:#d08770;">20</span><span>,
</span><span>                 </span><span style="color:#bf616a;">verticalalignment</span><span>=&#39;</span><span style="color:#a3be8c;">bottom</span><span>&#39;, </span><span style="color:#bf616a;">fontname </span><span>= &#39;</span><span style="color:#a3be8c;">monospace</span><span>&#39;)
</span><span>t2 = ax.</span><span style="color:#bf616a;">annotate</span><span>(&#39;</span><span style="color:#a3be8c;">Switzerland</span><span>&#39;, </span><span style="color:#bf616a;">xy</span><span>=(</span><span style="color:#d08770;">.99</span><span>, </span><span style="color:#d08770;">.96</span><span>), </span><span style="color:#bf616a;">xycoords</span><span>=&#39;</span><span style="color:#a3be8c;">axes fraction</span><span>&#39;,
</span><span>                 </span><span style="color:#bf616a;">horizontalalignment</span><span>=&#39;</span><span style="color:#a3be8c;">right</span><span>&#39;, </span><span style="color:#bf616a;">fontsize </span><span>= </span><span style="color:#d08770;">20</span><span>,
</span><span>                 </span><span style="color:#bf616a;">verticalalignment</span><span>=&#39;</span><span style="color:#a3be8c;">bottom</span><span>&#39;, </span><span style="color:#bf616a;">fontname </span><span>= &#39;</span><span style="color:#a3be8c;">monospace</span><span>&#39;)
</span><span>el = </span><span style="color:#bf616a;">Ellipse</span><span>((</span><span style="color:#d08770;">2</span><span>, -</span><span style="color:#d08770;">1</span><span>), </span><span style="color:#d08770;">0.5</span><span>, </span><span style="color:#d08770;">0.5</span><span>)
</span><span>t3 = ax.</span><span style="color:#bf616a;">annotate</span><span>(&#39;</span><span style="color:#a3be8c;">Border</span><span>&#39;, </span><span style="color:#bf616a;">xy</span><span>=(</span><span style="color:#d08770;">.61</span><span>, </span><span style="color:#d08770;">.90</span><span>), </span><span style="color:#bf616a;">xycoords</span><span>=&#39;</span><span style="color:#a3be8c;">axes fraction</span><span>&#39;,
</span><span>                 </span><span style="color:#bf616a;">xytext</span><span>=(</span><span style="color:#d08770;">.5</span><span>, </span><span style="color:#d08770;">.96</span><span>), </span><span style="color:#bf616a;">textcoords</span><span>=&#39;</span><span style="color:#a3be8c;">axes fraction</span><span>&#39;,
</span><span>                 </span><span style="color:#bf616a;">horizontalalignment</span><span>=&#39;</span><span style="color:#a3be8c;">center</span><span>&#39;, </span><span style="color:#bf616a;">fontsize </span><span>= </span><span style="color:#d08770;">20</span><span>,
</span><span>                 </span><span style="color:#bf616a;">verticalalignment</span><span>=&#39;</span><span style="color:#a3be8c;">bottom</span><span>&#39;, </span><span style="color:#bf616a;">fontname </span><span>= &#39;</span><span style="color:#a3be8c;">monospace</span><span>&#39;,
</span><span>                 </span><span style="color:#bf616a;">arrowprops</span><span>=</span><span style="color:#bf616a;">dict</span><span>(</span><span style="color:#bf616a;">arrowstyle</span><span>=&quot;</span><span style="color:#a3be8c;">simple</span><span>&quot;,
</span><span>                                 </span><span style="color:#bf616a;">fc</span><span>=&quot;</span><span style="color:#a3be8c;">black</span><span>&quot;, </span><span style="color:#bf616a;">ec</span><span>=&quot;</span><span style="color:#a3be8c;">none</span><span>&quot;,
</span><span>                                 </span><span style="color:#bf616a;">patchB</span><span>=el,
</span><span>                                 </span><span style="color:#bf616a;">connectionstyle</span><span>=&quot;</span><span style="color:#a3be8c;">arc3,rad=0.3</span><span>&quot;))
</span><span>t4 = ax.</span><span style="color:#bf616a;">annotate</span><span>(&quot;</span><span style="color:#a3be8c;">Switzerland&#39;s</span><span style="color:#96b5b4;">\n</span><span style="color:#a3be8c;">westest point</span><span>&quot;, </span><span style="color:#bf616a;">xy</span><span>=</span><span style="color:#bf616a;">myMap</span><span>(</span><span style="color:#d08770;">5.9559555</span><span>, </span><span style="color:#d08770;">46.1323555</span><span>),
</span><span>                 </span><span style="color:#bf616a;">xytext</span><span>=(</span><span style="color:#d08770;">.3</span><span>, </span><span style="color:#d08770;">.42</span><span>), </span><span style="color:#bf616a;">textcoords</span><span>=&#39;</span><span style="color:#a3be8c;">axes fraction</span><span>&#39;,
</span><span>                 </span><span style="color:#bf616a;">horizontalalignment</span><span>=&#39;</span><span style="color:#a3be8c;">center</span><span>&#39;, </span><span style="color:#bf616a;">fontsize </span><span>= </span><span style="color:#d08770;">20</span><span>,
</span><span>                 </span><span style="color:#bf616a;">verticalalignment</span><span>=&#39;</span><span style="color:#a3be8c;">bottom</span><span>&#39;, </span><span style="color:#bf616a;">fontname </span><span>= &#39;</span><span style="color:#a3be8c;">monospace</span><span>&#39;,
</span><span>                 </span><span style="color:#bf616a;">arrowprops</span><span>=</span><span style="color:#bf616a;">dict</span><span>(</span><span style="color:#bf616a;">arrowstyle</span><span>=&quot;</span><span style="color:#a3be8c;">simple</span><span>&quot;,
</span><span>                                 </span><span style="color:#bf616a;">fc</span><span>=&quot;</span><span style="color:#a3be8c;">black</span><span>&quot;, </span><span style="color:#bf616a;">ec</span><span>=&quot;</span><span style="color:#a3be8c;">none</span><span>&quot;,
</span><span>                                 </span><span style="color:#bf616a;">patchB</span><span>=el,
</span><span>                                 </span><span style="color:#bf616a;">connectionstyle</span><span>=&quot;</span><span style="color:#a3be8c;">arc3,rad=0.3</span><span>&quot;))
</span><span style="color:#b48ead;">for </span><span>t </span><span style="color:#b48ead;">in </span><span>[t1, t2, t3, t4]:
</span><span>    t.</span><span style="color:#bf616a;">set_path_effects</span><span>([PathEffects.</span><span style="color:#bf616a;">withStroke</span><span>(</span><span style="color:#bf616a;">linewidth</span><span>=</span><span style="color:#d08770;">5</span><span>, </span><span style="color:#bf616a;">foreground</span><span>=&#39;</span><span style="color:#a3be8c;">w</span><span>&#39;, </span><span style="color:#bf616a;">alpha </span><span>= </span><span style="color:#d08770;">0.666</span><span>)])
</span><span>
</span><span>
</span><span>plt.</span><span style="color:#bf616a;">savefig</span><span>(&#39;</span><span style="color:#a3be8c;">map.png</span><span>&#39;, </span><span style="color:#bf616a;">quality </span><span>= </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#bf616a;">bbox_inches </span><span>= &#39;</span><span style="color:#a3be8c;">tight</span><span>&#39;)
</span><span>plt.</span><span style="color:#bf616a;">close</span><span>()
</span></code></pre>
<p>It reads the <abbr title="GPS Exchange Format">GPX</abbr> file, gets the map of
the region from OpenStreeMap, adds coloured points showing the path and some
texts. The result:</p>
<p><a href="https://heitorpb.github.io/bla/swissfarwest/map.png"><img src="https://heitorpb.github.io/bla/swissfarwest/map.png" alt="The coloured points are our hiking path :)" loading="lazy" decoding="async" /></a></p>
<p>The blue points mark the beginning of the hike. And it changes colours all the
way to the green points, marking the end of our 5892.3 meters walk :) As you
can see, we got pretty close to the westernmost Swiss point! For
some reason, my phone lost GPS connection in the beginning, that’s why it’s
missing some blue points.</p>
<hr />
<p>Footnotes:</p>
<ul>
<li><sup class="footnote-reference"><a href="#1">1</a></sup>: <a href="https://osm.org/go/0CFL8Bq5?m=">Latitude: 46.1323565, Longitude: 5.9559113</a></li>
</ul>

        </div>

        
        <div class="pagination">
            <div class="pagination__title">
                <span class="pagination__title-h">Thanks for reading! Read other posts?</span>
                <hr />
            </div>
            <div class="pagination__buttons">
                    <span class="button previous">
                        <a href="https://heitorpb.github.io/bla/lorem/">
                            <span class="button__icon">←</span>&nbsp;
                            <span class="button__text">Mussum Ipsum</span>
                        </a>
                    </span>
                
                
                    <span class="button next">
                        <a href="https://heitorpb.github.io/bla/essertineshiking/">
                            <span class="button__text">Hiking in Essertines - Switzerland</span>&nbsp;
                            <span class="button__icon">→</span>
                        </a>
                    </span>
                </div>
        </div>
    
    </div>

    </div>

    
    <footer class="footer">
        <div class="footer__inner">
                <div class="copyright copyright--user">© 2018 Heitor de Bittencourt</div>
            </div>
    </footer>
    

</div>
</body>

</html>
