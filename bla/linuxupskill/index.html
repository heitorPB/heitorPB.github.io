<!DOCTYPE html>
<html lang="en">

<head>
    <title>Linux Upskill Challenge | Heitor&#x27;s log</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="robots" content="noodp"/>

    <link rel="stylesheet" href="https://heitorpb.github.io/style.css">
    <link rel="stylesheet" href="https://heitorpb.github.io/color/green.css">

        <link rel="stylesheet" href="https://heitorpb.github.io/color/background_dark.css">
    
    <link rel="stylesheet" href="https://heitorpb.github.io/font-hack-subset.css">

            
        <link rel="alternate" type="application/atom+xml" title="RSS" href="https://heitorpb.github.io/atom.xml">
    
<!-- KaTeX css and JS -->
<link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js" integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>

<script defer>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          // customised options
          // ‚Ä¢ auto-render specific keys, e.g.:
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '\\(', right: '\\)', display: false},
          ],
          // ‚Ä¢ rendering keys, e.g.:
          //throwOnError : false
        });
    });
</script>

</head>

<body class="">
<div class="container">
    
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                    
                <a href="https://heitorpb.github.io" style="text-decoration: none;">
                    <div class="logo">
                      
                            Heitor&#x27;s Log
                        
                    </div>
                </a>
            </div>
        </div>

        
        <nav class="menu">
            <ul class="menu__inner">
                <li><a href="https://heitorpb.github.io">Home</a></li>
            
                <li><a href="https://heitorpb.github.io/me">About me</a></li>
            
                <li><a href="https://flickr.com/photos/heitorpb">Photos</a></li>
            
                <li class="active"><a href="https://heitorpb.github.io/bla">Bla</a></li>
            </ul>
        </nav>
    
    
        
    </header>
    

    <div class="content">
        
    <div class="post">
        
    <h1 class="post-title"><a href="https://heitorpb.github.io/bla/linuxupskill/">Linux Upskill Challenge</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            Oct 30, 2020
        </span>

    </div>

    
        <span class="post-tags-inline">
                :: tags:&nbsp;
                <a class="post-tag" href="https://heitorpb.github.io/tags/linux/">#linux</a>&nbsp;
                <a class="post-tag" href="https://heitorpb.github.io/tags/sysadmin/">#sysadmin</a></span>
    

        
        <div class="post-content">
            <p>The Linux Upskill Challenge is a month-long course on Reddit (<a href="https://www.reddit.com/r/linuxupskillchallenge">r/linuxupskillchallenge</a>), about Linux Server Administration.</p>
<p>It is not a formal course, neither gives a certificate to share on social
media. I think this makes the course more valuable, because the people taking
it are doing to learn, and not to brag online.</p>
<p>It is a hands-on course with a lot of extra resources for the curious. Although
I‚Äôve been using GNU/Linux in my personal computer for a long time, I don‚Äôt
consider myself an expert. I know my way around, but I‚Äôve never dug deeper.
This is a nice opportunity to learn more and also use a remote
<abbr title="Virtual Private Server">VPS</abbr> for free. üòé</p>
<h2 id="daily-logs">Daily logs</h2>
<p>Here are some thoughts about each lecture. It is not meant to be a collection of
study notes, as use a different system for that, but a brain dump of random
ideas.</p>
<h3 id="days-0-and-1">Days 0 and 1</h3>
<p>Goal: get a remote server for free and learn how to manage it.</p>
<p>Decided to use Google Cloud Compute, just because. That dashboard is so
chaotic‚Ä¶ The most difficult task of the day was setting up the SSH public key
to log to my new <abbr title="Virtual Machine">VM</abbr>.</p>
<p>SSH keys are awesome. I‚Äôve been using them for a long time for remote access
and they make life way easier. <code>ssh-copy-id</code> command is easier than
<code>cat ~/.ssh/id_rsa.pub | ssh remote_username@server_ip_address &quot;mkdir -p ~/.ssh &amp;&amp; chmod 700 ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys &amp;&amp; chmod 600 ~/.ssh/authorized_keys&quot;</code>,
but for old servers is not an option. The machine I‚Äôm using at my university to
run the simulations for my Master‚Äôs studies did not accept <code>ssh-copy-id</code>‚Ä¶</p>
<h3 id="day-2">Day 2</h3>
<p>Goal: learn to navigate in the machine using only the terminal.</p>
<p>I‚Äôve been using GNU/Linux for more than 10 years, I‚Äôm pretty confident with the
terminal. But there‚Äôs always something new to learn: <code>ls -ltra</code> is a nice
example to find the most recently altered files.</p>
<h3 id="day-3">Day 3</h3>
<p>Goal: get familiar with <code>root</code> things.</p>
<p>Mind blow of the day: I saw lots of attempts to connect to this
<abbr title="Virtual Machine">VM</abbr> in <code>/var/log/auth.log</code> file. Awesome.
Bots everywhere.</p>
<p>I am running ArchLinux on my Raspberry Pi 3, it uses <code>journalctl</code> for the logs:
<code>journalctl /usr/bin/sshd</code>.</p>
<p>It was nice to learn about <code>sudo -i</code>. I‚Äôve been using <code>sudo su -</code> to become
root and is good to know there are other ways to do it as well. The details
about the differences and other comments are explained
<a href="https://askubuntu.com/questions/376199/sudo-su-vs-sudo-i-vs-sudo-bin-bash-when-does-it-matter-which-is-used">here</a>.</p>
<h3 id="day-4">Day 4</h3>
<p>Goal: install stuff, explore the file structure and get familiar with ‚Äúwalking‚Äù
around.</p>
<p><code>man hier</code> blew my mind. Oh, this is awesome. I googled about the filesystem
hierarchy so many times and did not know I already had all the information in
front of me.</p>
<h3 id="day-5">Day 5</h3>
<p>Goal: get familiar with <code>TAB</code>, <code>less</code>, <code>more</code>, and hidden/dot files.</p>
<p>I was never a big fan of <code>more</code>. I normally use <code>less</code> as a pager, because it
allows me to scroll up and down easier, search for a string, jump to a
position, and quite fast for huge files.</p>
<p>The <code>history</code> command is nice. I know about it and never used directly. I
prefer to <code>ctrl + r</code> and a trick to use the Up/Down arrows to use the text that
has already been typed as the prefix for searching commands. Only works with
Bash, though. Check <code>readline</code> on
<a href="https://wiki.archlinux.org/index.php/Readline#History">ArchWiki</a> for more
details.</p>
<h3 id="day-6">Day 6</h3>
<p>Goal: learn <code>Vim</code> and how to exit it.</p>
<p>I‚Äôve been using Vim for quite a long time. I use it for almost everything
related to text: coding, writing my Master‚Äôs Thesis, writing TODO lists,
writing these notes, and probably other things I can‚Äôt remember now. And
despite those years of usage, every week I learn something new about it.
Learning Vim is a hard task, but definitely worth it.</p>
<p>I started the <code>vimtutor</code> but never finished it. So many times. They say it
takes about half an hour to go through it, I‚Äôll try to do it (again). Actually,
I‚Äôll try <code>neovim</code>‚Äôs tutorial (<code>:Tutor&lt;Enter&gt;</code>).</p>
<p>The insane new thing about Vim that I learned today is that it has seven (!)
basic modes:</p>
<ul>
<li>Normal mode</li>
<li>Visual mode</li>
<li>Select mode</li>
<li>Insert mode</li>
<li>Command-line mode (or Cmdline mode)</li>
<li>Ex mode</li>
<li>Terminal-Job mode</li>
</ul>
<p>And then there are seven <em>additional</em> modes:</p>
<ul>
<li>Operator-pending mode</li>
<li>Replace mode</li>
<li>Virtual Replace mode</li>
<li>Insert Normal mode</li>
<li>Terminal-Normal mode</li>
<li>Insert Visual mode</li>
<li>Insert Select mode</li>
</ul>
<p>You can read more about them with the internal help: <code>:help vim-modes</code>.
Curiously, <code>neovim</code> has one fewer additional mode (at least as of <code>nvim 0.4.4</code>).</p>
<h3 id="day-7">Day 7</h3>
<p>Goal: install a web server and use it to host a page.</p>
<p>The instructions are for Apache2, a.k.a. <code>httpd</code>, but I decided to use Caddy
instead. I‚Äôm curious about it‚Äôs automatic conversion from Markdown to HTML.</p>
<p>I got the binary from the <a href="https://caddyserver.com/download">Download page</a> and
followed the official documentation to install it, creating a <code>systemd</code> service
file.</p>
<p>I am using this <code>Caddyfile</code> to serve a static-website:</p>
<pre data-lang="html" style="background-color:#2b303b;color:#c0c5ce;" class="language-html "><code class="language-html" data-lang="html"><span>:80 {
</span><span>	root * /var/lib/caddy/www/
</span><span>	encode zstd gzip
</span><span>	templates
</span><span>	file_server
</span><span>}
</span></code></pre>
<p>And my <code>/var/lib/caddy/www/index.html</code> is a very complex one:</p>
<pre data-lang="html" style="background-color:#2b303b;color:#c0c5ce;" class="language-html "><code class="language-html" data-lang="html"><span>{ { include &quot;index.md&quot; | markdown }}
</span></code></pre>
<h4 id="afterthoughts">Afterthoughts</h4>
<p>I should just follow the course. Lets play with Apache2. It is also simple, for
some reason I expected it to be a quite complex to set up. On the other hand, I
need to write html instead of Markdown :( but I can have a nice text only web
page using only one tag:</p>
<pre data-lang="html" style="background-color:#2b303b;color:#c0c5ce;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#bf616a;">pre</span><span>&gt;
</span><span># Title
</span><span>
</span><span>## Section
</span><span>
</span><span>bla
</span></code></pre>
<h3 id="day-8">Day 8</h3>
<p>Goal: search for specific patterns in text files.</p>
<p>The Apache2 logs are in <code>/var/log/apache2</code>. To get all IP addresses that
connected to Apache:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">$</span><span> sed</span><span style="color:#bf616a;"> -E </span><span>&#39;</span><span style="color:#a3be8c;">s/ (.*)//g</span><span>&#39; access.log | </span><span style="color:#bf616a;">sort -n </span><span>| </span><span style="color:#bf616a;">uniq
</span><span style="color:#bf616a;">27.123.241.20
</span><span style="color:#bf616a;">45.148.121.28
</span><span style="color:#bf616a;">45.148.121.85
</span><span style="color:#bf616a;">54.93.196.88
</span><span style="color:#bf616a;">62.33.138.6
</span><span style="color:#bf616a;">66.249.75.147
</span><span style="color:#bf616a;">66.249.75.149
</span><span style="color:#bf616a;">74.120.14.52
</span><span style="color:#bf616a;">75.76.251.71
</span><span style="color:#bf616a;">91.193.5.58
</span><span style="color:#bf616a;">92.118.160.17
</span><span style="color:#bf616a;">99.10.249.153
</span><span style="color:#bf616a;">103.49.188.166
</span><span style="color:#bf616a;">116.28.214.153
</span><span style="color:#bf616a;">125.41.10.86
</span><span style="color:#bf616a;">125.43.93.10
</span><span style="color:#bf616a;">125.47.64.145
</span><span style="color:#bf616a;">139.162.119.197
</span><span style="color:#bf616a;">142.118.76.99
</span><span style="color:#bf616a;">173.174.64.235
</span><span style="color:#bf616a;">174.51.18.48
</span><span style="color:#bf616a;">177.76.230.216
</span><span style="color:#bf616a;">179.99.69.186
</span><span style="color:#bf616a;">186.71.77.9
</span><span style="color:#bf616a;">192.241.239.84
</span><span style="color:#bf616a;">193.118.53.210
</span><span style="color:#bf616a;">194.87.138.60
</span><span style="color:#bf616a;">209.126.3.185
</span><span style="color:#bf616a;">209.17.97.34
</span></code></pre>
<p>Grepping <code>/var/log/auth.log</code> I can see 72 different IPs trying to log as
<code>root</code> and 10 other random users. Hahah, nice.</p>
<p>I liked to know that <code>cut</code> can also remove words from a string, I finally got
what the <code>--fields</code> option mean.</p>
<h3 id="day-9">Day 9</h3>
<p>Goal: First look at network security.</p>
<p>The first task is to find open ports. I‚Äôve used <code>nmap</code> for that before and
let‚Äôs see what happens, when running it on the remote server:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">$</span><span> nmap localhost
</span><span style="color:#bf616a;">Starting</span><span> Nmap 7.80 ( https://nmap.org ) </span><span style="color:#bf616a;">at</span><span> 2020-10-15 11:32</span><span style="color:#bf616a;"> -03
</span><span style="color:#bf616a;">Nmap</span><span> scan report for localhost (127.0.0.1)
</span><span style="color:#bf616a;">Host</span><span> is up (0.000086s latency)</span><span style="color:#96b5b4;">.
</span><span style="color:#bf616a;">Not</span><span> shown: 998 closed ports
</span><span style="color:#bf616a;">PORT</span><span>   STATE SERVICE
</span><span style="color:#bf616a;">22/tcp</span><span> open  ssh
</span><span style="color:#bf616a;">80/tcp</span><span> open  http
</span><span>
</span><span style="color:#bf616a;">Nmap</span><span> done: 1 IP address (1 host up) </span><span style="color:#bf616a;">scanned</span><span> in 0.07 seconds
</span></code></pre>
<p>Nice, it can see <code>ssh</code> and something for <code>http</code>, that is <code>apache2</code> on port <code>80</code>
here. But it is interesting how different it is from my laptop:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">$</span><span> nmap 35.228.166.73
</span><span style="color:#bf616a;">Starting</span><span> Nmap 7.80 ( https://nmap.org ) </span><span style="color:#bf616a;">at</span><span> 2020-10-15 11:32</span><span style="color:#bf616a;"> -03
</span><span style="color:#bf616a;">Nmap</span><span> scan report for 73.166.228.35.bc.googleusercontent.com (35.228.166.73)
</span><span style="color:#bf616a;">Host</span><span> is up (0.25s latency)</span><span style="color:#96b5b4;">.
</span><span style="color:#bf616a;">Not</span><span> shown: 995 closed ports
</span><span style="color:#bf616a;">PORT</span><span>     STATE    SERVICE
</span><span style="color:#bf616a;">19/tcp</span><span>   filtered chargen
</span><span style="color:#bf616a;">22/tcp</span><span>   open     ssh
</span><span style="color:#bf616a;">25/tcp</span><span>   filtered smtp
</span><span style="color:#bf616a;">80/tcp</span><span>   open     http
</span><span style="color:#bf616a;">5555/tcp</span><span> filtered freeciv
</span><span>
</span><span style="color:#bf616a;">Nmap</span><span> done: 1 IP address (1 host up) </span><span style="color:#bf616a;">scanned</span><span> in 23.00 seconds
</span></code></pre>
<p>It finds three other <code>filtered</code> services. The manual says:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>The state is either open, filtered, closed, or unfiltered. Open means that
</span><span>an application on the target machine is listening for connections/packets
</span><span>on that port. Filtered means that a firewall, filter, or other network
</span><span>obstacle is blocking the port so that Nmap cannot tell whether it is open
</span><span>or closed.
</span></code></pre>
<p>So, those ports might be or might not be open.</p>
<p>I tried to host something at those ports and could not get a connection from my
laptop, so they are blocked by Google by default and there‚Äôs nothing (?) I can
do. I can use all other ports though.</p>
<p>I‚Äôve never used <a href="https://launchpad.net/ufw">ufw</a> before. It is time to learn
how to properly use a firewall and this one is simple and powerful enough,
although it uses <code>iptables</code> and not the ‚Äúmodern‚Äù <code>nftables</code>. I liked how simple
it is to allow or deny traffic in a port. But I can‚Äôt compare with other tools.</p>
<p>Changing my SSH port to a random number. I thought it was a bit pointless, but
apparently it
<a href="https://web.archive.org/web/20201013122112/https://danielmiessler.com/blog/no-moving-your-ssh-port-isnt-security-by-obscurity/">is not</a>.
Using <code>nmap</code>, it shows the port open, but with <code>unknown</code> as the service. Sounds
good.</p>
<h3 id="day-10">Day 10</h3>
<p>Goal: run stuff periodically with <code>cron</code> jobs.</p>
<p>Lazy people automate stuff :)</p>
<p><code>systemd</code> can also run jobs at specific times, using <code>systemd/timers</code>.</p>
<p>A fun cron job to add is to periodically change the SSH banner:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">$</span><span> cat /etc/cron.hourly/banner
</span><span style="color:#65737e;">#!/bin/sh
</span><span>
</span><span style="color:#bf616a;">/usr/games/fortune </span><span>| </span><span style="color:#bf616a;">/usr/games/cowsay </span><span>&gt; /etc/banner.txt
</span></code></pre>
<h3 id="day-11">Day 11</h3>
<p>Goal: searching for files and patterns.</p>
<p>I‚Äôve been using blindly <code>find</code> for quite a while. It was time to finally read
it‚Äôs manual. There‚Äôs more to it than <code>find . -iname &quot;bla*&quot;</code>.</p>
<p><code>zcat</code>, <code>zgrep</code>, <code>zless</code>, and <code>zmore</code> are awesome! Did not know I could
<code>cat</code>/<code>less</code>/<code>grep</code> gzip compressed files.</p>
<h3 id="day-12">Day 12</h3>
<p>Goal: copy stuff around.</p>
<p>I like <code>rsync</code> to copy lots of small files (actually, also big and medium ones)
as it can create a ‚Äústream‚Äù of data instead of one new connection for each
file. It can also compress the files as it sends to the destination. This can
save <em>a lot</em> of time. I normally use <code>rsync -azvP src dst</code> meaning <code>rsync --archive --compress --verbose --partial --progress src dst</code>. Sometimes the
<code>-P</code> flag can be annoying, but YMMV.</p>
<p>Something funny I found out is that <code>rsync</code> shows the SSH banner of the remote
server:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">$</span><span> rsync</span><span style="color:#bf616a;"> -avz</span><span> linuxUpskill-gc:/var/www/html .
</span><span> </span><span style="color:#bf616a;">_________________________________________
</span><span> </span><span style="color:#bf616a;">/</span><span> Be free and open and breezy! Enjoy!     \
</span><span> | </span><span style="color:#bf616a;">Things</span><span> won&#39;</span><span style="color:#a3be8c;">t get any better so get used |
</span><span style="color:#a3be8c;"> \ to it.                                  /
</span><span style="color:#a3be8c;">  -----------------------------------------
</span><span style="color:#a3be8c;">          \   ^__^
</span><span style="color:#a3be8c;">           \  (oo)\_______
</span><span style="color:#a3be8c;">              (__)\       )\/\
</span><span style="color:#a3be8c;">                  ||----w |
</span><span style="color:#a3be8c;">                  ||     ||
</span><span style="color:#a3be8c;">receiving incremental file list
</span><span style="color:#a3be8c;">html/
</span><span style="color:#a3be8c;">html/404.html
</span><span style="color:#a3be8c;">html/index.html
</span><span style="color:#a3be8c;">html/robots.txt
</span><span style="color:#a3be8c;">
</span><span style="color:#a3be8c;">sent 104 bytes  received 3,710 bytes  693.45 bytes/sec
</span><span style="color:#a3be8c;">total size is 11,324  speedup is 2.97
</span></code></pre>
<h3 id="day-13">Day 13</h3>
<p>Goal: familiarize with the Linux permission system.</p>
<p>It is way simpler to use <code>u+w</code> or <code>o-rwx</code> than playing around with octal
numbers for <code>chmod</code>. I didn‚Äôt know I could change the permission to more than
one letter of <em>ugo</em>, as in <code>chmod go-wr [files]</code>, it never occurred to me to
try that either.</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">$</span><span> echo bla, blabla &gt; file.txt
</span><span style="color:#bf616a;">$</span><span> ls</span><span style="color:#bf616a;"> -la</span><span> file.txt
</span><span style="color:#bf616a;">-rw-rw-r--</span><span> 1 user user 12 Oct 21 12:11 file.txt
</span><span style="color:#bf616a;">$</span><span> chmod ug-w file.txt
</span><span style="color:#bf616a;">$</span><span> ls</span><span style="color:#bf616a;"> -la</span><span> file.txt
</span><span style="color:#bf616a;">-r--r--r--</span><span> 1 user user 12 Oct 21 12:11 file.txt
</span><span style="color:#bf616a;">$</span><span> echo hehe &gt;&gt; file.txt
</span><span style="color:#bf616a;">-bash:</span><span> file.txt: Permission denied
</span></code></pre>
<h3 id="day-14">Day 14</h3>
<p>Goal: user management and permissions.</p>
<p>I always confuse <code>useradd</code> and <code>adduser</code>, after all they are anagrams.
<a href="https://serverfault.com/questions/218993/whats-the-difference-between-useradd-and-adduser">This ServerFault</a>
question has a nice answer about it:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>adduser is a friendlier interactive frontend to useradd
</span></code></pre>
<p>I found out it is possible to enable offensive messages when an user type an
incorrect password when <code>sudo</code>ing. Just add <code>Defaults	insults</code> to
<code>/etc/sudoers</code>, obviously using <code>visudo</code>.</p>
<p>Nice to know that it is possible to enable specific commands for a user to run
with <code>sudo</code> without granting full <code>sudo</code>, like:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">fred</span><span>    ALL = NOPASSWD:/sbin/reboot
</span><span style="color:#bf616a;">fred</span><span>    ALL = NOPASSWD:/usr/bin/ls
</span></code></pre>
<p>This allows user <code>fred</code> to <code>sudo ls</code> and <code>sudo reboot</code>, without typing the
password, but does not allow any other command with <code>sudo</code>.</p>
<h3 id="day-15">Day 15</h3>
<p>Goal: package management, with <code>apt</code>.</p>
<p>I used a few different package managers before:</p>
<ul>
<li><code>synaptic</code> (when I used Kurumin, back then)</li>
<li><code>apt-get</code> (when I switched to Ubuntu)</li>
<li><code>portage</code> (when I used Gentoo)</li>
<li><code>apt-get</code> (again, briefly, when I used Debian in 2011)</li>
<li><code>pacman</code> (when I switched to ArchLinux)</li>
</ul>
<p>I wish I remember the first time I tried Kurumin, but I don‚Äôt. I think I
compiled Gentoo in 2008, I‚Äôm not sure. But I remember how fast my computer
became. It was an AMD 32-bit single-core CPU, 1.2 GHz, 384 MiB RAM DDR, GeForce
4 MM 440, with hand soldered electrolytic capacitors in the motherboard
(because they overheated and needed to be replaced). This computer was bought
in ~2000, and when I finally managed to have a working Kernel, it needed ~12
seconds to fully boot! It had a very slow hard drive, slow RAM, slow CPU, and
still was insanely fast! How I miss Gentoo‚Ä¶</p>
<p>ArchWiki has a <a href="https://wiki.archlinux.org/index.php/Pacman/Rosetta">Rosetta</a>
page, that ‚Äútranslates‚Äù commands from one package manager to other. It is a
nice reference when dealing with different systems.</p>
<h3 id="day-16">Day 16</h3>
<p>Goal: managing tape archives, a.k.a <em>tarballs</em>.</p>
<p>Vim is always surprising me. Today I learned you can open file archives in Vim.
It is possible to open <code>.zip</code>, <code>.tar.gz</code>, <code>.tar.bz</code>, etc., and even modify its
content on the fly. No need to extract, edit, archive again.</p>
<p>I have a <code>targz</code> function in one of my dotfiles to create an archive of a bunch
of files or a directory. It‚Äôs time to get rid of it and learn how to properly
use <code>tar</code> and <code>gzip</code>/<code>bzip</code>.</p>
<h3 id="day-17">Day 17</h3>
<p>Goal: compiling stuff.</p>
<p>I liked to <code>./configure</code> <code>nmap</code>:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">$</span><span> CFLAGS=&quot;</span><span style="color:#a3be8c;">-O2 -march=native</span><span>&quot; CXXFLAGS=&quot;</span><span style="color:#a3be8c;">-O2 -march=native</span><span>&quot; ./configure
</span><span style="color:#65737e;"># skipping lots of lines...
</span><span>            </span><span style="color:#96b5b4;">.</span><span>       .
</span><span>            </span><span style="color:#96b5b4;">\`</span><span style="color:#bf616a;">-</span><span>&quot;</span><span style="color:#a3be8c;">&#39;</span><span>&quot;</span><span style="color:#bf616a;">-</span><span>&#39;</span><span style="color:#a3be8c;">/
</span><span style="color:#a3be8c;">             } 6 6 {
</span><span style="color:#a3be8c;">            ==. Y ,==
</span><span style="color:#a3be8c;">              /^^^\  .
</span><span style="color:#a3be8c;">             /     \  )  Ncat: A modern interpretation of classic Netcat
</span><span style="color:#a3be8c;">            (  )-(  )/
</span><span style="color:#a3be8c;">            -&quot;&quot;---&quot;&quot;---   /
</span><span style="color:#a3be8c;">           /   Ncat    \_/
</span><span style="color:#a3be8c;">          (     ____
</span><span style="color:#a3be8c;">           \_.=|____E
</span><span style="color:#a3be8c;">Configuration complete.
</span><span style="color:#a3be8c;">   (  )   /\   _                 (
</span><span style="color:#a3be8c;">    \ |  (  \ ( \.(               )                      _____
</span><span style="color:#a3be8c;">  \  \ \  `  `   ) \             (  ___                 / _   \
</span><span style="color:#a3be8c;"> (_`    \+   . x  ( .\            \/   \____-----------/ (o)   \_
</span><span style="color:#a3be8c;">- .-               \+  ;          (  O                           \____
</span><span style="color:#a3be8c;">(__                +- .( -</span><span>&#39;</span><span style="color:#bf616a;">.- </span><span>&lt;.   </span><span style="color:#96b5b4;">\_</span><span>____________  `              </span><span style="color:#96b5b4;">\  </span><span style="color:#bf616a;">/
</span><span>(</span><span style="color:#bf616a;">_____</span><span>            ._._: &lt;_ - &lt;- _- _  VVVVVVV VV V</span><span style="color:#96b5b4;">\                \/
</span><span>  </span><span style="color:#96b5b4;">.</span><span>    /./.+-  . .- /  +--  - .    (--_AAAAAAA__A_/                |
</span><span>  (</span><span style="color:#bf616a;">__ </span><span>&#39;</span><span style="color:#a3be8c;"> /x  / x _/ (                \______________//_              \_______
</span><span style="color:#a3be8c;"> , x / ( </span><span>&#39;  . / .  /                                  </span><span style="color:#96b5b4;">\_</span><span>__&#39;</span><span style="color:#a3be8c;">          \     /
</span><span style="color:#a3be8c;">    /  /  _/ /    +                                       |           \   /
</span><span style="color:#a3be8c;">   </span><span>&#39;  (__/                                               /              </span><span style="color:#96b5b4;">\/
</span><span>                                                       </span><span style="color:#bf616a;">/                  </span><span>\
</span><span>  NMAP IS A POWERFUL TOOL -- USE CAREFULLY AND RESPONSIBLY
</span></code></pre>
<p>Cool ASCII art!</p>
<h3 id="day-18">Day 18</h3>
<p>Goal: cleaning-up old logs.</p>
<p>Logs can save your system. If there‚Äôs a weird behaviour somewhere, the first
thing to check is the logs. But logs can also flood your system. In fact, this
was what crashed some servers I was responsible for at my job and it was not
nice. I wrote about that incident and how to tame Docker logs
[here]({% post_url 2020-09-13-careful_with_docker_logs %}).</p>
<p>In <code>/etc/cron.daily/logrotate</code> there‚Äôs a line that checks if there are any
<code>systemd/timers</code>, if so, <code>cron</code> does nothing and let <code>systemd</code> do the job.
That‚Äôs clever. The timer is configured in
<code>/etc/systemd/system/timers.target.wants/logrotate.timer</code>.</p>
<p><code>logrotate</code>‚Äôs log file is in a different path: <code>/var/lib/logrotate/status</code>.
That‚Äôs funny!</p>
<h3 id="day-19">Day 19</h3>
<p>Goal: overview of the Linux Virtual File System.</p>
<p>Inodes. Inodes everywhere. If I got it correctly, an inode is a bunch of
information about the file/directory. It contains filename, file owner, file
permissions, creation/modification times, where the file is on disk, and maybe
more. So, it is metadata.</p>
<p>To find a file by it‚Äôs inode number, you have to scan to entire filesystem. The
inode number is per filesystem, so there might be more than one file with the
same number. To locate a file by its inode number, without traversing to a
different filesystem:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">$</span><span> sudo find /</span><span style="color:#bf616a;"> -mount -inum</span><span> 1
</span><span style="color:#bf616a;">/sys
</span><span style="color:#bf616a;">/boot/efi
</span><span style="color:#bf616a;">/proc
</span><span>
</span><span style="color:#bf616a;">$</span><span> stat /sys /boot/efi /proc
</span><span>  </span><span style="color:#bf616a;">File:</span><span> /sys
</span><span>  </span><span style="color:#bf616a;">Size:</span><span> 0               Blocks: 0          IO Block: 4096   directory
</span><span style="color:#bf616a;">Device:</span><span> 18h/24d Inode: 1           Links: 13
</span><span style="color:#bf616a;">Access:</span><span> (0555/dr-xr-xr-x)  </span><span style="color:#bf616a;">Uid:</span><span> (    0/    root)   </span><span style="color:#bf616a;">Gid:</span><span> (    0/    root)
</span><span style="color:#bf616a;">Access:</span><span> 2020-10-22 18:38:03.292000000</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Modify:</span><span> 2020-10-22 18:38:03.292000000</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Change:</span><span> 2020-10-22 18:38:03.292000000</span><span style="color:#bf616a;"> -0300
</span><span> </span><span style="color:#bf616a;">Birth:</span><span> -
</span><span>  </span><span style="color:#bf616a;">File:</span><span> /boot/efi
</span><span>  </span><span style="color:#bf616a;">Size:</span><span> 512             Blocks: 1          IO Block: 512    directory
</span><span style="color:#bf616a;">Device:</span><span> 80fh/2063d      Inode: 1           Links: 4
</span><span style="color:#bf616a;">Access:</span><span> (0755/drwxr-xr-x)  </span><span style="color:#bf616a;">Uid:</span><span> (    0/    root)   </span><span style="color:#bf616a;">Gid:</span><span> (    0/    root)
</span><span style="color:#bf616a;">Access:</span><span> 1969-12-31 21:00:00.000000000</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Modify:</span><span> 1969-12-31 21:00:00.000000000</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Change:</span><span> 1969-12-31 21:00:00.000000000</span><span style="color:#bf616a;"> -0300
</span><span> </span><span style="color:#bf616a;">Birth:</span><span> -
</span><span>  </span><span style="color:#bf616a;">File:</span><span> /proc
</span><span>  </span><span style="color:#bf616a;">Size:</span><span> 0               Blocks: 0          IO Block: 1024   directory
</span><span style="color:#bf616a;">Device:</span><span> 5h/5d   Inode: 1           Links: 120
</span><span style="color:#bf616a;">Access:</span><span> (0555/dr-xr-xr-x)  </span><span style="color:#bf616a;">Uid:</span><span> (    0/    root)   </span><span style="color:#bf616a;">Gid:</span><span> (    0/    root)
</span><span style="color:#bf616a;">Access:</span><span> 2020-10-22 18:38:01.390534452</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Modify:</span><span> 2020-10-22 18:38:01.390534452</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Change:</span><span> 2020-10-22 18:38:01.390534452</span><span style="color:#bf616a;"> -0300
</span><span> </span><span style="color:#bf616a;">Birth:</span><span> -
</span></code></pre>
<p>I just found out, empirically, that there‚Äôs no file with inode 0. This number
is reserved.</p>
<p>I think I finally got the difference between a <em>hard</em> and <em>soft</em> link. But I am
definitely not sure about it. The following copy-pasta blob from a terminal
might shred some light on it:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">$</span><span> ls &gt; /tmp/bla.txt
</span><span style="color:#bf616a;">$</span><span> ln /tmp/bla.txt link_hard
</span><span style="color:#bf616a;">$</span><span> ln</span><span style="color:#bf616a;"> -s</span><span> /tmp/bla.txt link_soft
</span><span style="color:#bf616a;">$</span><span> stat /tmp/bla.txt link_hard link_soft
</span><span>  </span><span style="color:#bf616a;">File:</span><span> /tmp/bla.txt
</span><span>  </span><span style="color:#bf616a;">Size:</span><span> 82              Blocks: 8          IO Block: 4096   regular file
</span><span style="color:#bf616a;">Device:</span><span> 801h/2049d      Inode: 3122        Links: 2
</span><span style="color:#bf616a;">Access:</span><span> (0664/-rw-rw-r--)  </span><span style="color:#bf616a;">Uid:</span><span> ( 1001/       h)   </span><span style="color:#bf616a;">Gid:</span><span> ( 1002/       h)
</span><span style="color:#bf616a;">Access:</span><span> 2020-10-29 16:13:43.003122821</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Modify:</span><span> 2020-10-29 16:13:43.003122821</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Change:</span><span> 2020-10-29 16:13:55.123855608</span><span style="color:#bf616a;"> -0300
</span><span> </span><span style="color:#bf616a;">Birth:</span><span> -
</span><span>  </span><span style="color:#bf616a;">File:</span><span> link_hard
</span><span>  </span><span style="color:#bf616a;">Size:</span><span> 82              Blocks: 8          IO Block: 4096   regular file
</span><span style="color:#bf616a;">Device:</span><span> 801h/2049d      Inode: 3122        Links: 2
</span><span style="color:#bf616a;">Access:</span><span> (0664/-rw-rw-r--)  </span><span style="color:#bf616a;">Uid:</span><span> ( 1001/       h)   </span><span style="color:#bf616a;">Gid:</span><span> ( 1002/       h)
</span><span style="color:#bf616a;">Access:</span><span> 2020-10-29 16:13:43.003122821</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Modify:</span><span> 2020-10-29 16:13:43.003122821</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Change:</span><span> 2020-10-29 16:13:55.123855608</span><span style="color:#bf616a;"> -0300
</span><span> </span><span style="color:#bf616a;">Birth:</span><span> -
</span><span>  </span><span style="color:#bf616a;">File:</span><span> link_soft -&gt; /tmp/bla.txt
</span><span>  </span><span style="color:#bf616a;">Size:</span><span> 12              Blocks: 0          IO Block: 4096   symbolic link
</span><span style="color:#bf616a;">Device:</span><span> 801h/2049d      Inode: 292697      Links: 1
</span><span style="color:#bf616a;">Access:</span><span> (0777/lrwxrwxrwx)  </span><span style="color:#bf616a;">Uid:</span><span> ( 1001/       h)   </span><span style="color:#bf616a;">Gid:</span><span> ( 1002/       h)
</span><span style="color:#bf616a;">Access:</span><span> 2020-10-29 16:14:14.681037964</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Modify:</span><span> 2020-10-29 16:14:03.624369542</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Change:</span><span> 2020-10-29 16:14:03.624369542</span><span style="color:#bf616a;"> -0300
</span><span> </span><span style="color:#bf616a;">Birth:</span><span> -
</span><span>
</span><span style="color:#bf616a;">$</span><span> mv /tmp/bla.txt /tmp/bla2.txt
</span><span style="color:#bf616a;">$</span><span> stat /tmp/bla2.txt link_hard link_soft
</span><span>  </span><span style="color:#bf616a;">File:</span><span> /tmp/bla2.txt
</span><span>  </span><span style="color:#bf616a;">Size:</span><span> 82              Blocks: 8          IO Block: 4096   regular file
</span><span style="color:#bf616a;">Device:</span><span> 801h/2049d      Inode: 3122        Links: 2
</span><span style="color:#bf616a;">Access:</span><span> (0664/-rw-rw-r--)  </span><span style="color:#bf616a;">Uid:</span><span> ( 1001/       h)   </span><span style="color:#bf616a;">Gid:</span><span> ( 1002/       h)
</span><span style="color:#bf616a;">Access:</span><span> 2020-10-29 16:31:42.488385936</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Modify:</span><span> 2020-10-29 16:13:43.003122821</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Change:</span><span> 2020-10-29 16:31:39.232189075</span><span style="color:#bf616a;"> -0300
</span><span> </span><span style="color:#bf616a;">Birth:</span><span> -
</span><span>  </span><span style="color:#bf616a;">File:</span><span> link_hard
</span><span>  </span><span style="color:#bf616a;">Size:</span><span> 82              Blocks: 8          IO Block: 4096   regular file
</span><span style="color:#bf616a;">Device:</span><span> 801h/2049d      Inode: 3122        Links: 2
</span><span style="color:#bf616a;">Access:</span><span> (0664/-rw-rw-r--)  </span><span style="color:#bf616a;">Uid:</span><span> ( 1001/       h)   </span><span style="color:#bf616a;">Gid:</span><span> ( 1002/       h)
</span><span style="color:#bf616a;">Access:</span><span> 2020-10-29 16:13:43.003122821</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Modify:</span><span> 2020-10-29 16:13:43.003122821</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Change:</span><span> 2020-10-29 16:14:38.554481313</span><span style="color:#bf616a;"> -0300
</span><span> </span><span style="color:#bf616a;">Birth:</span><span> -
</span><span>  </span><span style="color:#bf616a;">File:</span><span> link_soft -&gt; /tmp/bla.txt
</span><span>  </span><span style="color:#bf616a;">Size:</span><span> 12              Blocks: 0          IO Block: 4096   symbolic link
</span><span style="color:#bf616a;">Device:</span><span> 801h/2049d      Inode: 292697      Links: 1
</span><span style="color:#bf616a;">Access:</span><span> (0777/lrwxrwxrwx)  </span><span style="color:#bf616a;">Uid:</span><span> ( 1001/       h)   </span><span style="color:#bf616a;">Gid:</span><span> ( 1002/       h)
</span><span style="color:#bf616a;">Access:</span><span> 2020-10-29 16:14:14.681037964</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Modify:</span><span> 2020-10-29 16:14:03.624369542</span><span style="color:#bf616a;"> -0300
</span><span style="color:#bf616a;">Change:</span><span> 2020-10-29 16:14:03.624369542</span><span style="color:#bf616a;"> -0300
</span><span> </span><span style="color:#bf616a;">Birth:</span><span> -
</span><span>
</span><span style="color:#bf616a;">$</span><span> file link_*
</span><span style="color:#bf616a;">link_hard:</span><span> ASCII text
</span><span style="color:#bf616a;">link_soft:</span><span> broken symbolic link to /tmp/bla.txt
</span></code></pre>
<h3 id="day-20">Day 20</h3>
<p>Goal: ultimate laziness with scripts.</p>
<p>This is the last lesson of the Linux Upskill Challenge.</p>
<p>Scripting is an endless topic. As Bilbo would say, <em>You start with a shebang,
and if you don‚Äôt keep your feet, there is no knowing where you might be swept
off to.</em> This is a very powerful tool, but without paying attention to all
details, a mistake can be the Destroyer of All Servers. Powerful, efficient,
and simple.</p>
<h2 id="conclusions">Conclusions</h2>
<p>I joined this course hoping I‚Äôd learn more about managing a server, in
particular to improve my backup strategy. I ended up learning a lot more than I
expected, not only about a <abbr title="Virtual Private Server">VPS</abbr> but
also general Linux-related stuff.</p>
<p>It did not ‚Äúconsume‚Äù much time daily, it was very pleasant and time efficient.
I liked how small, yet complete, each lecture was, and it was up to the learner
to dig deeper as it pleased.</p>
<p>This course was totally worth it.</p>
<p>I have some final thoughts that don‚Äôt belong to any specific daily log, but are
still relevant.</p>
<p>Never get a <abbr title="Virtual Private Server">VPS</abbr> on the other side
of the world, if possible. I decided to get one in Finland (because, why not?)
and I can feel the latency to type any commands in the terminal. I can type
normally, it is not that slow. But the typing latency is there. I can‚Äôt measure
it, but I can feel it. The average <code>ping</code> to this server is 297 ms, versus 19
ms for a server in Brazil (same country as I am now). 300 ms is definitely
something we can note, but it is not a problem for what I was doing.</p>
<p>It doesn‚Äôt matter how long ago you started using Vim (or Neovim), take some
time to go through <code>vim-tutor</code>. It takes about half an hour and it covers much
more than the basic usage. There are some great small new things to learn
there.</p>
<p>I recommend this course for anyone that wants to learn more about Linux, even if
you are not planning to be a sysadmin. The lessons are very well written and
there are many good tips to help a casual Linux user.</p>

        </div>

        
        <div class="pagination">
            <div class="pagination__title">
                <span class="pagination__title-h">Thanks for reading! Read other posts?</span>
                <hr />
            </div>
            <div class="pagination__buttons">
                    <span class="button previous">
                        <a href="https://heitorpb.github.io/bla/rasp3-pihole/">
                            <span class="button__icon">‚Üê</span>&nbsp;
                            <span class="button__text">Setting up Raspberry Pi 3 with PiHole</span>
                        </a>
                    </span>
                
                
                    <span class="button next">
                        <a href="https://heitorpb.github.io/bla/pihole-dnsmasq/">
                            <span class="button__text">My thoughts on PiHole</span>&nbsp;
                            <span class="button__icon">‚Üí</span>
                        </a>
                    </span>
                </div>
        </div>
    
    </div>

    </div>

    
    <footer class="footer">
        <div class="footer__inner">
                <div class="copyright copyright--user">¬© 2018 Heitor de Bittencourt</div>
            </div>
    </footer>
    

</div>
</body>

</html>
