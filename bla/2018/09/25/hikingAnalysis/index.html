<!DOCTYPE html>
<html lang="en">

	<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

	<!-- custom css AFTER bootstrap -->
	<link href="https://fonts.googleapis.com/css?family=Noto+Serif&amp;subset=greek-ext,latin-ext" rel="stylesheet">
	<link rel="stylesheet" href="/assets/css/cover.css">
	<link rel="stylesheet" href="/assets/css/monokai.css">

	<link rel="icon" type="image/png" href="/assets/favicon.png">
	<title>The Swiss Far West and GPX fun</title>
	<meta name="description" content="">

	<!-- Facebook/Twitter/SEO -->
	<meta property="og:title" content="The Swiss Far West and GPX fun"/>
	<meta property="og:image" content="https://heitorpb.github.io/bla/2018/09/25/hikingAnalysis/map.png"/>
	<meta property="og:url" content="https://heitorpb.github.io/bla/2018/09/25/hikingAnalysis/"/>
	<meta property="og:type" content="article">
	<meta property="og:site_name" content="Heitor's log"/>
	<meta property="og:description" content="Yeaah"/>

	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="">
	<meta name="twitter:title" content="The Swiss Far West and GPX fun" />
	<meta name="twitter:image" content="https://heitorpb.github.io/bla/2018/09/25/hikingAnalysis/map.png" />
	<meta name="twitter:url" content="https://heitorpb.github.io/bla/2018/09/25/hikingAnalysis/" />
	<meta name="twitter:description" content="Yeaah" />

	<link rel="sitemap" type="application/xml" title="Sitemap" href="https://heitorpb.github.io/sitemap.xml" />
	<link rel="alternate" type="application/rss+xml" href="https://heitorpb.github.io/feed.xml">
</head>


	<body>
		<div id="wrapper">

			<div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
	<header class="masthead mb-auto">
		<div class="inner">
			<h3 class="masthead-brand">Heitor&#39;s log</h3>
			<nav class="nav nav-masthead justify-content-center">
				<a class="nav-link "    href="/"             >Home</a>
				<a class="nav-link "       href="/me.html"      >Me</a>
				<a class="nav-link " href="/projects.html">Projects</a>
				<a class="nav-link active"     href="/bla/"         >Bla</a>
			</nav>
		</div>
	</header>


			<main role="main" class="inner cover">
				<br>
				<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
	<header class="post-header">
		<h1 class="post-title p-name" itemprop="name headline">The Swiss Far West and GPX fun</h1>
		<p class="post-meta">
			<time class="dt-published" datetime="2018-09-25T00:00:00-03:00" itemprop="datePublished">Sep 25, 2018
			</time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Heitor</span></span></p>
	</header>

	<br>

	<div class="post-content e-content" itemprop="articleBody">
		<p>Yesterday my supervisor and I went to a hike to the <em>Swiss Far West</em>, the westernmost
part of Switzerland. Unfortunately, we couldn’t go to the precise westernmost point
of the border with France, because that’s in the <abbr title="Latitude: 46.1323565, Longitude: 5.9559113">middle</abbr> of the river <em>Le
Rhône</em><sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup> and we didn’t want to get inside the water.</p>

<p>I recorded our hike using <a href="https://osmand.net/">OsmAnd</a>, a very nice app for
maps and location and finding out how to go from one place to another. And all
that offline! You only need internet connection to download the app :) Oh, and
it’s <abbr title="as in free beer">free</abbr>!</p>

<p>This app gave me <a href="hike.gpx">this <abbr title="GPS Exchange Format">GPX</abbr> file</a>. It’s basically an XML file with
coordinates (latitude, longidute, elevation and time) and some more
information. You can read more about the format on
<a href="https://en.wikipedia.org/wiki/GPS_Exchange_Format">WikiPedia</a>.</p>

<p>I found this <a href="https://github.com/tkrajina/gpxpy">gpxpy</a> library to work with
<abbr title="GPS Exchange Format">GPX</abbr> files. It’s quite easy to use it together with
<a href="https://matplotlib.org/">matplotlib</a>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">gpxpy</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">animation</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="kn">import</span> <span class="n">Axes3D</span>

<span class="n">gpx_filename</span> <span class="o">=</span> <span class="s">"hike.gpx"</span>

<span class="n">gps_lat</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">gps_long</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">gps_elevation</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s">'3d'</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">gpx_filename</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">bla</span><span class="p">:</span>
    <span class="n">gpx</span> <span class="o">=</span> <span class="n">gpxpy</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">bla</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">track</span> <span class="ow">in</span> <span class="n">gpx</span><span class="o">.</span><span class="n">tracks</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">track</span><span class="o">.</span><span class="n">segments</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">segment</span><span class="o">.</span><span class="n">points</span><span class="p">:</span>
                <span class="n">gps_lat</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">latitude</span><span class="p">)</span>
                <span class="n">gps_long</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">longitude</span><span class="p">)</span>
                <span class="n">gps_elevation</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">elevation</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">init</span><span class="p">():</span>
    <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">gps_lat</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">gps_long</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">],</span>           <span class="c1"># x coordinate
</span>                <span class="n">gps_lat</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">],</span>            <span class="c1"># y,
</span>                <span class="n">gps_elevation</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">],</span>      <span class="c1"># z
</span>                <span class="n">color</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">viridis</span><span class="p">(</span><span class="n">i</span> <span class="o">/</span> <span class="n">N</span><span class="p">))</span> <span class="c1"># sequential color
</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">"longitude"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">"latitude"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_zlabel</span><span class="p">(</span><span class="s">"altitude (meters)"</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span>


<span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">view_init</span><span class="p">(</span><span class="n">elev</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span> <span class="n">azim</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span>

<span class="n">anim</span> <span class="o">=</span> <span class="n">animation</span><span class="o">.</span><span class="n">FuncAnimation</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">animate</span><span class="p">,</span> <span class="n">init_func</span><span class="o">=</span><span class="n">init</span><span class="p">,</span>
                               <span class="n">frames</span><span class="o">=</span><span class="mi">360</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">blit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">anim</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">'hike.mp4'</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">extra_args</span><span class="o">=</span><span class="p">[</span><span class="s">'-vcodec'</span><span class="p">,</span> <span class="s">'libx264'</span><span class="p">])</span>

</code></pre></div></div>

<p>And this codes gives the path of our hike, after about 150 seconds:</p>

<video width="100%" height="100%" loop="True" controls="">
  <source src="hike.mp4" type="video/mp4" />
  Your browser does not support the HTML5 video tag :(
  click <a href="hike.mp4"> here </a> to view the animation.
</video>
<p><br /></p>

<p>And that’s pretty cool <img draggable="false" title=":sunglasses:" alt="😎" src="https://twemoji.maxcdn.com/2/svg/1f60e.svg" class="emoji" /></p>

<p>Lets extract some more information about this <abbr title="GPS Exchange Format">GPX</abbr> file:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">gpxpy</span>

<span class="n">gpx_filename</span> <span class="o">=</span> <span class="s">"hike.gpx"</span>
<span class="n">gpx</span> <span class="o">=</span> <span class="n">gpxpy</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">gpx_filename</span><span class="p">))</span>

<span class="k">print</span><span class="p">(</span><span class="s">""</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"distance:"</span><span class="p">,</span> <span class="n">gpx</span><span class="o">.</span><span class="n">length_3d</span><span class="p">(),</span> <span class="s">"m"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"duration:"</span><span class="p">,</span> <span class="n">gpx</span><span class="o">.</span><span class="n">get_duration</span><span class="p">(),</span> <span class="s">"s"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"started:"</span><span class="p">,</span> <span class="n">gpx</span><span class="o">.</span><span class="n">get_time_bounds</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">"ended:"</span><span class="p">,</span>   <span class="n">gpx</span><span class="o">.</span><span class="n">get_time_bounds</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">"elevation extremes:"</span><span class="p">,</span> <span class="n">gpx</span><span class="o">.</span><span class="n">get_elevation_extremes</span><span class="p">()[:],</span> <span class="s">"m"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Max speed: "</span><span class="p">,</span> <span class="n">gpx</span><span class="o">.</span><span class="n">get_moving_data</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s">"m/s"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Boundaries: "</span><span class="p">,</span> <span class="p">[</span><span class="n">bla</span> <span class="k">for</span> <span class="n">bla</span> <span class="ow">in</span> <span class="n">gpx</span><span class="o">.</span><span class="n">get_bounds</span><span class="p">()])</span>

</code></pre></div></div>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">$</span> <span class="n">python</span> <span class="n">infos</span><span class="o">.</span><span class="n">py</span> 

<span class="n">distance</span><span class="o">:</span> <span class="mf">5892.264830266586</span> <span class="n">m</span>
<span class="n">duration</span><span class="x">;</span> <span class="mi">5550</span> <span class="n">s</span>
<span class="n">started</span><span class="o">:</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span> <span class="mi">07</span><span class="o">:</span><span class="mi">36</span><span class="o">:</span><span class="mi">10</span>
<span class="n">ended</span><span class="o">:</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span> <span class="mi">09</span><span class="o">:</span><span class="mi">08</span><span class="o">:</span><span class="mi">40</span>
<span class="n">elevation</span> <span class="n">extremes</span><span class="o">:</span> <span class="x">(</span><span class="mf">320.36</span><span class="x">,</span> <span class="mf">429.36</span><span class="x">)</span> <span class="n">m</span>
<span class="n">Max</span> <span class="n">speed</span><span class="o">:</span>  <span class="mf">1.8713130924592616</span> <span class="n">m</span><span class="o">/</span><span class="n">s</span>
<span class="n">Boundaries</span><span class="o">:</span>  <span class="x">[</span><span class="mf">46.1285393</span><span class="x">,</span> <span class="mf">46.13805</span><span class="x">,</span> <span class="mf">5.9561619</span><span class="x">,</span> <span class="mf">5.9720922</span><span class="x">]</span>
</code></pre></div></div>

<p>Nice! But the nicest thing would be a simple way to add the <abbr title="GPS Exchange Format">GPX</abbr> coordinates on
top of the map of the region. The library
<a href="https://github.com/wrobell/geotiler">geotiler</a> provides a way to get the map
from <a href="http://openstreetmap.org/">OpenStreetMap</a>. You might need
<a href="https://redis.io/">Redis</a> running as server in the background for <em>geotiler</em>
to work. Here’s the code:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.basemap</span> <span class="kn">import</span> <span class="n">Basemap</span>
<span class="kn">import</span> <span class="nn">matplotlib.patheffects</span> <span class="k">as</span> <span class="n">PathEffects</span>
<span class="kn">from</span> <span class="nn">matplotlib.patches</span> <span class="kn">import</span> <span class="n">Ellipse</span>
<span class="kn">import</span> <span class="nn">geotiler</span>
<span class="kn">import</span> <span class="nn">gpxpy</span>

<span class="n">gpx_filename</span> <span class="o">=</span> <span class="s">"hike.gpx"</span>
<span class="n">gpx</span> <span class="o">=</span> <span class="n">gpxpy</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">gpx_filename</span><span class="p">))</span>

<span class="n">bbox</span> <span class="o">=</span> <span class="p">[</span><span class="n">gpx</span><span class="o">.</span><span class="n">get_bounds</span><span class="p">()</span><span class="o">.</span><span class="n">min_longitude</span> <span class="o">-</span> <span class="mf">0.002</span><span class="p">,</span>
        <span class="n">gpx</span><span class="o">.</span><span class="n">get_bounds</span><span class="p">()</span><span class="o">.</span><span class="n">min_latitude</span>  <span class="o">-</span> <span class="mf">0.002</span><span class="p">,</span>
        <span class="n">gpx</span><span class="o">.</span><span class="n">get_bounds</span><span class="p">()</span><span class="o">.</span><span class="n">max_longitude</span> <span class="o">+</span> <span class="mf">0.002</span><span class="p">,</span>
        <span class="n">gpx</span><span class="o">.</span><span class="n">get_bounds</span><span class="p">()</span><span class="o">.</span><span class="n">max_latitude</span>  <span class="o">+</span> <span class="mf">0.002</span><span class="p">]</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">13</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>

<span class="c1"># download tiles from OSM
</span><span class="n">mm</span> <span class="o">=</span> <span class="n">geotiler</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">extent</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">,</span> <span class="n">zoom</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">geotiler</span><span class="o">.</span><span class="n">render_map</span><span class="p">(</span><span class="n">mm</span><span class="p">)</span>

<span class="n">myMap</span> <span class="o">=</span> <span class="n">Basemap</span><span class="p">(</span><span class="n">llcrnrlon</span><span class="o">=</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">llcrnrlat</span><span class="o">=</span><span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                <span class="n">urcrnrlon</span><span class="o">=</span><span class="n">bbox</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">urcrnrlat</span><span class="o">=</span><span class="n">bbox</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                <span class="n">projection</span><span class="o">=</span><span class="s">'merc'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">myMap</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s">'lanczos'</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s">'upper'</span><span class="p">)</span>

<span class="c1"># plot hike
</span><span class="n">points</span> <span class="o">=</span> <span class="n">gpx</span><span class="o">.</span><span class="n">get_points_data</span><span class="p">()</span>
<span class="n">lon</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">longitude</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span>
<span class="n">lat</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">latitude</span>  <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span>
<span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">point_no</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span> <span class="c1"># to color sequentially each point
</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">myMap</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">)</span> <span class="c1"># map (long, lat) to (x,y) coordinates in plot
</span><span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">index</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s">'brg'</span><span class="p">)</span>

<span class="c1"># add some texts and arrows with style
</span><span class="n">t1</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s">'France'</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="mf">.01</span><span class="p">,</span> <span class="mf">.96</span><span class="p">),</span> <span class="n">xycoords</span><span class="o">=</span><span class="s">'axes fraction'</span><span class="p">,</span>
                 <span class="n">horizontalalignment</span><span class="o">=</span><span class="s">'left'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
                 <span class="n">verticalalignment</span><span class="o">=</span><span class="s">'bottom'</span><span class="p">,</span> <span class="n">fontname</span> <span class="o">=</span> <span class="s">'monospace'</span><span class="p">)</span>
<span class="n">t2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s">'Switzerland'</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="mf">.99</span><span class="p">,</span> <span class="mf">.96</span><span class="p">),</span> <span class="n">xycoords</span><span class="o">=</span><span class="s">'axes fraction'</span><span class="p">,</span>
                 <span class="n">horizontalalignment</span><span class="o">=</span><span class="s">'right'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
                 <span class="n">verticalalignment</span><span class="o">=</span><span class="s">'bottom'</span><span class="p">,</span> <span class="n">fontname</span> <span class="o">=</span> <span class="s">'monospace'</span><span class="p">)</span>
<span class="n">el</span> <span class="o">=</span> <span class="n">Ellipse</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="n">t3</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s">'Border'</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="mf">.61</span><span class="p">,</span> <span class="mf">.90</span><span class="p">),</span> <span class="n">xycoords</span><span class="o">=</span><span class="s">'axes fraction'</span><span class="p">,</span>
                 <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mf">.5</span><span class="p">,</span> <span class="mf">.96</span><span class="p">),</span> <span class="n">textcoords</span><span class="o">=</span><span class="s">'axes fraction'</span><span class="p">,</span>
                 <span class="n">horizontalalignment</span><span class="o">=</span><span class="s">'center'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
                 <span class="n">verticalalignment</span><span class="o">=</span><span class="s">'bottom'</span><span class="p">,</span> <span class="n">fontname</span> <span class="o">=</span> <span class="s">'monospace'</span><span class="p">,</span>
                 <span class="n">arrowprops</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arrowstyle</span><span class="o">=</span><span class="s">"simple"</span><span class="p">,</span>
                                 <span class="n">fc</span><span class="o">=</span><span class="s">"black"</span><span class="p">,</span> <span class="n">ec</span><span class="o">=</span><span class="s">"none"</span><span class="p">,</span>
                                 <span class="n">patchB</span><span class="o">=</span><span class="n">el</span><span class="p">,</span>
                                 <span class="n">connectionstyle</span><span class="o">=</span><span class="s">"arc3,rad=0.3"</span><span class="p">))</span>
<span class="n">t4</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s">"Switzerland's</span><span class="se">\n</span><span class="s">westest point"</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="n">myMap</span><span class="p">(</span><span class="mf">5.9559555</span><span class="p">,</span> <span class="mf">46.1323555</span><span class="p">),</span>
                 <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mf">.3</span><span class="p">,</span> <span class="mf">.42</span><span class="p">),</span> <span class="n">textcoords</span><span class="o">=</span><span class="s">'axes fraction'</span><span class="p">,</span>
                 <span class="n">horizontalalignment</span><span class="o">=</span><span class="s">'center'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
                 <span class="n">verticalalignment</span><span class="o">=</span><span class="s">'bottom'</span><span class="p">,</span> <span class="n">fontname</span> <span class="o">=</span> <span class="s">'monospace'</span><span class="p">,</span>
                 <span class="n">arrowprops</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arrowstyle</span><span class="o">=</span><span class="s">"simple"</span><span class="p">,</span>
                                 <span class="n">fc</span><span class="o">=</span><span class="s">"black"</span><span class="p">,</span> <span class="n">ec</span><span class="o">=</span><span class="s">"none"</span><span class="p">,</span>
                                 <span class="n">patchB</span><span class="o">=</span><span class="n">el</span><span class="p">,</span>
                                 <span class="n">connectionstyle</span><span class="o">=</span><span class="s">"arc3,rad=0.3"</span><span class="p">))</span>
<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="p">[</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">t4</span><span class="p">]:</span>
    <span class="n">t</span><span class="o">.</span><span class="n">set_path_effects</span><span class="p">([</span><span class="n">PathEffects</span><span class="o">.</span><span class="n">withStroke</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">foreground</span><span class="o">=</span><span class="s">'w'</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.666</span><span class="p">)])</span>


<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">'map.png'</span><span class="p">,</span> <span class="n">quality</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">bbox_inches</span> <span class="o">=</span> <span class="s">'tight'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></div>

<p>It reads the <abbr title="GPS Exchange Format">GPX</abbr> file, gets the map of the region from OpenStreeMap, adds
coloured points showing the path and some texts. The result:</p>

<p><a href="map.png"><img src="map.png" alt="The coloured points are our hiking path :)" /></a></p>

<p>The blue points mark the beginning of the hike. And it changes colours all the
way to the green points, marking the end of our 5892.3 meters walk :) As you
can see, we got pretty close to the westernmost Swiss point! For
some reason, my phone lost GPS connection in the beginning, that’s why it’s
missing some blue points.</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p><a href="https://osm.org/go/0CFL8Bq5?m=">Latitude: 46.1323565, Longitude: 5.9559113</a> <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

	</div>

	<a class="u-url" href="/bla/2018/09/25/hikingAnalysis/" hidden></a>
</article>
				<br>
			</main>

				<footer class="mastfoot mt-auto text-center">
		<div class="inner">
			
			<br />Heitor's log, 2018 - 2020
			by <a href="/me.html">Heitor</a>
			is licensed under a
			<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0 International License</a>.
		</div>
	</footer>
</div>
			<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

		</div>
	</body>
</html>