<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Heitor's log</title>
    <description>Yeaah</description>
    <link>https://heitorpb.github.io/</link>
    <atom:link href="https://heitorpb.github.io/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 10 Nov 2020 17:26:52 -0300</pubDate>
    <lastBuildDate>Tue, 10 Nov 2020 17:26:52 -0300</lastBuildDate>
    <generator>Jekyll v3.8.7</generator>
    
      <item>
        <title>My thoughts on PiHole</title>
        <description>&lt;p&gt;About a month ago, I decided to try &lt;a href=&quot;https://pi-hole.net/&quot;&gt;PiHole&lt;/a&gt; for whole
network ad blocking, I documented how I set it up
&lt;a href=&quot;/bla/2020/10/13/rasp3-pihole/&quot;&gt;here&lt;/a&gt;, and now its time to document my
thoughts about using it.&lt;/p&gt;

&lt;p&gt;I expected PiHole to block advertisement and trackers on every device connected
to my local network, either through WiFi or cable, in a completely transparent
way. And it does block. The problem is that it is not possible to bypass (or
turn it off) temporarily for a specific website in a specific device. It is
only possible to completely turn off PiHole, for the entire network, either for
the next minutes or indefinitely.&lt;/p&gt;

&lt;p&gt;This was a problem for me in two situations:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;A guest trying to check the prices of a product using my WiFi. It is very
convenient to just Google the product and go to the &lt;em&gt;shopping&lt;/em&gt; tab. It shows
the prices different sellers/shops in one page, at the price of tracking
you. With PiHole, Google Shopping was blocked. This is just an example, but
the point is: guests get annoyed with the internet blocking their websites.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Sometimes a website, or part of its content, is blocked and I wanted to
‚Äúdebug‚Äù it, to find the reason that a particular content is blocked.  It is
very complicated to debug it on a network level, specially after adding some
extra lists of trackers. It is possible to allow a specific domain, but not
everything from a specific web page, in this case you need to do it manually
for every entry you find.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Another inconvenience I found was in the response time. It was taking too long
to start loading new websites. I did not measure the latency, but it was there
and was annoying. It was specially horrible in my phone, it took seconds to
start loading. Too long to be useful.&lt;/p&gt;

&lt;p&gt;So I returned to my previous solution:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;use &lt;a href=&quot;http://www.thekelleys.org.uk/dnsmasq/doc.html&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;dnsmasq&lt;/code&gt;&lt;/a&gt; to cache DNS
queries&lt;/li&gt;
  &lt;li&gt;use &lt;a href=&quot;https://ublockorigin.com/&quot;&gt;uBLock Origin&lt;/a&gt; to block ads and trackers,
also available for mobile browsers&lt;/li&gt;
  &lt;li&gt;do not install crapware in your phone&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Latency is significantly lower, easy to debug, easy to disable blocking in a
single browser tab, and there‚Äôs no need to maintain a server.&lt;/p&gt;

&lt;p&gt;Now I need to find another use for my Raspberry‚Ä¶&lt;/p&gt;
</description>
        <pubDate>Tue, 10 Nov 2020 00:00:00 -0300</pubDate>
        <link>https://heitorpb.github.io/bla/2020/11/10/pihole-dnsmasq/</link>
        <guid isPermaLink="true">https://heitorpb.github.io/bla/2020/11/10/pihole-dnsmasq/</guid>
        
        <category>linux</category>
        
        <category>random</category>
        
        <category>raspberry pi</category>
        
        <category>sysadmin</category>
        
        <category>test</category>
        
        
        <category>random</category>
        
      </item>
    
      <item>
        <title>Linux Upskill Challenge</title>
        <description>&lt;p&gt;The Linux Upskill Challenge is a month-long course on Reddit (&lt;a href=&quot;https://www.reddit.com/r/linuxupskillchallenge&quot;&gt;r/linuxupskillchallenge&lt;/a&gt;), about Linux Server Administration.&lt;/p&gt;

&lt;p&gt;It is not a formal course, neither gives a certificate to share on social
media. I think this makes the course more valuable, because the people taking
it are doing to learn, and not to brag online.&lt;/p&gt;

&lt;p&gt;It is a hands-on course with a lot of extra resources for the curious. Although
I‚Äôve been using GNU/Linux in my personal computer for a long time, I don‚Äôt
consider myself an expert. I know my way around, but I‚Äôve never dug deeper.
This is a nice opportunity to learn more and also use a remote &lt;abbr title=&quot;Virtual Private Server&quot;&gt;VPS&lt;/abbr&gt; for free.
&lt;img draggable=&quot;false&quot; title=&quot;:sunglasses:&quot; alt=&quot;üòé&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f60e.svg&quot; class=&quot;emoji&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;daily-logs&quot;&gt;Daily logs&lt;/h2&gt;

&lt;p&gt;Here are some thoughts about each lecture. It is not meant to be a collection of
study notes, as use a different system for that, but a brain dump of random
ideas.&lt;/p&gt;

&lt;h3 id=&quot;days-0-and-1&quot;&gt;Days 0 and 1&lt;/h3&gt;

&lt;p&gt;Goal: get a remote server for free and learn how to manage it.&lt;/p&gt;

&lt;p&gt;Decided to use Google Cloud Compute, just because. That dashboard is so
chaotic‚Ä¶ The most difficult task of the day was setting up the SSH public key
to log to my new &lt;abbr title=&quot;Virtual Machine&quot;&gt;VM&lt;/abbr&gt;.&lt;/p&gt;

&lt;p&gt;SSH keys are awesome. I‚Äôve been using them for a long time for remote access
and they make life way easier. &lt;code class=&quot;highlighter-rouge&quot;&gt;ssh-copy-id&lt;/code&gt; command is easier than
&lt;code class=&quot;highlighter-rouge&quot;&gt;cat ~/.ssh/id_rsa.pub | ssh remote_username@server_ip_address &quot;mkdir -p ~/.ssh &amp;amp;&amp;amp; chmod 700 ~/.ssh &amp;amp;&amp;amp; cat &amp;gt;&amp;gt; ~/.ssh/authorized_keys &amp;amp;&amp;amp; chmod 600 ~/.ssh/authorized_keys&quot;&lt;/code&gt;,
but for old servers is not an option. The machine I‚Äôm using at my university to
run the simulations for my Master‚Äôs studies did not accept &lt;code class=&quot;highlighter-rouge&quot;&gt;ssh-copy-id&lt;/code&gt;‚Ä¶&lt;/p&gt;

&lt;h3 id=&quot;day-2&quot;&gt;Day 2&lt;/h3&gt;

&lt;p&gt;Goal: learn to navigate in the machine using only the terminal.&lt;/p&gt;

&lt;p&gt;I‚Äôve been using GNU/Linux for more than 10 years, I‚Äôm pretty confident with the
terminal. But there‚Äôs always something new to learn: &lt;code class=&quot;highlighter-rouge&quot;&gt;ls -ltra&lt;/code&gt; is a nice
example to find the most recently altered files.&lt;/p&gt;

&lt;h3 id=&quot;day-3&quot;&gt;Day 3&lt;/h3&gt;

&lt;p&gt;Goal: get familiar with &lt;code class=&quot;highlighter-rouge&quot;&gt;root&lt;/code&gt; things.&lt;/p&gt;

&lt;p&gt;Mind blow of the day: I saw lots of attempts to connect to this &lt;abbr title=&quot;Virtual Machine&quot;&gt;VM&lt;/abbr&gt; in
&lt;code class=&quot;highlighter-rouge&quot;&gt;/var/log/auth.log&lt;/code&gt; file. Awesome. Bots everywhere.&lt;/p&gt;

&lt;p&gt;I am running ArchLinux on my Raspberry Pi 3, it uses &lt;code class=&quot;highlighter-rouge&quot;&gt;journalctl&lt;/code&gt; for the logs:
&lt;code class=&quot;highlighter-rouge&quot;&gt;journalctl /usr/bin/sshd&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;It was nice to learn about &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo -i&lt;/code&gt;. I‚Äôve been using &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo su -&lt;/code&gt; to become
root and is good to know there are other ways to do it as well. The details
about the differences and other comments are explained
&lt;a href=&quot;https://askubuntu.com/questions/376199/sudo-su-vs-sudo-i-vs-sudo-bin-bash-when-does-it-matter-which-is-used&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;day-4&quot;&gt;Day 4&lt;/h3&gt;

&lt;p&gt;Goal: install stuff, explore the file structure and get familiar with ‚Äúwalking‚Äù
around.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;man hier&lt;/code&gt; blew my mind. Oh, this is awesome. I googled about the filesystem
hierarchy so many times and did not know I already had all the information in
front of me.&lt;/p&gt;

&lt;h3 id=&quot;day-5&quot;&gt;Day 5&lt;/h3&gt;

&lt;p&gt;Goal: get familiar with &lt;code class=&quot;highlighter-rouge&quot;&gt;TAB&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;less&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;more&lt;/code&gt;, and hidden/dot files.&lt;/p&gt;

&lt;p&gt;I was never a big fan of &lt;code class=&quot;highlighter-rouge&quot;&gt;more&lt;/code&gt;. I normally use &lt;code class=&quot;highlighter-rouge&quot;&gt;less&lt;/code&gt; as a pager, because it
allows me to scroll up and down easier, search for a string, jump to a
position, and quite fast for huge files.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;history&lt;/code&gt; command is nice. I know about it and never used directly. I
prefer to &lt;code class=&quot;highlighter-rouge&quot;&gt;ctrl + r&lt;/code&gt; and a trick to use the Up/Down arrows to use the text that
has already been typed as the prefix for searching commands. Only works with
Bash, though. Check &lt;code class=&quot;highlighter-rouge&quot;&gt;readline&lt;/code&gt; on
&lt;a href=&quot;https://wiki.archlinux.org/index.php/Readline#History&quot;&gt;ArchWiki&lt;/a&gt; for more
details.&lt;/p&gt;

&lt;h3 id=&quot;day-6&quot;&gt;Day 6&lt;/h3&gt;

&lt;p&gt;Goal: learn &lt;code class=&quot;highlighter-rouge&quot;&gt;Vim&lt;/code&gt; and how to exit it.&lt;/p&gt;

&lt;p&gt;I‚Äôve been using Vim for quite a long time. I use it for almost everything
related to text: coding, writing my Master‚Äôs Thesis, writing TODO lists,
writing these notes, and probably other things I can‚Äôt remember now. And
despite those years of usage, every week I learn something new about it.
Learning Vim is a hard task, but definitely worth it.&lt;/p&gt;

&lt;p&gt;I started the &lt;code class=&quot;highlighter-rouge&quot;&gt;vimtutor&lt;/code&gt; but never finished it. So many times. They say it
takes about half an hour to go through it, I‚Äôll try to do it (again). Actually,
I‚Äôll try &lt;code class=&quot;highlighter-rouge&quot;&gt;neovim&lt;/code&gt;‚Äôs tutorial (&lt;code class=&quot;highlighter-rouge&quot;&gt;:Tutor&amp;lt;Enter&amp;gt;&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;The insane new thing about Vim that I learned today is that it has seven (!)
basic modes:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Normal mode&lt;/li&gt;
  &lt;li&gt;Visual mode&lt;/li&gt;
  &lt;li&gt;Select mode&lt;/li&gt;
  &lt;li&gt;Insert mode&lt;/li&gt;
  &lt;li&gt;Command-line mode (or Cmdline mode)&lt;/li&gt;
  &lt;li&gt;Ex mode&lt;/li&gt;
  &lt;li&gt;Terminal-Job mode&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And then there are seven &lt;em&gt;additional&lt;/em&gt; modes:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Operator-pending mode&lt;/li&gt;
  &lt;li&gt;Replace mode&lt;/li&gt;
  &lt;li&gt;Virtual Replace mode&lt;/li&gt;
  &lt;li&gt;Insert Normal mode&lt;/li&gt;
  &lt;li&gt;Terminal-Normal mode&lt;/li&gt;
  &lt;li&gt;Insert Visual mode&lt;/li&gt;
  &lt;li&gt;Insert Select mode&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;You can read more about them with the internal help: &lt;code class=&quot;highlighter-rouge&quot;&gt;:help vim-modes&lt;/code&gt;.
Curiously, &lt;code class=&quot;highlighter-rouge&quot;&gt;neovim&lt;/code&gt; has one fewer additional mode (at least as of &lt;code class=&quot;highlighter-rouge&quot;&gt;nvim
0.4.4&lt;/code&gt;).&lt;/p&gt;

&lt;h3 id=&quot;day-7&quot;&gt;Day 7&lt;/h3&gt;

&lt;p&gt;Goal: install a web server and use it to host a page.&lt;/p&gt;

&lt;p&gt;The instructions are for Apache2, a.k.a. &lt;code class=&quot;highlighter-rouge&quot;&gt;httpd&lt;/code&gt;, but I decided to use Caddy
instead. I‚Äôm curious about it‚Äôs automatic conversion from Markdown to HTML.&lt;/p&gt;

&lt;p&gt;I got the binary from the &lt;a href=&quot;https://caddyserver.com/download&quot;&gt;Download page&lt;/a&gt; and
followed the official documentation to install it, creating a &lt;code class=&quot;highlighter-rouge&quot;&gt;systemd&lt;/code&gt; service
file.&lt;/p&gt;

&lt;p&gt;I am using this &lt;code class=&quot;highlighter-rouge&quot;&gt;Caddyfile&lt;/code&gt; to serve a static-website:&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:80 {
	root * /var/lib/caddy/www/
	encode zstd gzip
	templates
	file_server
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And my &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/lib/caddy/www/index.html&lt;/code&gt; is a very complex one:&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{ { include &quot;index.md&quot; | markdown }}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;afterthoughts&quot;&gt;Afterthoughts&lt;/h4&gt;

&lt;p&gt;I should just follow the course. Lets play with Apache2. It is also simple, for
some reason I expected it to be a quite complex to set up. On the other hand, I
need to write html instead of Markdown :( but I can have a nice text only web
page using only one tag:&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;pre&amp;gt;&lt;/span&gt;
# Title

## Section

bla
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;day-8&quot;&gt;Day 8&lt;/h3&gt;

&lt;p&gt;Goal: search for specific patterns in text files.&lt;/p&gt;

&lt;p&gt;The Apache2 logs are in &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/log/apache2&lt;/code&gt;. To get all IP addresses that
connected to Apache:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-E&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'s/ (.*)//g'&lt;/span&gt; access.log | &lt;span class=&quot;nb&quot;&gt;sort&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;uniq
&lt;/span&gt;27.123.241.20
45.148.121.28
45.148.121.85
54.93.196.88
62.33.138.6
66.249.75.147
66.249.75.149
74.120.14.52
75.76.251.71
91.193.5.58
92.118.160.17
99.10.249.153
103.49.188.166
116.28.214.153
125.41.10.86
125.43.93.10
125.47.64.145
139.162.119.197
142.118.76.99
173.174.64.235
174.51.18.48
177.76.230.216
179.99.69.186
186.71.77.9
192.241.239.84
193.118.53.210
194.87.138.60
209.126.3.185
209.17.97.34
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Grepping &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/log/auth.log&lt;/code&gt; I can see 72 different IPs trying to log as
&lt;code class=&quot;highlighter-rouge&quot;&gt;root&lt;/code&gt; and 10 other random users. Hahah, nice.&lt;/p&gt;

&lt;p&gt;I like to know that &lt;code class=&quot;highlighter-rouge&quot;&gt;cut&lt;/code&gt; can also remove words from a string, I finally got
what the &lt;code class=&quot;highlighter-rouge&quot;&gt;--fields&lt;/code&gt; option mean.&lt;/p&gt;

&lt;h3 id=&quot;day-9&quot;&gt;Day 9&lt;/h3&gt;

&lt;p&gt;Goal: First look at network security.&lt;/p&gt;

&lt;p&gt;The first task is to find open ports. I‚Äôve used &lt;code class=&quot;highlighter-rouge&quot;&gt;nmap&lt;/code&gt; for that before and
let‚Äôs see what happens, when running it on the remote server:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;nmap localhost
Starting Nmap 7.80 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; https://nmap.org &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at 2020-10-15 11:32 &lt;span class=&quot;nt&quot;&gt;-03&lt;/span&gt;
Nmap scan report &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;localhost &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;127.0.0.1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Host is up &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.000086s latency&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Not shown: 998 closed ports
PORT   STATE SERVICE
22/tcp open  ssh
80/tcp open  http

Nmap &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;: 1 IP address &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1 host up&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; scanned &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;0.07 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Nice, it can see &lt;code class=&quot;highlighter-rouge&quot;&gt;ssh&lt;/code&gt; and something for &lt;code class=&quot;highlighter-rouge&quot;&gt;http&lt;/code&gt;, that is &lt;code class=&quot;highlighter-rouge&quot;&gt;apache2&lt;/code&gt; on port &lt;code class=&quot;highlighter-rouge&quot;&gt;80&lt;/code&gt;
here. But it is interesting how different it is from my laptop:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;nmap 35.228.166.73
Starting Nmap 7.80 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; https://nmap.org &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at 2020-10-15 11:32 &lt;span class=&quot;nt&quot;&gt;-03&lt;/span&gt;
Nmap scan report &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;73.166.228.35.bc.googleusercontent.com &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;35.228.166.73&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Host is up &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.25s latency&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Not shown: 995 closed ports
PORT     STATE    SERVICE
19/tcp   filtered chargen
22/tcp   open     ssh
25/tcp   filtered smtp
80/tcp   open     http
5555/tcp filtered freeciv

Nmap &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;: 1 IP address &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1 host up&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; scanned &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;23.00 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It finds three other &lt;code class=&quot;highlighter-rouge&quot;&gt;filtered&lt;/code&gt; services. The manual says:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;The state is either open, filtered, closed, or unfiltered. Open means that
an application on the target machine is listening for connections/packets
on that port. Filtered means that a firewall, filter, or other network
obstacle is blocking the port so that Nmap cannot tell whether it is open
or closed.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, those ports might be or might not be open.&lt;/p&gt;

&lt;p&gt;I tried to host something at those ports and could not get a connection from my
laptop, so they are blocked by Google by default and there‚Äôs nothing (?) I can
do. I can use all other ports though.&lt;/p&gt;

&lt;p&gt;I‚Äôve never used &lt;a href=&quot;https://launchpad.net/ufw&quot;&gt;ufw&lt;/a&gt; before. It is time to learn
how to properly use a firewall and this one is simple and powerful enough,
although it uses &lt;code class=&quot;highlighter-rouge&quot;&gt;iptables&lt;/code&gt; and not the ‚Äúmodern‚Äù &lt;code class=&quot;highlighter-rouge&quot;&gt;nftables&lt;/code&gt;. I liked how simple
it is to allow or deny traffic in a port. But I can‚Äôt compare with other tools.&lt;/p&gt;

&lt;p&gt;Changing my SSH port to a random number. I thought it was a bit pointless, but
apparently it
&lt;a href=&quot;https://web.archive.org/web/20201013122112/https://danielmiessler.com/blog/no-moving-your-ssh-port-isnt-security-by-obscurity/&quot;&gt;is not&lt;/a&gt;.
Using &lt;code class=&quot;highlighter-rouge&quot;&gt;nmap&lt;/code&gt;, it shows the port open, but with &lt;code class=&quot;highlighter-rouge&quot;&gt;unknown&lt;/code&gt; as the service. Sounds
good.&lt;/p&gt;

&lt;h3 id=&quot;day-10&quot;&gt;Day 10&lt;/h3&gt;

&lt;p&gt;Goal: run stuff periodically with &lt;code class=&quot;highlighter-rouge&quot;&gt;cron&lt;/code&gt; jobs.&lt;/p&gt;

&lt;p&gt;Lazy people automate stuff :)&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;systemd&lt;/code&gt; can also run jobs at specific times, using &lt;code class=&quot;highlighter-rouge&quot;&gt;systemd/timers&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;A fun cron job to add is to periodically change the SSH banner:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /etc/cron.hourly/banner
&lt;span class=&quot;c&quot;&gt;#!/bin/sh&lt;/span&gt;

/usr/games/fortune | /usr/games/cowsay &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; /etc/banner.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;day-11&quot;&gt;Day 11&lt;/h3&gt;

&lt;p&gt;Goal: searching for files and patterns.&lt;/p&gt;

&lt;p&gt;I‚Äôve been using blindly &lt;code class=&quot;highlighter-rouge&quot;&gt;find&lt;/code&gt; for quite a while. It was time to finally read
it‚Äôs manual. There‚Äôs more to it than &lt;code class=&quot;highlighter-rouge&quot;&gt;find . -iname &quot;bla*&quot;&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;zcat&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;zgrep&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;zless&lt;/code&gt;, and &lt;code class=&quot;highlighter-rouge&quot;&gt;zmore&lt;/code&gt; are awesome! Did not know I could
&lt;code class=&quot;highlighter-rouge&quot;&gt;cat&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;less&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;grep&lt;/code&gt; gzip compressed files.&lt;/p&gt;

&lt;h3 id=&quot;day-12&quot;&gt;Day 12&lt;/h3&gt;

&lt;p&gt;Goal: copy stuff around.&lt;/p&gt;

&lt;p&gt;I like &lt;code class=&quot;highlighter-rouge&quot;&gt;rsync&lt;/code&gt; to copy lots of small files (actually, also big and medium ones)
as it can create a ‚Äústream‚Äù of data instead of one new connection for each
file. It can also compress the files as it sends to the destination. This can
save &lt;em&gt;a lot&lt;/em&gt; of time. I normally use &lt;code class=&quot;highlighter-rouge&quot;&gt;rsync -azvP src dst&lt;/code&gt; meaning &lt;code class=&quot;highlighter-rouge&quot;&gt;rsync
--archive --compress --verbose --partial --progress src dst&lt;/code&gt;. Sometimes the
&lt;code class=&quot;highlighter-rouge&quot;&gt;-P&lt;/code&gt; flag can be annoying, but YMMV.&lt;/p&gt;

&lt;p&gt;Something funny I found out is that &lt;code class=&quot;highlighter-rouge&quot;&gt;rsync&lt;/code&gt; shows the SSH banner of the remote
server:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;rsync &lt;span class=&quot;nt&quot;&gt;-avz&lt;/span&gt; linuxUpskill-gc:/var/www/html &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
 _________________________________________
 / Be free and open and breezy! Enjoy!     &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 | Things won&lt;span class=&quot;s1&quot;&gt;'t get any better so get used |
 \ to it.                                  /
  -----------------------------------------
          \   ^__^
           \  (oo)\_______
              (__)\       )\/\
                  ||----w |
                  ||     ||
receiving incremental file list
html/
html/404.html
html/index.html
html/robots.txt

sent 104 bytes  received 3,710 bytes  693.45 bytes/sec
total size is 11,324  speedup is 2.97
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;day-13&quot;&gt;Day 13&lt;/h3&gt;

&lt;p&gt;Goal: familiarize with the Linux permission system.&lt;/p&gt;

&lt;p&gt;It is way simpler to use &lt;code class=&quot;highlighter-rouge&quot;&gt;u+w&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;o-rwx&lt;/code&gt; than playing around with octal
numbers for &lt;code class=&quot;highlighter-rouge&quot;&gt;chmod&lt;/code&gt;. I didn‚Äôt know I could change the permission to more than
one letter of &lt;em&gt;ugo&lt;/em&gt;, as in &lt;code class=&quot;highlighter-rouge&quot;&gt;chmod go-wr [files]&lt;/code&gt;, it never occurred to me to
try that either.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;bla, blabla &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; file.txt
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-la&lt;/span&gt; file.txt
&lt;span class=&quot;nt&quot;&gt;-rw-rw-r--&lt;/span&gt; 1 user user 12 Oct 21 12:11 file.txt
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;chmod &lt;/span&gt;ug-w file.txt
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-la&lt;/span&gt; file.txt
&lt;span class=&quot;nt&quot;&gt;-r--r--r--&lt;/span&gt; 1 user user 12 Oct 21 12:11 file.txt
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;hehe &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; file.txt
&lt;span class=&quot;nt&quot;&gt;-bash&lt;/span&gt;: file.txt: Permission denied
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;day-14&quot;&gt;Day 14&lt;/h3&gt;

&lt;p&gt;Goal: user management and permissions.&lt;/p&gt;

&lt;p&gt;I always confuse &lt;code class=&quot;highlighter-rouge&quot;&gt;useradd&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;adduser&lt;/code&gt;, after all they are anagrams.
&lt;a href=&quot;https://serverfault.com/questions/218993/whats-the-difference-between-useradd-and-adduser&quot;&gt;This ServerFault&lt;/a&gt;
question has a nice answer about it:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;adduser is a friendlier interactive frontend to useradd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I found out it is possible to enable offensive messages when an user type an
incorrect password when &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo&lt;/code&gt;ing. Just add &lt;code class=&quot;highlighter-rouge&quot;&gt;Defaults	insults&lt;/code&gt; to
&lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/sudoers&lt;/code&gt;, obviously using &lt;code class=&quot;highlighter-rouge&quot;&gt;visudo&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Nice to know that it is possible to enable specific commands for a user to run
with &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo&lt;/code&gt; without granting full &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo&lt;/code&gt;, like:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;fred    ALL &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; NOPASSWD:/sbin/reboot
fred    ALL &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; NOPASSWD:/usr/bin/ls
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This allows user &lt;code class=&quot;highlighter-rouge&quot;&gt;fred&lt;/code&gt; to &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo ls&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo reboot&lt;/code&gt;, without typing the
password, but does not allow any other command with &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&quot;day-15&quot;&gt;Day 15&lt;/h3&gt;

&lt;p&gt;Goal: package management, with &lt;code class=&quot;highlighter-rouge&quot;&gt;apt&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;I used a few different package managers before:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;synaptic&lt;/code&gt; (when I used Kurumin, back then)&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get&lt;/code&gt; (when I switched to Ubuntu)&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;portage&lt;/code&gt; (when I used Gentoo)&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get&lt;/code&gt; (again, briefly, when I used Debian in 2011)&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;pacman&lt;/code&gt; (when I switched to ArchLinux)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I wish I remember the first time I tried Kurumin, but I don‚Äôt. I think I
compiled Gentoo in 2008, I‚Äôm not sure. But I remember how fast my computer
became. It was an AMD 32-bit single-core CPU, 1.2 GHz, 384 MiB RAM DDR, GeForce
4 MM 440, with hand soldered electrolytic capacitors in the motherboard
(because they overheated and needed to be replaced). This computer was bought
in ~2000, and when I finally managed to have a working Kernel, it needed ~12
seconds to fully boot! It had a very slow hard drive, slow RAM, slow CPU, and
still was insanely fast! How I miss Gentoo‚Ä¶&lt;/p&gt;

&lt;p&gt;ArchWiki has a &lt;a href=&quot;https://wiki.archlinux.org/index.php/Pacman/Rosetta&quot;&gt;Rosetta&lt;/a&gt;
page, that ‚Äútranslates‚Äù commands from one package manager to other. It is a
nice reference when dealing with different systems.&lt;/p&gt;

&lt;h3 id=&quot;day-16&quot;&gt;Day 16&lt;/h3&gt;

&lt;p&gt;Goal: managing tape archives, a.k.a &lt;em&gt;tarballs&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Vim is always surprising me. Today I learned you can open file archives in Vim.
It is possible to open &lt;code class=&quot;highlighter-rouge&quot;&gt;.zip&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;.tar.gz&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;.tar.bz&lt;/code&gt;, etc., and even modify its
content on the fly. No need to extract, edit, archive again.&lt;/p&gt;

&lt;p&gt;I have a &lt;code class=&quot;highlighter-rouge&quot;&gt;targz&lt;/code&gt; function in one of my dotfiles to create an archive of a bunch
of files or a directory. It‚Äôs time to get rid of it and learn how to properly
use &lt;code class=&quot;highlighter-rouge&quot;&gt;tar&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;gzip&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;bzip&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&quot;day-17&quot;&gt;Day 17&lt;/h3&gt;

&lt;p&gt;Goal: compiling stuff.&lt;/p&gt;

&lt;p&gt;I liked to &lt;code class=&quot;highlighter-rouge&quot;&gt;./configure&lt;/code&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;nmap&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ CFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-O2 -march=native&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;CXXFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-O2 -march=native&quot;&lt;/span&gt; ./configure
&lt;span class=&quot;c&quot;&gt;# skipping lots of lines...&lt;/span&gt;
            &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;       &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
            &lt;span class=&quot;se&quot;&gt;\`&lt;/span&gt;-&lt;span class=&quot;s2&quot;&gt;&quot;'&quot;&lt;/span&gt;-&lt;span class=&quot;s1&quot;&gt;'/
             } 6 6 {
            ==. Y ,==
              /^^^\  .
             /     \  )  Ncat: A modern interpretation of classic Netcat
            (  )-(  )/
            -&quot;&quot;---&quot;&quot;---   /
           /   Ncat    \_/
          (     ____
           \_.=|____E
Configuration complete.
   (  )   /\   _                 (
    \ |  (  \ ( \.(               )                      _____
  \  \ \  `  `   ) \             (  ___                 / _   \
 (_`    \+   . x  ( .\            \/   \____-----------/ (o)   \_
- .-               \+  ;          (  O                           \____
(__                +- .( -'&lt;/span&gt;.- &amp;lt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;   &lt;span class=&quot;se&quot;&gt;\_&lt;/span&gt;____________  &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;              &lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt; /
&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;_____            ._._: &amp;lt;_ - &amp;lt;- _- _  VVVVVVV VV V&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;               &lt;span class=&quot;se&quot;&gt;\/&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;    /./.+-  &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; .- /  +--  - &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;--_AAAAAAA__A_&lt;/span&gt;/                |
  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;__ &lt;span class=&quot;s1&quot;&gt;' /x  / x _/ (                \______________//_              \_______
 , x / ( '&lt;/span&gt;  &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; / &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;  /                                  &lt;span class=&quot;se&quot;&gt;\_&lt;/span&gt;__&lt;span class=&quot;s1&quot;&gt;'          \     /
    /  /  _/ /    +                                       |           \   /
   '&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;__/                                               /              &lt;span class=&quot;se&quot;&gt;\/&lt;/span&gt;
                                                       /                  &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  NMAP IS A POWERFUL TOOL &lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt; USE CAREFULLY AND RESPONSIBLY
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Cool ASCII art!&lt;/p&gt;

&lt;h3 id=&quot;day-18&quot;&gt;Day 18&lt;/h3&gt;

&lt;p&gt;Goal: cleaning-up old logs.&lt;/p&gt;

&lt;p&gt;Logs can save your system. If there‚Äôs a weird behaviour somewhere, the first
thing to check is the logs. But logs can also flood your system. In fact, this
was what crashed some servers I was responsible for at my job and it was not
nice. I wrote about that incident and how to tame Docker logs
&lt;a href=&quot;/bla/2020/09/13/careful_with_docker_logs/&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/cron.daily/logrotate&lt;/code&gt; there‚Äôs a line that checks if there are any
&lt;code class=&quot;highlighter-rouge&quot;&gt;systemd/timers&lt;/code&gt;, if so, &lt;code class=&quot;highlighter-rouge&quot;&gt;cron&lt;/code&gt; does nothing and let &lt;code class=&quot;highlighter-rouge&quot;&gt;systemd&lt;/code&gt; do the job.
That‚Äôs clever. The timer is configured in
&lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/systemd/system/timers.target.wants/logrotate.timer&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;logrotate&lt;/code&gt;‚Äôs log file is in a different path: &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/lib/logrotate/status&lt;/code&gt;.
That‚Äôs funny!&lt;/p&gt;

&lt;h3 id=&quot;day-19&quot;&gt;Day 19&lt;/h3&gt;

&lt;p&gt;Goal: overview of the Linux Virtual File System.&lt;/p&gt;

&lt;p&gt;Inodes. Inodes everywhere. If I got it correctly, an inode is a bunch of
information about the file/directory. It contains filename, file owner, file
permissions, creation/modification times, where the file is on disk, and maybe
more. So, it is metadata.&lt;/p&gt;

&lt;p&gt;To find a file by it‚Äôs inode number, you have to scan to entire filesystem. The
inode number is per filesystem, so there might be more than one file with the
same number. To locate a file by its inode number, without traversing to a
different filesystem:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;find / &lt;span class=&quot;nt&quot;&gt;-mount&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-inum&lt;/span&gt; 1
/sys
/boot/efi
/proc

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;stat&lt;/span&gt; /sys /boot/efi /proc
  File: /sys
  Size: 0               Blocks: 0          IO Block: 4096   directory
Device: 18h/24d Inode: 1           Links: 13
Access: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0555/dr-xr-xr-x&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;  Uid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;    0/    root&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;   Gid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;    0/    root&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Access: 2020-10-22 18:38:03.292000000 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Modify: 2020-10-22 18:38:03.292000000 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Change: 2020-10-22 18:38:03.292000000 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
 Birth: -
  File: /boot/efi
  Size: 512             Blocks: 1          IO Block: 512    directory
Device: 80fh/2063d      Inode: 1           Links: 4
Access: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0755/drwxr-xr-x&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;  Uid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;    0/    root&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;   Gid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;    0/    root&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Access: 1969-12-31 21:00:00.000000000 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Modify: 1969-12-31 21:00:00.000000000 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Change: 1969-12-31 21:00:00.000000000 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
 Birth: -
  File: /proc
  Size: 0               Blocks: 0          IO Block: 1024   directory
Device: 5h/5d   Inode: 1           Links: 120
Access: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0555/dr-xr-xr-x&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;  Uid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;    0/    root&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;   Gid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;    0/    root&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Access: 2020-10-22 18:38:01.390534452 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Modify: 2020-10-22 18:38:01.390534452 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Change: 2020-10-22 18:38:01.390534452 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
 Birth: -
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I just found out, empirically, that there‚Äôs no file with inode 0. This number
is reserved.&lt;/p&gt;

&lt;p&gt;I think I finally got the difference between a &lt;em&gt;hard&lt;/em&gt; and &lt;em&gt;soft&lt;/em&gt; link. But I am
definitely not sure about it. The following copy-pasta blob from a terminal
might shred some light on it:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; /tmp/bla.txt
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ln&lt;/span&gt; /tmp/bla.txt link_hard
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ln&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; /tmp/bla.txt link_soft
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;stat&lt;/span&gt; /tmp/bla.txt link_hard link_soft
  File: /tmp/bla.txt
  Size: 82              Blocks: 8          IO Block: 4096   regular file
Device: 801h/2049d      Inode: 3122        Links: 2
Access: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0664/-rw-rw-r--&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;  Uid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; 1001/       h&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;   Gid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; 1002/       h&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Access: 2020-10-29 16:13:43.003122821 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Modify: 2020-10-29 16:13:43.003122821 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Change: 2020-10-29 16:13:55.123855608 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
 Birth: -
  File: link_hard
  Size: 82              Blocks: 8          IO Block: 4096   regular file
Device: 801h/2049d      Inode: 3122        Links: 2
Access: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0664/-rw-rw-r--&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;  Uid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; 1001/       h&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;   Gid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; 1002/       h&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Access: 2020-10-29 16:13:43.003122821 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Modify: 2020-10-29 16:13:43.003122821 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Change: 2020-10-29 16:13:55.123855608 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
 Birth: -
  File: link_soft -&amp;gt; /tmp/bla.txt
  Size: 12              Blocks: 0          IO Block: 4096   symbolic &lt;span class=&quot;nb&quot;&gt;link
&lt;/span&gt;Device: 801h/2049d      Inode: 292697      Links: 1
Access: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0777/lrwxrwxrwx&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;  Uid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; 1001/       h&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;   Gid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; 1002/       h&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Access: 2020-10-29 16:14:14.681037964 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Modify: 2020-10-29 16:14:03.624369542 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Change: 2020-10-29 16:14:03.624369542 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
 Birth: -

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mv&lt;/span&gt; /tmp/bla.txt /tmp/bla2.txt
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;stat&lt;/span&gt; /tmp/bla2.txt link_hard link_soft
  File: /tmp/bla2.txt
  Size: 82              Blocks: 8          IO Block: 4096   regular file
Device: 801h/2049d      Inode: 3122        Links: 2
Access: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0664/-rw-rw-r--&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;  Uid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; 1001/       h&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;   Gid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; 1002/       h&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Access: 2020-10-29 16:31:42.488385936 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Modify: 2020-10-29 16:13:43.003122821 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Change: 2020-10-29 16:31:39.232189075 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
 Birth: -
  File: link_hard
  Size: 82              Blocks: 8          IO Block: 4096   regular file
Device: 801h/2049d      Inode: 3122        Links: 2
Access: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0664/-rw-rw-r--&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;  Uid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; 1001/       h&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;   Gid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; 1002/       h&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Access: 2020-10-29 16:13:43.003122821 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Modify: 2020-10-29 16:13:43.003122821 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Change: 2020-10-29 16:14:38.554481313 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
 Birth: -
  File: link_soft -&amp;gt; /tmp/bla.txt
  Size: 12              Blocks: 0          IO Block: 4096   symbolic &lt;span class=&quot;nb&quot;&gt;link
&lt;/span&gt;Device: 801h/2049d      Inode: 292697      Links: 1
Access: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0777/lrwxrwxrwx&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;  Uid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; 1001/       h&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;   Gid: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; 1002/       h&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Access: 2020-10-29 16:14:14.681037964 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Modify: 2020-10-29 16:14:03.624369542 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
Change: 2020-10-29 16:14:03.624369542 &lt;span class=&quot;nt&quot;&gt;-0300&lt;/span&gt;
 Birth: -

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;file link_&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
link_hard: ASCII text
link_soft: broken symbolic &lt;span class=&quot;nb&quot;&gt;link &lt;/span&gt;to /tmp/bla.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;day-20&quot;&gt;Day 20&lt;/h3&gt;

&lt;p&gt;Goal: ultimate laziness with scripts.&lt;/p&gt;

&lt;p&gt;This is the last lesson of the Linux Upskill Challenge.&lt;/p&gt;

&lt;p&gt;Scripting is an endless topic. As Bilbo would say, &lt;em&gt;You start with a shebang,
and if you don‚Äôt keep your feet, there is no knowing where you might be swept
off to.&lt;/em&gt; This is a very powerful tool, but without paying attention to all
details, a mistake can be the Destroyer of All Servers. Powerful, efficient,
and simple.&lt;/p&gt;

&lt;h2 id=&quot;conclusions&quot;&gt;Conclusions&lt;/h2&gt;

&lt;p&gt;I joined this course hoping I‚Äôd learn more about managing a server, in
particular to improve my backup strategy. I ended up learning a lot more than I
expected, not only about a &lt;abbr title=&quot;Virtual Private Server&quot;&gt;VPS&lt;/abbr&gt; but also general Linux-related stuff.&lt;/p&gt;

&lt;p&gt;It did not ‚Äúconsume‚Äù much time daily, it was very pleasant and time efficient.
I liked how small, yet complete, each lecture was, and it was up to the learner
to dig deeper as it pleased.&lt;/p&gt;

&lt;p&gt;This course was totally worth it.&lt;/p&gt;

&lt;p&gt;I have some final thoughts that don‚Äôt belong to any specific daily log, but are
still relevant.&lt;/p&gt;

&lt;p&gt;Never get a &lt;abbr title=&quot;Virtual Private Server&quot;&gt;VPS&lt;/abbr&gt; on the other side of the world, if possible. I decided to get
one in Finland (because, why not?) and I can feel the latency to type any
commands in the terminal. I can type normally, it is not that slow. But the
typing latency is there. I can‚Äôt measure it, but I can feel it. The average
&lt;code class=&quot;highlighter-rouge&quot;&gt;ping&lt;/code&gt; to this server is 297 ms, versus 19 ms for a server in Brazil (same
country as I am now). 300 ms is definitely something we can note, but it is not
a problem for what I was doing.&lt;/p&gt;

&lt;p&gt;It doesn‚Äôt matter how long ago you started using Vim (or Neovim), take some
time to go through &lt;code class=&quot;highlighter-rouge&quot;&gt;vim-tutor&lt;/code&gt;. It takes about half an hour and it covers much
more than the basic usage. There are some great small new things to learn
there.&lt;/p&gt;

&lt;p&gt;I recommend this course for anyone that wants to learn more about Linux, even if
you are not planning to be a sysadmin. The lessons are very well written and
there are many good tips to help a casual Linux user.&lt;/p&gt;

&lt;!-- text hints --&gt;
</description>
        <pubDate>Fri, 30 Oct 2020 00:00:00 -0300</pubDate>
        <link>https://heitorpb.github.io/bla/2020/10/30/linuxupskill/</link>
        <guid isPermaLink="true">https://heitorpb.github.io/bla/2020/10/30/linuxupskill/</guid>
        
        <category>linux</category>
        
        <category>random</category>
        
        <category>sysadmin</category>
        
        <category>test</category>
        
        
        <category>random</category>
        
      </item>
    
      <item>
        <title>Setting up Raspberry Pi 3 with PiHole</title>
        <description>&lt;p&gt;I decided to try &lt;a href=&quot;https://pi-hole.net/&quot;&gt;PiHole&lt;/a&gt; as a &lt;a href=&quot;https://en.wikipedia.org/wiki/DNS_sinkhole&quot;&gt;DNS sinkhole&lt;/a&gt;. Here I logged how I set up my Raspberry Pi 3 with ArchLinux to run it.&lt;/p&gt;

&lt;p&gt;The idea is to have a way to block advertisement and trackers on my entire
network. &lt;a href=&quot;https://ublockorigin.com/&quot;&gt;uBlock Origin&lt;/a&gt; is a great browser plugin
that blocks those things on webpages, but I am lazy and want a solution that
works for my laptop, phone, and guest‚Äôs devices as well. And that‚Äôs what PiHole
tries to do.&lt;/p&gt;

&lt;p&gt;&lt;a data-flickr-embed=&quot;true&quot; href=&quot;https://www.flickr.com/photos/heitorpb/50469705936/in/dateposted/&quot; title=&quot;Raspberry Pi&quot;&gt;&lt;img src=&quot;https://live.staticflickr.com/65535/50469705936_a068726cc1.jpg&quot; width=&quot;500&quot; height=&quot;333&quot; alt=&quot;Raspberry Pi 3&quot; /&gt;&lt;/a&gt;&lt;script async=&quot;&quot; src=&quot;//embedr.flickr.com/assets/client-code.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;I have an old
&lt;a href=&quot;https://www.raspberrypi.org/products/raspberry-pi-3-model-b-plus/&quot;&gt;Raspberry Pi 3 B+&lt;/a&gt;
that is now unused. Here is how I set it up to use PiHole.&lt;/p&gt;

&lt;h2 id=&quot;system-set-up&quot;&gt;System set up&lt;/h2&gt;

&lt;h3 id=&quot;raspberry&quot;&gt;Raspberry&lt;/h3&gt;

&lt;p&gt;This part is setting up a new computer, not much to discuss here:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;follow the &lt;a href=&quot;https://archlinuxarm.org/platforms/armv8/broadcom/raspberry-pi-3&quot;&gt;installation
instructions&lt;/a&gt;,
with the AArch64 &lt;em&gt;thingy&lt;/em&gt;.&lt;/li&gt;
  &lt;li&gt;update the system&lt;/li&gt;
  &lt;li&gt;user configuration
    &lt;ul&gt;
      &lt;li&gt;change &lt;code class=&quot;highlighter-rouge&quot;&gt;alarm&lt;/code&gt; pass to something better&lt;/li&gt;
      &lt;li&gt;change &lt;code class=&quot;highlighter-rouge&quot;&gt;root&lt;/code&gt; pass to something better&lt;/li&gt;
      &lt;li&gt;enable &lt;code class=&quot;highlighter-rouge&quot;&gt;alarm&lt;/code&gt; user to &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo&lt;/code&gt; things&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;system configuration
    &lt;ul&gt;
      &lt;li&gt;install &lt;code class=&quot;highlighter-rouge&quot;&gt;vim&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;tmux&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;base-devel&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;set up ssh
        &lt;ul&gt;
          &lt;li&gt;allow only ssh keys&lt;/li&gt;
          &lt;li&gt;disable root login&lt;/li&gt;
          &lt;li&gt;generate and enable a new
&lt;a href=&quot;https://wiki.archlinux.org/index.php/SSH_keys&quot;&gt;ssh key&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;change GPU memory to 16 MB&lt;/li&gt;
      &lt;li&gt;set up hardware RNG (I like randomness)
        &lt;ul&gt;
          &lt;li&gt;remove &lt;code class=&quot;highlighter-rouge&quot;&gt;haveged&lt;/code&gt;&lt;/li&gt;
          &lt;li&gt;install &lt;code class=&quot;highlighter-rouge&quot;&gt;rng-tools&lt;/code&gt; and configure it:
            &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /etc/conf.d/rngd
  &lt;span class=&quot;nv&quot;&gt;RNGD_OPTS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-o /dev/random -r /dev/hwrng&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;            &lt;/div&gt;
          &lt;/li&gt;
          &lt;li&gt;entropy increased from ~3700 to ~4000&lt;/li&gt;
          &lt;li&gt;can read from &lt;code class=&quot;highlighter-rouge&quot;&gt;/dev/random&lt;/code&gt; at ~71 MB/s:
            &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;dd &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/dev/random &lt;span class=&quot;nv&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/dev/null &lt;span class=&quot;nv&quot;&gt;bs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1024 &lt;span class=&quot;nv&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;500000 &lt;span class=&quot;nv&quot;&gt;iflag&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;fullblock
  500000+0 records &lt;span class=&quot;k&quot;&gt;in
  &lt;/span&gt;500000+0 records out
  512000000 bytes &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;512 MB, 488 MiB&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; copied, 7.19274 s, 71.2 MB/s
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;            &lt;/div&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;set up time and timezone
        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;https://wiki.archlinux.org/index.php/Systemd-timesyncd&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;systemd-timesyncd.service&lt;/code&gt;&lt;/a&gt;
as an NTP client&lt;/li&gt;
          &lt;li&gt;time zone: &lt;code class=&quot;highlighter-rouge&quot;&gt;timedatectl set-timezone America/Sao_Paulo&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;move  to permanent location&lt;/li&gt;
      &lt;li&gt;set up fixed IP address with
&lt;a href=&quot;https://wiki.archlinux.org/index.php/Systemd-networkd&quot;&gt;systemd-networkd&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;set up &lt;code class=&quot;highlighter-rouge&quot;&gt;en_US.UTF-8&lt;/code&gt; locale&lt;/li&gt;
      &lt;li&gt;install &lt;code class=&quot;highlighter-rouge&quot;&gt;yay&lt;/code&gt;, configure &lt;code class=&quot;highlighter-rouge&quot;&gt;pacman&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;install &lt;code class=&quot;highlighter-rouge&quot;&gt;raspberrypi-userland-aarch64-git&lt;/code&gt; (AUR)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Some nice commands to run after everything is in place, just because:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;uname&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt;
Linux alarm 5.8.0-1-ARCH &lt;span class=&quot;c&quot;&gt;#1 SMP Sun Aug 9 00:03:44 UTC 2020 aarch64 GNU/Linux&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;lscpu
Architecture:                    aarch64
CPU op-mode&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;:                  32-bit, 64-bit
Byte Order:                      Little Endian
CPU&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;:                          4
On-line CPU&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; list:             0-3
Thread&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; per core:              1
Core&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; per socket:              4
Socket&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;:                       1
Vendor ID:                       ARM
Model:                           4
Model name:                      Cortex-A53
Stepping:                        r0p4
CPU max MHz:                     1200.0000
CPU min MHz:                     600.0000
BogoMIPS:                        38.40
Vulnerability Itlb multihit:     Not affected
Vulnerability L1tf:              Not affected
Vulnerability Mds:               Not affected
Vulnerability Meltdown:          Not affected
Vulnerability Spec store bypass: Not affected
Vulnerability Spectre v1:        Mitigation&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; __user pointer sanitization
Vulnerability Spectre v2:        Not affected
Vulnerability Srbds:             Not affected
Vulnerability Tsx async abort:   Not affected
Flags:                           fp asimd evtstrm crc32 cpuid

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;free &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt;
          total      used      free      shared  buff/cache   available
Mem:      899Mi      76Mi      41Mi       0.0Ki  781Mi        808Mi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And this system needs almost 19 seconds to boot:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemd-analyze
Startup finished &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;7.670s &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;kernel&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; + 10.919s &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;userspace&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 18.590s
graphical.target reached after 10.904s &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;userspace
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It takes roughly 3 times longer than my 5-year old x86_64 laptop.&lt;/p&gt;

&lt;h3 id=&quot;pihole&quot;&gt;PiHole&lt;/h3&gt;

&lt;p&gt;Following the instructions in
&lt;a href=&quot;https://wiki.archlinux.org/index.php/Pi-hole&quot;&gt;ArchWiki&lt;/a&gt;:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;install pihole-server: &lt;code class=&quot;highlighter-rouge&quot;&gt;yay -S pi-hole-server&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;install php things: &lt;code class=&quot;highlighter-rouge&quot;&gt;pacman -S php-sqlite&lt;/code&gt; and enable the necessary
extensions&lt;/li&gt;
  &lt;li&gt;install &lt;code class=&quot;highlighter-rouge&quot;&gt;lighttpd&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;php-cgi&lt;/code&gt; for the web interface&lt;/li&gt;
  &lt;li&gt;enable/start &lt;code class=&quot;highlighter-rouge&quot;&gt;pihole-FTL.service&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;lighttpd.service&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;configure &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/pihole/pihole-FTL.conf&lt;/code&gt;:
    &lt;ul&gt;
      &lt;li&gt;change &lt;code class=&quot;highlighter-rouge&quot;&gt;DBINTERVAL&lt;/code&gt; to &lt;code class=&quot;highlighter-rouge&quot;&gt;60.0&lt;/code&gt; to minimize writes to the SD card&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;set up DoH for DNS over HTTPS:
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$ yay -S cloudflared&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;add some IPv6 entries in &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/cloudflared/cloudflared.yml&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;start/enable &lt;code class=&quot;highlighter-rouge&quot;&gt;cloudflared.service&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;in the &lt;a href=&quot;http://pihole/admin/settings.php?tab=dns&quot;&gt;web settings page&lt;/a&gt;:
        &lt;ul&gt;
          &lt;li&gt;disable all DNS servers and use &lt;code class=&quot;highlighter-rouge&quot;&gt;127.0.0.1#5300&lt;/code&gt; only&lt;/li&gt;
          &lt;li&gt;enable DNSSEC&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;router&quot;&gt;Router&lt;/h3&gt;

&lt;p&gt;I have a very low quality modem/router from my ISP. It randomly resets the
admin password, hopefully it will retain my custom DNS/DHCP configuration.
The only configuration needed is to set the Raspberry Pi as the only DNS
server in the DHCP settings. This was the most ‚Äúcomplicated‚Äù/boring part of
the setup, mainly because I had to reset the modem to log in.&lt;/p&gt;

&lt;h2 id=&quot;my-thoughts-so-far&quot;&gt;My thoughts so far&lt;/h2&gt;

&lt;p&gt;My SD card is slow as hell. It takes forever to update something and/or move
data in it. Maybe I got used to my laptop with a good SSD and everything
slower became a headache? Or maybe the combination of a medium quality, old
SD card plus a Raspberry Pi is indeed slow.&lt;/p&gt;

&lt;p&gt;The fan I added to the rasp is very noisy. That is annoying and I will
probably turn it off. I should monitor the temperature under high load to see
if it needs active cooling. It shouldn‚Äôt need, but I have a 3D printed case, so
air circulation is limited.&lt;/p&gt;

&lt;p&gt;AArch64 support is still crappy. This is the most disappointing thing I
noticed. Years of product in the market and yet no decent support. I expected
more from the Raspberry Foundation.&lt;/p&gt;

&lt;p&gt;PiHole is more efficient than I previously thought. Usually I have two or three
devices connected to my network, and the Pi shows the total RAM usage is about
150 MiB (~15% of the total).
The load average is below 0.1.
I‚Äôm impressed.&lt;/p&gt;

&lt;p&gt;It took me about two days to set this thing up. Well, not exactly whole days: a
more precise description would be around 2.5 evenings, with some breaks. Was it
worth it? Using a Raspberry for something is better than using a Raspberry to
collect dust in a shelf. So, probably worth it, although I wouldn‚Äôt recommend
buying a rasp for this.&lt;/p&gt;
</description>
        <pubDate>Tue, 13 Oct 2020 00:00:00 -0300</pubDate>
        <link>https://heitorpb.github.io/bla/2020/10/13/rasp3-pihole/</link>
        <guid isPermaLink="true">https://heitorpb.github.io/bla/2020/10/13/rasp3-pihole/</guid>
        
        <category>linux</category>
        
        <category>random</category>
        
        <category>raspberry pi</category>
        
        <category>sysadmin</category>
        
        <category>test</category>
        
        
        <category>random</category>
        
      </item>
    
      <item>
        <title>Be careful with your Docker logs</title>
        <description>&lt;p&gt;This week, one of our testing servers got clogged and stopped responding: the
disk was full and it crashed some services. This machine is used only for
running Docker containers, so it must be a Docker problem, right?&lt;/p&gt;

&lt;p&gt;Kind of.&lt;/p&gt;

&lt;h3 id=&quot;the-problem&quot;&gt;The Problem&lt;/h3&gt;

&lt;p&gt;This test server has 100 GiB of disk, and it was full. As it is a ‚ÄúDocker only‚Äù
server, the first obvious thing to check is how much space Docker used:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker system &lt;span class=&quot;nb&quot;&gt;df
&lt;/span&gt;TYPE             TOTAL    ACTIVE    SIZE       RECLAIMABLE
Images           21       18        16GB       10.07GB &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;60%&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Containers       18       17        812.8MB    15.24MB &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1%&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Local Volumes    69       14        6.428GB    395.9MB &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;6%&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Build Cache      0        0         0B         0B
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, Docker is using about 23 GB. And the volumes are not to blame, they are
using only 6.4 GB. Pruning it would free some space and in fact saved the
machine. But a few hours later, the disk was full again. Something flooded the
disk, and it was not in any Docker container or volume.&lt;/p&gt;

&lt;p&gt;I checked the machine logs, and they were small:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;du&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; 0 /var/log
1.6G    /var/log
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I dug deeper and saw something weird:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;du&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; 0 /var/
99G     var/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And then, the guilty service appeared:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;du&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; 0 /var/lib/
97.6G   /var/lib
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;du&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; 0 /var/lib/docker
96.7G   /var/lib/docer
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So it was Docker the whole time. But, what else Docker has, besides images,
layers, containers, volumes and build cache, as reported by &lt;code class=&quot;highlighter-rouge&quot;&gt;docker system df&lt;/code&gt;?&lt;/p&gt;

&lt;p&gt;Docker has logs.&lt;/p&gt;

&lt;p&gt;By default, Docker saves the output of each container in a &lt;code class=&quot;highlighter-rouge&quot;&gt;json&lt;/code&gt; file in
&lt;code class=&quot;highlighter-rouge&quot;&gt;/var/lib/docker/containers/&amp;lt;container_ID&amp;gt;/&amp;lt;container_ID&amp;gt;-json.log&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;du&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; /var/lib/docker/containers/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.log

315M    /var/lib/docker/containers/016.../016...-json.log
164K    /var/lib/docker/containers/0d1.../0d1...-json.log
51G     /var/lib/docker/containers/0f7.../0f7...-json.log
6G      /var/lib/docker/containers/0f8.../0f8...-json.log
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Yeah, there were huge log files‚Ä¶&lt;/p&gt;

&lt;p&gt;By
&lt;a href=&quot;https://docs.docker.com/config/containers/logging/json-file/#options&quot;&gt;default&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Docker saves the output of each container in &lt;code class=&quot;highlighter-rouge&quot;&gt;json&lt;/code&gt; format. That is the
&lt;code class=&quot;highlighter-rouge&quot;&gt;json-file&lt;/code&gt; log driver.&lt;/li&gt;
  &lt;li&gt;Each &lt;code class=&quot;highlighter-rouge&quot;&gt;*-json.log&lt;/code&gt; can grow without any limits.&lt;/li&gt;
  &lt;li&gt;There can be any number of log files.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;possible-solutions&quot;&gt;Possible solutions&lt;/h3&gt;

&lt;p&gt;There are some ways to solve this problem:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;periodically remove/trim the logs, with a cron job or &lt;code class=&quot;highlighter-rouge&quot;&gt;logrotate&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;use an external log aggregator like &lt;a href=&quot;https://www.fluentd.org/&quot;&gt;fluentd&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;configure Docker to not flood the disk.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;First option is nice and generic. Second option is the most robust, but
involves setting up another server and configure things. For this server, the
third option is good enough.&lt;/p&gt;

&lt;p&gt;Let‚Äôs tell Docker to keep log files with a maximum of 1GB and to
have a maximum of 3 log files per service. To do so, we need to configure the
docker daemon. It is as simple as adding these lines to
&lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/docker/daemon.json&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;s2&quot;&gt;&quot;log-driver&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;json-file&quot;&lt;/span&gt;,
        &lt;span class=&quot;s2&quot;&gt;&quot;log-opts&quot;&lt;/span&gt;: &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;max-size&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;1g&quot;&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&quot;max-file&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;3&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now it is time to restart docker. This automagically trimmed all the logs
and the machine was usable again. Services were running smoothly and well.&lt;/p&gt;

&lt;h3 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h3&gt;

&lt;p&gt;Always rotate your logs.&lt;/p&gt;
</description>
        <pubDate>Sun, 13 Sep 2020 00:00:00 -0300</pubDate>
        <link>https://heitorpb.github.io/bla/2020/09/13/careful_with_docker_logs/</link>
        <guid isPermaLink="true">https://heitorpb.github.io/bla/2020/09/13/careful_with_docker_logs/</guid>
        
        <category>Docker</category>
        
        <category>linux</category>
        
        <category>optimization</category>
        
        <category>random</category>
        
        <category>sysadmin</category>
        
        <category>test</category>
        
        
        <category>random</category>
        
      </item>
    
      <item>
        <title>Multiple urls for a git remote</title>
        <description>&lt;p&gt;AKA automagic mirroring of your GitHub into GitLab.&lt;/p&gt;

&lt;p&gt;There is a simple way to set up git to use multiple push URLs for a single
remote. This way you can easily mirror any git repository into any hosting
provider when &lt;code class=&quot;highlighter-rouge&quot;&gt;git push&lt;/code&gt;ing.&lt;/p&gt;

&lt;p&gt;Let‚Äôs say your GitHub‚Äôs user is &lt;code class=&quot;highlighter-rouge&quot;&gt;user&lt;/code&gt; and you want to mirror your &lt;code class=&quot;highlighter-rouge&quot;&gt;repo&lt;/code&gt; into
GitLab. Your local clone is initially:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git remote &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;
origin  git@github.com:user/repo.git &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;fetch&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
origin  git@github.com:user/repo.git &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;push&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now we need to configure the &lt;code class=&quot;highlighter-rouge&quot;&gt;origin&lt;/code&gt; remote to have two URLs:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git remote set-url &lt;span class=&quot;nt&quot;&gt;--add&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--push&lt;/span&gt; origin git@github.com:user/repo.git
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git remote set-url &lt;span class=&quot;nt&quot;&gt;--add&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--push&lt;/span&gt; origin git@gitlab.com:user/repo.git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And the magical result:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git remote &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;
origin  git@github.com:user/repo.git &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;fetch&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
origin  git@github.com:user/repo.git &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;push&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
origin  git@gitlab.com:user/repo.git &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;push&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This makes every &lt;code class=&quot;highlighter-rouge&quot;&gt;git push&lt;/code&gt; send the changes to both GitHub and GitLab,
creating an automatic backup.&lt;/p&gt;

&lt;p&gt;But note that &lt;code class=&quot;highlighter-rouge&quot;&gt;git pull&lt;/code&gt; is still from GitHub. It is not possible to pull
changes from two different repositories.&lt;/p&gt;
</description>
        <pubDate>Tue, 11 Aug 2020 00:00:00 -0300</pubDate>
        <link>https://heitorpb.github.io/bla/2020/08/11/git-multiple-remotes/</link>
        <guid isPermaLink="true">https://heitorpb.github.io/bla/2020/08/11/git-multiple-remotes/</guid>
        
        <category>git</category>
        
        <category>random</category>
        
        
        <category>random</category>
        
      </item>
    
      <item>
        <title>Caching computation in Python</title>
        <description>&lt;p&gt;Caching is an optimization strategy that stores data in some memory, instead of
using and discarding it. The idea is to store data to serve if faster in the
future. This might save CPU time at the cost of increased memory usage.&lt;/p&gt;

&lt;p&gt;There are many types of cache (hardware caches, network caches, software
caches‚Ä¶), with different applications and performances. In this post I will
discuss one type of software cache: &lt;em&gt;memoization&lt;/em&gt;.&lt;/p&gt;

&lt;h2 id=&quot;memoization&quot;&gt;Memoization&lt;/h2&gt;

&lt;p&gt;Memoization is a software cache technique in which the results of functions
are saved in a cache. The entries of this cache are served when the function is
called with the same inputs, instead of executing the function again.&lt;/p&gt;

&lt;p&gt;It has this name because it is a ‚Äúmemorization‚Äù process: it saves the output of
a function for a given input. Let‚Äôs see an example: the factorial. A Python
code of the recursive version is:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Every time this function is called, it calculates \( (n-1)! \),
\( (n-2)! \), \( (n-3)! \), \( (n-4)! \), ‚Ä¶, this is very fast for small
values of \(n\), but it can take some time for larger inputs:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timeit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mf&quot;&gt;3.6&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;¬µs&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;81.5&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;per&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100000&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loops&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timeit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mf&quot;&gt;7.4&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;¬µs&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.16&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;¬µs&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;per&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100000&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loops&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timeit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mf&quot;&gt;13.5&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;¬µs&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;92.3&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;per&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100000&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loops&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timeit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;294&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;¬µs&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;9.45&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;¬µs&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;per&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loops&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timeit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mf&quot;&gt;1.04&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ms&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;128&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;¬µs&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;per&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loops&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, it takes longer to calculate more intermediate results. Let‚Äôs try to
memoize it manually:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MemoizedFactorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cache&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;calculate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;calculate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And to use it:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MemoizedFactorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;calculate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# prints 120
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And how fast it is?&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timeit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;calculate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;147&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.877&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;per&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10000000&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loops&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, about 150 ns vs 1 ms to calculate the same number.
It is only ~7000 times faster to calculate this version of \(2000!\).
And then there‚Äôs something interesting for \(n &amp;lt; 2000\):&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timeit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;calculate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;147&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;per&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10000000&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loops&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timeit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;calculate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;137&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;150&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.896&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;per&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10000000&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loops&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timeit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;calculate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;147&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2.47&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;per&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10000000&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loops&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timeit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;calculate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1234&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;175&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.81&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;per&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10000000&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loops&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It takes roughly the same amount of time to ‚Äúcalculate‚Äù any value. And it is
expected: we are only retrieving values of a dictionary.&lt;/p&gt;

&lt;p&gt;And notice the memory consumption for each function:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sys&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;26&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getsizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;26&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;73816&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This trades a function to an object that holds 73 KB of cache and yields a
dramatic performance increase.&lt;/p&gt;

&lt;p&gt;It stores 2000 results in 73KB, what would happen if we had 2 million entries?
And then continue calculating more million entries? This implementation would
keep consuming more and more memory until there‚Äôs no more space.&lt;/p&gt;

&lt;p&gt;To overcome this situation, there are many
&lt;a href=&quot;https://en.wikipedia.org/wiki/Cache_replacement_policies&quot;&gt;caching algorithms&lt;/a&gt;
that put in place policies to discard cached data when it becomes full. Here I will discuss the
&lt;em&gt;Least Recently Used&lt;/em&gt; approach.&lt;/p&gt;

&lt;h2 id=&quot;least-recently-used-lru&quot;&gt;Least Recently Used (LRU)&lt;/h2&gt;

&lt;p&gt;It is important to define a maximum size for the cache. This way the system
does not grow indefinitely and you can have control about its memory
consumption.&lt;/p&gt;

&lt;p&gt;The downside is to discard information when the cache is at its limit. One way
of doing so is keeping only the recent entries, discarding the least recently
used.&lt;/p&gt;

&lt;p&gt;This is not as simple as the example above, because it needs to also keep track
of when each entry was cached. On the other hand, it is already implemented in
Python‚Äôs Standard Library :) The module
&lt;a href=&quot;https://docs.python.org/3/library/functools.html&quot;&gt;functools&lt;/a&gt; provides us the
decorator &lt;code class=&quot;highlighter-rouge&quot;&gt;lru_cache&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;functools&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lru_cache&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lru_cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;maxsize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It is the same function from the first code, but with a decorator added. The
default maximum size of the cache is &lt;code class=&quot;highlighter-rouge&quot;&gt;128&lt;/code&gt;, I increased so we can compare
the timings with our handmade version:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;27&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timeit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;68&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.697&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;per&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10000000&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loops&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timeit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mf&quot;&gt;64.1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.05&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;per&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;¬±&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10000000&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loops&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This decorated function is almost three times faster than the handmade cache.&lt;/p&gt;

&lt;p&gt;Another interesting advantage of this decorator is that it provides some
methods to see what happened with the cache:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;cache_info()&lt;/code&gt; method displays some statistics about that cache: how many
&lt;em&gt;hits&lt;/em&gt; (the number of times the requested data was in the cache), &lt;em&gt;misses&lt;/em&gt;
(the number of times the requested data was not in the cache), the maximum
number of entries in the cache and the current number of cached items.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;cache_clear()&lt;/code&gt; method empties the cache.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Let‚Äôs see them in action:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cache_clear&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cache_info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CacheInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hits&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;misses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;maxsize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currsize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;402387260077093773543702433923003985719374864210714632543799910429938512398629020592044208486969404800479988610197196058631666872994808558901323829669944590997424504087073759918823627727188732519779505950995276120874975462497043601418278094646496291056393887437886487337119181045825783647849977012476632889835955735432513185323958463075557409114262417474349347553428646576611667797396668820291207379143853719588249808126867838374559731746136085379534524221586593201928090878297308431392844403281231558611036976801357304216168747609675871348312025478589320767169132448426236131412508780208000261683151027341827977704784635868170164365024153691398281264810213092761244896359928705114964975419909342221566832572080821333186116811553615836546984046708975602900950537616475847728421889679646244945160765353408198901385442487984959953319101723355556602139450399736280750137837615307127761926849034352625200015888535147331611702103968175921510907788019393178114194545257223865541461062892187960223838971476088506276862967146674697562911234082439208160153780889893964518263243671616762179168909779911903754031274622289988005195444414282012187361745992642956581746628302955570299024324153181617210465832036786906117260158783520751516284225540265170483304226143974286933061690897968482590125458327168226458066526769958652682272807075781391858178889652208164348344825993266043367660176999612831860788386150279465955131156552036093988180612138558600301435694527224206344631797460594682573103790084024432438465657245014402821885252470935190620929023136493273497565513958720559654228749774011413346962715422845862377387538230483865688976461927383814900140767310446640259899490222221765904339901886018566526485061799702356193897017860040811889729918311021171229845901641921068884387121855646124960798722908519296819372388642614839657382291123125024186649353143970137428531926649875337218940694281434118520158014123344828015051399694290153483077644569099073152433278288269864602789864321139083506217095002597389863554277196742822248757586765752344220207573630569498825087968928162753848863396909959826280956121450994871701244516461260379029309120889086942028510640182154399457156805941872748998094254742173582401063677404595741785160829230135358081840096996372524230560855903700624271243416909004153690105933983835777939410970027753472000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cache_info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CacheInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hits&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;misses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;maxsize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currsize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;402387260077093773543702433923003985719374864210714632543799910429938512398629020592044208486969404800479988610197196058631666872994808558901323829669944590997424504087073759918823627727188732519779505950995276120874975462497043601418278094646496291056393887437886487337119181045825783647849977012476632889835955735432513185323958463075557409114262417474349347553428646576611667797396668820291207379143853719588249808126867838374559731746136085379534524221586593201928090878297308431392844403281231558611036976801357304216168747609675871348312025478589320767169132448426236131412508780208000261683151027341827977704784635868170164365024153691398281264810213092761244896359928705114964975419909342221566832572080821333186116811553615836546984046708975602900950537616475847728421889679646244945160765353408198901385442487984959953319101723355556602139450399736280750137837615307127761926849034352625200015888535147331611702103968175921510907788019393178114194545257223865541461062892187960223838971476088506276862967146674697562911234082439208160153780889893964518263243671616762179168909779911903754031274622289988005195444414282012187361745992642956581746628302955570299024324153181617210465832036786906117260158783520751516284225540265170483304226143974286933061690897968482590125458327168226458066526769958652682272807075781391858178889652208164348344825993266043367660176999612831860788386150279465955131156552036093988180612138558600301435694527224206344631797460594682573103790084024432438465657245014402821885252470935190620929023136493273497565513958720559654228749774011413346962715422845862377387538230483865688976461927383814900140767310446640259899490222221765904339901886018566526485061799702356193897017860040811889729918311021171229845901641921068884387121855646124960798722908519296819372388642614839657382291123125024186649353143970137428531926649875337218940694281434118520158014123344828015051399694290153483077644569099073152433278288269864602789864321139083506217095002597389863554277196742822248757586765752344220207573630569498825087968928162753848863396909959826280956121450994871701244516461260379029309120889086942028510640182154399457156805941872748998094254742173582401063677404595741785160829230135358081840096996372524230560855903700624271243416909004153690105933983835777939410970027753472000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cache_info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CacheInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hits&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;misses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;maxsize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currsize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After emptying the cache, there‚Äôs no information apart the maximum size. The
first time the function is called, there will be only misses as the cache is
empty. The second time this function is called, the result is already
available.&lt;/p&gt;

&lt;h2 id=&quot;conclusions&quot;&gt;Conclusions&lt;/h2&gt;

&lt;p&gt;Caching is an optimization technique in which we trade expensive computation
for memory. This memory, of course, needs to have a faster access than
computing the data again. As a consequence, the cache needs to be small.&lt;/p&gt;

&lt;p&gt;To keep the cache under control, a number of caching strategies exists. The
Least Recently Used approach is an efficient way to keep only the most
recently used entries. It is available in Python as
&lt;a href=&quot;https://docs.python.org/3/library/functools.html#functools.lru_cache&quot;&gt;functools.lru_cache&lt;/a&gt;.&lt;/p&gt;
</description>
        <pubDate>Wed, 24 Jun 2020 00:00:00 -0300</pubDate>
        <link>https://heitorpb.github.io/bla/2020/06/24/caching-python/</link>
        <guid isPermaLink="true">https://heitorpb.github.io/bla/2020/06/24/caching-python/</guid>
        
        <category>optimization</category>
        
        <category>python</category>
        
        <category>random</category>
        
        
        <category>random</category>
        
      </item>
    
      <item>
        <title>Convert files to UTF-8</title>
        <description>&lt;p&gt;Whenever we are working with lots of text files we might have to deal with
their &lt;a href=&quot;https://en.wikipedia.org/wiki/Character_encoding&quot;&gt;encoding&lt;/a&gt;. Reading a
file with the wrong encoding feeds obscure data to our code. This way, the
result becomes unpredictable&lt;/p&gt;

&lt;p&gt;For example, saving the string &lt;code class=&quot;highlighter-rouge&quot;&gt;Kalsarik√§nnit&lt;/code&gt; as an UTF-8 text file and then
reading it in Python as an ASCII file gives an error:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'k'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'r'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;encoding&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'ascii'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;afile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;afile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Traceback&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;most&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;recent&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;call&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;File&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;stdin&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;File&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/usr/lib/python3.8/encoding/ascii.py&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;26&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;decode&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;codecs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ascii_decode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;errors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;UnicodeDecodeError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'ascii'&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;codec&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;can&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'t decode byte 0xc3 in position 8:
        ordinal not in range(128)
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I‚Äôve run into this problem last week, when I had to parse hundreds of &lt;abbr title=&quot;comma-separated values are simple text files that represent a spreadsheet&quot;&gt;csv&lt;/abbr&gt; files.
Most of them were fine, but I encountered weird problems, similar to the shown
above, in some files. It turned out those problematic files were saved from a
Windows machine, with &lt;code class=&quot;highlighter-rouge&quot;&gt;ISO-8859-1&lt;/code&gt; encoding.&lt;/p&gt;

&lt;p&gt;One way to display the
&lt;a href=&quot;https://en.wikipedia.org/wiki/Magic_number_(programming)#In_files&quot;&gt;mime-type&lt;/a&gt;
of a file and its encoding is by using the
&lt;a href=&quot;https://www.darwinsys.com/file/&quot;&gt;file&lt;/a&gt; command, that comes with most free
operating systems (Linux, BSD, etc):&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;file &lt;span class=&quot;nt&quot;&gt;--mime&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
bla.txt: text/plain&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;charset&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;us-ascii
bla.txt: text/plain&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;charset&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;iso-8859-1
k.csv:   text/plain&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;charset&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;utf-8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or display only the encoding:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;file &lt;span class=&quot;nt&quot;&gt;--mime-encoding&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
bla.txt: us-ascii
bla.txt: iso-8859-1
k.csv:   utf-8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or only the mime-type:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;file &lt;span class=&quot;nt&quot;&gt;--mime-type&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
bla.txt: text/plain
ble.txt: text/plain
k.csv:   text/plain
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In these examples, we can see 3 plain-text files, each one with a different
encoding.&lt;/p&gt;

&lt;p&gt;To convert a text file between encoding, we can use the
&lt;a href=&quot;https://en.wikipedia.org/wiki/Iconv&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;iconv&lt;/code&gt;&lt;/a&gt;. So, to convert &lt;em&gt;from&lt;/em&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;ISO-8859-1&lt;/code&gt; &lt;em&gt;to&lt;/em&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;UTF-8&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;iconv &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; iso-8859-1 &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; utf-8 infile &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; outfile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To convert all files in current dir from a different encoding to &lt;code class=&quot;highlighter-rouge&quot;&gt;UTF-8&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;f &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do
	&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;enc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;file &lt;span class=&quot;nt&quot;&gt;--mime-encoding&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$f&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-E&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'s/.*: //g'&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$enc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;utf-8&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;then
		&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;Converting from &lt;span class=&quot;nv&quot;&gt;$enc&lt;/span&gt; to UTF-8: &lt;span class=&quot;nv&quot;&gt;$f&lt;/span&gt;
		iconv &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$enc&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; utf-8 &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$f&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$f&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;.utf
		&lt;span class=&quot;nb&quot;&gt;mv&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$f&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;.utf &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$f&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;fi
done&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A small bash script with &lt;code class=&quot;highlighter-rouge&quot;&gt;sed&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;file&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;iconv&lt;/code&gt; is very versatile to
uniformize the encoding of several text files. And it saves the day.&lt;/p&gt;

</description>
        <pubDate>Tue, 12 May 2020 00:00:00 -0300</pubDate>
        <link>https://heitorpb.github.io/bla/2020/05/12/utf-8-files/</link>
        <guid isPermaLink="true">https://heitorpb.github.io/bla/2020/05/12/utf-8-files/</guid>
        
        <category>analysis</category>
        
        <category>encoding</category>
        
        <category>linux</category>
        
        <category>random</category>
        
        <category>test</category>
        
        
        <category>random</category>
        
      </item>
    
      <item>
        <title>Random numbers from /dev/urandom in Bash</title>
        <description>&lt;p&gt;In a GNU/Linux distributions, there are special files (&lt;code class=&quot;highlighter-rouge&quot;&gt;/dev/random&lt;/code&gt; and
&lt;code class=&quot;highlighter-rouge&quot;&gt;/dev/urandom&lt;/code&gt;) to access the kernel‚Äôs random number generator. But how
do we get random numbers from them in a bash script?&lt;/p&gt;

&lt;p&gt;If we try to &lt;code class=&quot;highlighter-rouge&quot;&gt;cat&lt;/code&gt; them we get random things:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /dev/random
XB&amp;gt;7&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;Mq&lt;span class=&quot;s1&quot;&gt;'\'&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$,&lt;/span&gt;dH’û’àT&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;H&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;0]eS19—†
Hd9&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;7‹¢VO&lt;span class=&quot;s1&quot;&gt;'y.€ßMW^C
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Something a bit weirder happens with &lt;code class=&quot;highlighter-rouge&quot;&gt;/dev/urandom&lt;/code&gt;: it continues vomiting
characters really fast at you until you stop it with &lt;code class=&quot;highlighter-rouge&quot;&gt;Ctrl + C&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;What‚Äôs the difference between &lt;code class=&quot;highlighter-rouge&quot;&gt;/dev/random&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;/dev/urandom&lt;/code&gt;? Lets check the
manpage for &lt;code class=&quot;highlighter-rouge&quot;&gt;random (4)&lt;/code&gt;, as of Linux 5.6:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   The  random number generator gathers environmental noise from device driv‚Äê
   ers and other sources into an entropy pool.  The generator also  keeps  an
   estimate  of  the  number of bits of noise in the entropy pool.  From this
   entropy pool, random numbers are created.

   When read, the /dev/urandom device returns random bytes using a pseudoran‚Äê
   dom number generator seeded from the entropy pool.  Reads from this device
   do not block (i.e., the CPU is not yielded), but can incur an  appreciable
   delay when requesting large amounts of data.

   The  /dev/random  device  is a legacy interface which dates back to a time
   where  the  cryptographic  primitives  used  in  the   implementation   of
   /dev/urandom  were  not  widely trusted.  It will return random bytes only
   within the estimated number of bits of fresh noise in  the  entropy  pool,
   blocking if necessary.  /dev/random is suitable for applications that need
   high quality randomness, and can afford indeterminate delays.

   When the entropy pool is empty, reads from /dev/random  will  block  until
   additional  environmental  noise  is  gathered. (...)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From this, we get that:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;the Kernel maintains a pool of entropy from random things that happens in the
computer.&lt;/li&gt;
  &lt;li&gt;both special files use this entropy pool to seed a &lt;abbr title=&quot;pseudorandom number generator&quot;&gt;PRNG&lt;/abbr&gt;.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/dev/random&lt;/code&gt; waits until there are enough randomness to output something.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/dev/urandom&lt;/code&gt; is preferred.&lt;/li&gt;
  &lt;li&gt;both files gives us &lt;em&gt;bytes&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And from the Kernel‚Äôs source we get that &lt;code class=&quot;highlighter-rouge&quot;&gt;urandom&lt;/code&gt; uses
&lt;a href=&quot;https://en.wikipedia.org/wiki/Salsa20#ChaCha_variant&quot;&gt;ChaCha20&lt;/a&gt; as &lt;abbr title=&quot;cryptographiccally secure pseudorandom number generator&quot;&gt;CSPRNG&lt;/abbr&gt;.
&lt;sup id=&quot;fnref:kernel-source&quot;&gt;&lt;a href=&quot;#fn:kernel-source&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;We now need a tool to read a specific number of bytes from those files and
convert it to something human readable. And here comes &lt;code class=&quot;highlighter-rouge&quot;&gt;od&lt;/code&gt;, a Unix
command to display data in several formats.&lt;sup id=&quot;fnref:od&quot;&gt;&lt;a href=&quot;#fn:od&quot; class=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt; The default is octal, hence the
name &lt;code class=&quot;highlighter-rouge&quot;&gt;od&lt;/code&gt;: &lt;em&gt;octal dump&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;With this utility we can read &lt;code class=&quot;highlighter-rouge&quot;&gt;N&lt;/code&gt; bytes from a file and display it in a
specified format. For example, here‚Äôs the dump of `Hello World‚Äù:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;Hello World | &lt;span class=&quot;nb&quot;&gt;od
&lt;/span&gt;0000000 062510 066154 020157 067527 066162 005144
0000014
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The first column is the offset, and then the octal representation of that line.
So, the second line of the output means: starting at the offset &lt;code class=&quot;highlighter-rouge&quot;&gt;0000014&lt;/code&gt; we
have nothing, i.g. there are 14 (in octal, or 12 in decimal) characters in that
string.&lt;/p&gt;

&lt;p&gt;It looks like &lt;code class=&quot;highlighter-rouge&quot;&gt;od&lt;/code&gt; does not know how to count. There are 11 chars in &lt;code class=&quot;highlighter-rouge&quot;&gt;Hello
World&lt;/code&gt;! Lets see each char individually (&lt;code class=&quot;highlighter-rouge&quot;&gt;-c&lt;/code&gt;) in octal (&lt;code class=&quot;highlighter-rouge&quot;&gt;-b&lt;/code&gt;):&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Hello World&quot;&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;od&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-cb&lt;/span&gt;
0000000   H   e   l   l   o       W   o   r   l   d  &lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;
        110 145 154 154 157 040 127 157 162 154 144 012
0000014
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Sweet, it counted the line ending as well.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;od&lt;/code&gt; can also read &lt;code class=&quot;highlighter-rouge&quot;&gt;N&lt;/code&gt; bytes from a source and display it in a specified
format. So, to read 4 bytes from &lt;code class=&quot;highlighter-rouge&quot;&gt;/dev/urandom&lt;/code&gt;, display it as an unsigned
integer without the offset column:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;od&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-vAn&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-N4&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; u4 &amp;lt; /dev/urandom
  402803061
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And to use in your bash code:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;i &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;seq &lt;/span&gt;1 10&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do
	&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;od&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-vAn&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-N4&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; u4 &amp;lt; /dev/urandom&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$random&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With this code, those 32 bits (4 bytes) from &lt;code class=&quot;highlighter-rouge&quot;&gt;urandom&lt;/code&gt; are interpreted as an
integer. How do we get floats? If interested only in the range &lt;code class=&quot;highlighter-rouge&quot;&gt;[0, 1)&lt;/code&gt;: simply
divide by the greatest possible value, \( 2^{32} - 1\).&lt;/p&gt;

&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:kernel-source&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/char/random.c?h=v5.6.2&amp;amp;id=4aa37c463764052c68c5c430af2a67b5d784c1e0&quot;&gt;file &lt;code class=&quot;highlighter-rouge&quot;&gt;drivers/char/random.c&lt;/code&gt;&lt;/a&gt;¬†&lt;a href=&quot;#fnref:kernel-source&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:od&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://www.gnu.org/software/coreutils/manual/html_node/od-invocation.html&quot;&gt;Gnu Coreutils&lt;/a&gt;¬†&lt;a href=&quot;#fnref:od&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        <pubDate>Tue, 07 Apr 2020 00:00:00 -0300</pubDate>
        <link>https://heitorpb.github.io/bla/2020/04/07/bash-random-numbers/</link>
        <guid isPermaLink="true">https://heitorpb.github.io/bla/2020/04/07/bash-random-numbers/</guid>
        
        <category>linux</category>
        
        <category>random</category>
        
        
        <category>random</category>
        
      </item>
    
      <item>
        <title>Always close your Matplotlib figures</title>
        <description>&lt;p&gt;I‚Äôm working on a simulation that generates gigabytes of raw data. But I am a
Physicist: I &lt;em&gt;need plots&lt;/em&gt;, not tables! So I made a set of scripts in Python
that parses all this data and generates about 50 plots.&lt;/p&gt;

&lt;p&gt;It‚Äôs not a problem to generate lots of pdf‚Äôs with the plots. It‚Äôs not a problem
to write the Python code to parse the data and generate the plots.
&lt;a href=&quot;https://pandas.pydata.org/&quot;&gt;Pandas&lt;/a&gt; makes our life easy to read data and
&lt;a href=&quot;https://matplotlib.org/&quot;&gt;Matplotlib&lt;/a&gt; has a nice interface to turn data in
figures.&lt;/p&gt;

&lt;p&gt;I have a code with a structure like this:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;For&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;every&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parameter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;Read&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;relevant&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Data&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;Process&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;Make&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;save&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In Python words:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;


&lt;span class=&quot;c1&quot;&gt;# Fixing random state for reproducibility
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;seed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;19680801&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;read_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;Generate fake data&quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;process_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# pretend to do something with it
&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;plot_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;figure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_subplot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;111&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'o'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#plt.show()
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;savefig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;f'plots/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fname&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;read_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;process_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;plot_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I run this code, It will create 50 png‚Äôs in the folder &lt;code class=&quot;highlighter-rouge&quot;&gt;plots/&lt;/code&gt;, similar to
this one:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;plots/0.png&quot; alt=&quot;random data in a plot&quot; /&gt;&lt;/p&gt;

&lt;p&gt;So, what‚Äôs the problem here?&lt;/p&gt;

&lt;p&gt;Try running the code!&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;python&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;py&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;py&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;RuntimeWarning&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;More&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;than&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;figures&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;have&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;been&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;opened&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Figures&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;created&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;through&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pyplot&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`matplotlib.pyplot.figure`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;are&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;retained&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;until&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;explicitly&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;closed&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;may&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;consume&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;too&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;much&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;To&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;control&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;warning&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;see&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rcParam&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`figure.max_open_warning`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;figure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This warning appears several times. And it is a &lt;em&gt;warning&lt;/em&gt;, not an error: the
code will &lt;em&gt;probably&lt;/em&gt; work fine.
It says &lt;code class=&quot;highlighter-rouge&quot;&gt;and may consume too much memory&lt;/code&gt;. But how much is too much?
Let‚Äôs use the &lt;a href=&quot;https://www.gnu.org/software/time/&quot;&gt;GNU time&lt;/a&gt; command to
discover the amount of memory used:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;usr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;%M&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;python&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bad&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;example&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;py&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;bad&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;example&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;py&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;RuntimeWarning&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;More&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;than&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;figures&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;have&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;been&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;opened&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Figures&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;created&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;through&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pyplot&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`matplotlib.pyplot.figure`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;are&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;retained&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;until&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;explicitly&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;closed&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;may&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;consume&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;too&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;much&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;To&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;control&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;warning&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;see&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rcParam&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`figure.max_open_warning`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;figure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ommiting&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;several&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;repeated&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;messages&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;here&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;bad&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;example&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;py&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;RuntimeWarning&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;More&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;than&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;figures&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;have&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;been&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;opened&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Figures&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;created&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;through&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pyplot&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`matplotlib.pyplot.figure`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;are&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;retained&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;until&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;explicitly&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;closed&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;may&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;consume&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;too&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;much&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;To&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;control&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;warning&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;see&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rcParam&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`figure.max_open_warning`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;figure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;mi&quot;&gt;182032&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The last number is the peak memory usage, in kbytes. In this case: 182032
kbytes.&lt;/p&gt;

&lt;p&gt;Now, let‚Äôs fix the warning. The problem is that we have too many figures
opened: we need to close them. The simplest way is to call &lt;code class=&quot;highlighter-rouge&quot;&gt;plt.close(fig)&lt;/code&gt;
when the figure is not needed anymore:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;


&lt;span class=&quot;c1&quot;&gt;# Fixing random state for reproducibility
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;seed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;19680801&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;read_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;Generate fake data&quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;process_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# pretend to do something with it
&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;plot_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;figure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_subplot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;111&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'o'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#plt.show()
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;savefig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;f'plots/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fname&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;read_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;process_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;plot_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now, let‚Äôs see how much memory it uses:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;usr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;%M&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;python&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;good&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;example&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;py&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;106652&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img draggable=&quot;false&quot; title=&quot;:sunglasses:&quot; alt=&quot;üòé&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f60e.svg&quot; class=&quot;emoji&quot; /&gt;&lt;/p&gt;

&lt;p&gt;About 75000 kbytes saved!&lt;/p&gt;
</description>
        <pubDate>Wed, 18 Mar 2020 00:00:00 -0300</pubDate>
        <link>https://heitorpb.github.io/bla/2020/03/18/close-matplotlib-figures/</link>
        <guid isPermaLink="true">https://heitorpb.github.io/bla/2020/03/18/close-matplotlib-figures/</guid>
        
        <category>analysis</category>
        
        <category>linux</category>
        
        <category>python</category>
        
        <category>matplotlib</category>
        
        <category>random</category>
        
        
        <category>random</category>
        
      </item>
    
      <item>
        <title>Python.format</title>
        <description>&lt;p&gt;The python way of formatting strings is very interesting. You just need a string
with &lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt; and then tell python to change that to something. For example:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;'3'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And you can also format that to a string:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'$¬£@√¶»©'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;'$¬£@√¶»©'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The next obvious step is to format a string to itself:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that the result is a &lt;em&gt;string&lt;/em&gt;:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And we can &lt;em&gt;evaluate&lt;/em&gt; that string to turn it into a code:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now, some ultra advanced python code to rule them all:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'{}.format({})'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}))).&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&quot;{}&quot;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{})).&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;'{}'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img draggable=&quot;false&quot; title=&quot;:sunglasses:&quot; alt=&quot;üòé&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f60e.svg&quot; class=&quot;emoji&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Thu, 29 Nov 2018 00:00:00 -0200</pubDate>
        <link>https://heitorpb.github.io/bla/2018/11/29/format/</link>
        <guid isPermaLink="true">https://heitorpb.github.io/bla/2018/11/29/format/</guid>
        
        <category>python</category>
        
        <category>random</category>
        
        
        <category>random</category>
        
      </item>
    
      <item>
        <title>Treasure Hunt</title>
        <description>&lt;p&gt;So, I decided to hunt treasures &lt;img draggable=&quot;false&quot; title=&quot;:sunglasses:&quot; alt=&quot;üòé&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f60e.svg&quot; class=&quot;emoji&quot; /&gt; Real treasures, not the ones from movies or
TV series. Some real humans hid real treasures around the world. And of course
they created real maps with instructions. This way other people can find those
treasures!&lt;/p&gt;

&lt;p&gt;They&lt;sup id=&quot;fnref:whom&quot;&gt;&lt;a href=&quot;#fn:whom&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; named this ‚Äòsport‚Äô &lt;em&gt;Geocaching&lt;/em&gt;. It‚Äôs quite a fancy name, but
&lt;em&gt;treasure hunting&lt;/em&gt; sounds much cooler. The concept it simple: an adventurous
person hides a small treasure somewhere. They then create the &lt;em&gt;treasure map&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;The treasure is also called a &lt;em&gt;cache&lt;/em&gt;. It is mainly a &lt;em&gt;log book&lt;/em&gt;.
When you find one, you should sign and celebrate! There might also have
something else for trade, like an used sock or foreign money. The treasures
have an ethereal value, not a financial one. The reward is &lt;em&gt;locating&lt;/em&gt; it, not
selling gold. It‚Äôs in a container that should be waterproof and able to
survive the local weather and police. The police just loves exploding
them&lt;sup id=&quot;fnref:bomb1&quot;&gt;&lt;a href=&quot;#fn:bomb1&quot; class=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;sup id=&quot;fnref:bomb2&quot;&gt;&lt;a href=&quot;#fn:bomb2&quot; class=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;sup id=&quot;fnref:bomb3&quot;&gt;&lt;a href=&quot;#fn:bomb3&quot; class=&quot;footnote&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;&lt;sup id=&quot;fnref:bomb4&quot;&gt;&lt;a href=&quot;#fn:bomb4&quot; class=&quot;footnote&quot;&gt;5&lt;/a&gt;&lt;/sup&gt;&lt;sup id=&quot;fnref:bomb5&quot;&gt;&lt;a href=&quot;#fn:bomb5&quot; class=&quot;footnote&quot;&gt;6&lt;/a&gt;&lt;/sup&gt;&lt;sup id=&quot;fnref:bomb6&quot;&gt;&lt;a href=&quot;#fn:bomb6&quot; class=&quot;footnote&quot;&gt;7&lt;/a&gt;&lt;/sup&gt;&lt;sup id=&quot;fnref:bomb7&quot;&gt;&lt;a href=&quot;#fn:bomb7&quot; class=&quot;footnote&quot;&gt;8&lt;/a&gt;&lt;/sup&gt;!&lt;/p&gt;

&lt;p&gt;We are in the 21st century, it doesn‚Äôt make any sense to make maps using
papyrus and quill pens. That is really cool but not compatible with today‚Äôs
technology. The current treasure maps rely on &lt;em&gt;&lt;abbr title=&quot;Global Navigation Satellite System&quot;&gt;GNSS&lt;/abbr&gt;&lt;/em&gt;, such as &lt;em&gt;GPS&lt;/em&gt; and
&lt;em&gt;&lt;abbr title=&quot;The Soviet version of GPS&quot;&gt;GLONASS&lt;/abbr&gt;&lt;/em&gt;. The map is the approximate &lt;abbr title=&quot;latitude and longitude&quot;&gt;co-ordinates&lt;/abbr&gt; of the treasure.
Sometimes with some more tips or with instructions to get to the exact
place.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;https://www.geocaching.com/&quot;&gt;Geocaching&lt;/a&gt; website maintains a big list of
treasure maps around the world. Go check if there‚Äôs a treasure near you right
now! And there‚Äôs the &lt;a href=&quot;https://www.cgeo.org/&quot;&gt;c:geo&lt;/a&gt; app to use in an Android
phone. For free. Yep, it‚Äôs free to hunt treasures &lt;img draggable=&quot;false&quot; title=&quot;:smiley:&quot; alt=&quot;üòÉ&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f603.svg&quot; class=&quot;emoji&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I went with my friend Przemys≈Çaw to hunt two treasures in the French side of
Geneva. It was a very fun adventure. This is where we went (we started near the
blue dots):&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;map.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;There was a very nice house and we decided to get a closer look, before the
quest.&lt;/p&gt;

&lt;p&gt;We then decided to go for our first treasure. Near the Saint-Pierre de Pouilly
Church. This church was build in the &lt;a href=&quot;https://en.wikipedia.org/wiki/Roman_Era&quot;&gt;Roman Era&lt;/a&gt;,
in the 13th century or earlier&lt;sup id=&quot;fnref:church&quot;&gt;&lt;a href=&quot;#fn:church&quot; class=&quot;footnote&quot;&gt;9&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;church_small.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;After looking around for a while, we decided to give up. Yep. Really. But why
not a last look around? Then we found it! Hidden there! There was it:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;treasure_small.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;A small piece of paper inside a plastic bag! The front was full, so we squeezed
our names in the back :) The first treasure we found! We were so excited! Can
you imagine finding a treasure?!?&lt;/p&gt;

&lt;p&gt;Then we walked to the second treasure! We walked to the region in the map with
lots of brown (?), green (?) and purple (?) points. There we found something
unexpected.&lt;/p&gt;

&lt;p&gt;In the middle of nowhere, there was a fence surrounding it. This way the cattle
don‚Äôt get inside. It‚Äôs in the end of a small forest there. There was it:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;ave_maria.jpg&quot;&gt;&lt;img src=&quot;ave_maria_small.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This place is lovelly! Hidden from society, a small temple. Simple and yet
breathtaking.&lt;/p&gt;

&lt;p&gt;The second treasure was supposed to be there. We didn‚Äôt find it though‚Ä¶&lt;/p&gt;

&lt;p&gt;That was our adventure! 191 kcal burned, 3.74 km walked, 1 hour and 16 minutes.
Our success rate is quite low, 50%. But it was very fun! And the landscape is
awesome!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;landscape.jpg&quot;&gt;&lt;img src=&quot;landscape_small.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:whom&quot;&gt;
      &lt;p&gt;The guys in &lt;a href=&quot;https://groups.yahoo.com/neo/groups/gpsstash/conversations/topics/62&quot;&gt;this mailing list&lt;/a&gt;.¬†&lt;a href=&quot;#fnref:whom&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:bomb1&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://archive.is/20120904171554/http://www.mywesttexas.com/articles/2010/01/08/news/top_stories/pipe_bomb_geochaching_geocache_midland_academy_sports.txt&quot;&gt;link&lt;/a&gt;¬†&lt;a href=&quot;#fnref:bomb1&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:bomb2&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://www.gcdailyworld.com/story/1890701.html&quot;&gt;link&lt;/a&gt;¬†&lt;a href=&quot;#fnref:bomb2&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:bomb3&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://www.deseretnews.com/article/635160668/Detonated-bomb-turns-out-to-be-box-of-toys.html&quot;&gt;link&lt;/a&gt;¬†&lt;a href=&quot;#fnref:bomb3&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:bomb4&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://web.archive.org/web/20081202115708/http://www.canada.com/ottawacitizen/news/story.html?id=c7628126-a0f6-4a9e-a396-a40fa1948eab&quot;&gt;link&lt;/a&gt;¬†&lt;a href=&quot;#fnref:bomb4&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:bomb5&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;http://articles.glendalenewspress.com/2013-01-14/news/tn-818-0114-authorities-determine-suspicious-object-found-on-glendale-power-pole-to-be-safe_1_power-pole-suspicious-object-bomb-squad&quot;&gt;link&lt;/a&gt;¬†&lt;a href=&quot;#fnref:bomb5&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:bomb6&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://www.bbc.com/news/uk-england-leeds-14039229&quot;&gt;link&lt;/a&gt;¬†&lt;a href=&quot;#fnref:bomb6&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:bomb7&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://www.ibtimes.com/geocaching-awesome-scavenger-hunt-or-bomb-threat-waiting-happen-296371&quot;&gt;link&lt;/a&gt;¬†&lt;a href=&quot;#fnref:bomb7&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:church&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Saint-Genis-Pouilly&quot;&gt;Saint-Genis-Pouilly - Wikipedia&lt;/a&gt;¬†&lt;a href=&quot;#fnref:church&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        <pubDate>Sat, 20 Oct 2018 00:00:00 -0300</pubDate>
        <link>https://heitorpb.github.io/bla/2018/10/20/TreasureHunt/</link>
        <guid isPermaLink="true">https://heitorpb.github.io/bla/2018/10/20/TreasureHunt/</guid>
        
        <category>hiking</category>
        
        <category>geocache</category>
        
        
        <category>random</category>
        
      </item>
    
      <item>
        <title>Hiking in Essertines - Switzerland</title>
        <description>&lt;p&gt;Last week we had another &lt;em&gt;walking meeting&lt;/em&gt;! This time, we went to the village
of Essertines, near Geneva, Switzerland. It‚Äôs a very lovely place, with old
beautiful buildings, small roads and wineries.&lt;/p&gt;

&lt;p&gt;Click the images to see them bigger and to comment them.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.flickr.com/photos/heitorpb/30468016197/in/album-72157702559519395/&quot;&gt;&lt;img src=&quot;imgs/DSC_3333.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Essertines belongs to the municipality of Dardagny. 1 861 people live in
there&lt;sup id=&quot;fnref:wtf&quot;&gt;&lt;a href=&quot;#fn:wtf&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;. There are 16 winemakers&lt;sup id=&quot;fnref:winemakers&quot;&gt;&lt;a href=&quot;#fn:winemakers&quot; class=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;. The vast majority of
apartments there have 3 rooms&lt;sup id=&quot;fnref:wtf:1&quot;&gt;&lt;a href=&quot;#fn:wtf&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.flickr.com/photos/heitorpb/44493621755/in/album-72157702559519395/&quot;&gt;&lt;img src=&quot;imgs/DSC_3371.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We started the hike at about 10 in the morning. The weather was very nice:
sunny day, not too hot, not too cold and not humid :) The ladies in blue took
the liberty of being the guide:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.flickr.com/photos/heitorpb/30468018287/in/album-72157702559519395/&quot;&gt;&lt;img src=&quot;imgs/DSC_3342.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There are some caves in that region, made in the second half of the 19th
century, to extract &lt;em&gt;bitumen&lt;/em&gt;&lt;sup id=&quot;fnref:oil&quot;&gt;&lt;a href=&quot;#fn:oil&quot; class=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;. It is a black, gooey, icky sticky form of
petroleum. It‚Äôs main use is to make asphalt and to waterproof things&lt;sup id=&quot;fnref:wikiOil&quot;&gt;&lt;a href=&quot;#fn:wikiOil&quot; class=&quot;footnote&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;.
I never imagined that it would be easy to get some petroleum for myself. But in
this region, you can literally stick your fingers in the rock and get that
goofy stuff for you &lt;img draggable=&quot;false&quot; title=&quot;:sunglasses:&quot; alt=&quot;üòé&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f60e.svg&quot; class=&quot;emoji&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.flickr.com/photos/heitorpb/45357033732/in/album-72157702559519395/&quot;&gt;&lt;img src=&quot;imgs/DSC_3337.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think someone tried to make a tent there, to rest after a long day of
extracting oil. Or maybe the gnomes built that to keep an eye on people? That
would explain why there‚Äôs no more exploration of bitumen there‚Ä¶&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.flickr.com/photos/heitorpb/30468017267/in/album-72157702559519395/&quot;&gt;&lt;img src=&quot;imgs/DSC_3338.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We continued walking through the forest :)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.flickr.com/photos/heitorpb/45357034362/in/album-72157702559519395/&quot;&gt;&lt;img src=&quot;imgs/DSC_3340.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I really like those stairs built there. They are very minimalist, not fancy
at all and very, very gracious.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.flickr.com/photos/heitorpb/30468019457/in/album-72157702559519395/&quot;&gt;&lt;img src=&quot;imgs/DSC_3345.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And then there was The Bridge! We stayed a few minutes there, looking at the funny
crustaceans in the river.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.flickr.com/photos/heitorpb/45357035272/in/album-72157702559519395/&quot;&gt;&lt;img src=&quot;imgs/DSC_3344.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The path looks very charming looking from The Bridge.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.flickr.com/photos/heitorpb/45357035952/in/album-72157702559519395/&quot;&gt;&lt;img src=&quot;imgs/DSC_3351.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And, suddenly, the forest was gone. The view was dominated by grape vines!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.flickr.com/photos/heitorpb/45357036642/in/album-72157702559519395/&quot;&gt;&lt;img src=&quot;imgs/DSC_3353.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Looking back, we could see the first signs of Autumn. Some trees were not that
green anymore. We can spot some yellow leafs and also some almost-red ones.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.flickr.com/photos/heitorpb/30468021827/in/album-72157702559519395/&quot;&gt;&lt;img src=&quot;imgs/DSC_3355.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The grapes also change their colours. The contrast of the red, yellow and green
leafs is amazing!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.flickr.com/photos/heitorpb/44493620835/in/album-72157702559519395/&quot;&gt;&lt;img src=&quot;imgs/DSC_3368.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think I read in a sign in the vineyard they were Cabernet Sauvignon.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.flickr.com/photos/heitorpb/44493619915/in/album-72157702559519395/&quot;&gt;&lt;img src=&quot;imgs/DSC_3364_cropped.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We also received the visit of a lonely, enchanting rider.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.flickr.com/photos/heitorpb/30468023777/in/album-72157702559519395/&quot;&gt;&lt;img src=&quot;imgs/DSC_3365.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In the background, the majestic Jura Mountains!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.flickr.com/photos/heitorpb/45357037202/in/album-72157702559519395/&quot;&gt;&lt;img src=&quot;imgs/DSC_3359.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;On our way through the village to the car, we found an iron peacock, guarding a
flower well.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.flickr.com/photos/heitorpb/30468024607/in/album-72157702559519395/&quot;&gt;&lt;img src=&quot;imgs/DSC_3369.JPG&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;That was the end of our meeting. A very productive one, if you ask. Everyone
was actively involved! No one falling asleep or leaving for a coffee and never
returning. Our hike was ~3.6 km long at an average speed of 1.25
m/s&lt;sup id=&quot;fnref:analysis&quot;&gt;&lt;a href=&quot;#fn:analysis&quot; class=&quot;footnote&quot;&gt;5&lt;/a&gt;&lt;/sup&gt;. I burned ~185 kcal&lt;sup id=&quot;fnref:endomondo&quot;&gt;&lt;a href=&quot;#fn:endomondo&quot; class=&quot;footnote&quot;&gt;6&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;imgs/map.png&quot;&gt;&lt;img src=&quot;imgs/map.png&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Back to the car. Back to CERN. Back to work &lt;img draggable=&quot;false&quot; title=&quot;:atom_symbol:&quot; alt=&quot;‚öõ&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/269b.svg&quot; class=&quot;emoji&quot; /&gt;Ô∏è&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:wtf&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://fr.wikipedia.org/wiki/Dardagny&quot;&gt;Dardagny - Wikipedia&lt;/a&gt; (Page consult√©e le juin 13, 2018).¬†&lt;a href=&quot;#fnref:wtf&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;¬†&lt;a href=&quot;#fnref:wtf:1&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:winemakers&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;http://www.dardagny.ch/index.php/vie-economique/vignerons-viticulteurs&quot;&gt;Dardagny - Vignerons - Viticulteurs&lt;/a&gt;¬†&lt;a href=&quot;#fnref:winemakers&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:oil&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://www.unige.ch/forel/files/5114/8949/5654/Guide_Geneve.pdf&quot;&gt;Guidebook: geology and archaeology of Geneva - Soci√©t√© de physique et d‚Äôhistoire naturelle de Gen√®ve&lt;/a&gt;¬†&lt;a href=&quot;#fnref:oil&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:wikiOil&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Asphalt&quot;&gt;Asphalt - Wikipedia&lt;/a&gt;¬†&lt;a href=&quot;#fnref:wikiOil&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:analysis&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://github.com/heitorPB/HikingAnalysis&quot;&gt;Hiking Analysis&lt;/a&gt;¬†&lt;a href=&quot;#fnref:analysis&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:endomondo&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://www.endomondo.com/users/25410601/workouts/1215399714&quot;&gt;Endomondo&lt;/a&gt;¬†&lt;a href=&quot;#fnref:endomondo&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        <pubDate>Tue, 16 Oct 2018 00:00:00 -0300</pubDate>
        <link>https://heitorpb.github.io/bla/2018/10/16/EssertinesHike/</link>
        <guid isPermaLink="true">https://heitorpb.github.io/bla/2018/10/16/EssertinesHike/</guid>
        
        <category>photography</category>
        
        <category>hiking</category>
        
        <category>analysis</category>
        
        
        <category>random</category>
        
      </item>
    
      <item>
        <title>The Swiss Far West and GPX fun</title>
        <description>&lt;p&gt;Yesterday my supervisor and I went to a hike to the &lt;em&gt;Swiss Far West&lt;/em&gt;, the westernmost
part of Switzerland. Unfortunately, we couldn‚Äôt go to the precise westernmost point
of the border with France, because that‚Äôs in the &lt;abbr title=&quot;Latitude: 46.1323565, Longitude: 5.9559113&quot;&gt;middle&lt;/abbr&gt; of the river &lt;em&gt;Le
Rh√¥ne&lt;/em&gt;&lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; and we didn‚Äôt want to get inside the water.&lt;/p&gt;

&lt;p&gt;I recorded our hike using &lt;a href=&quot;https://osmand.net/&quot;&gt;OsmAnd&lt;/a&gt;, a very nice app for
maps and location and finding out how to go from one place to another. And all
that offline! You only need internet connection to download the app :) Oh, and
it‚Äôs &lt;abbr title=&quot;as in free beer&quot;&gt;free&lt;/abbr&gt;!&lt;/p&gt;

&lt;p&gt;This app gave me &lt;a href=&quot;hike.gpx&quot;&gt;this &lt;abbr title=&quot;GPS Exchange Format&quot;&gt;GPX&lt;/abbr&gt; file&lt;/a&gt;. It‚Äôs basically an XML file with
coordinates (latitude, longidute, elevation and time) and some more
information. You can read more about the format on
&lt;a href=&quot;https://en.wikipedia.org/wiki/GPS_Exchange_Format&quot;&gt;WikiPedia&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I found this &lt;a href=&quot;https://github.com/tkrajina/gpxpy&quot;&gt;gpxpy&lt;/a&gt; library to work with
&lt;abbr title=&quot;GPS Exchange Format&quot;&gt;GPX&lt;/abbr&gt; files. It‚Äôs quite easy to use it together with
&lt;a href=&quot;https://matplotlib.org/&quot;&gt;matplotlib&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;gpxpy&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;mpl_toolkits.mplot3d&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Axes3D&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;gpx_filename&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;hike.gpx&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;gps_lat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gps_long&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gps_elevation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;figure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_subplot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;111&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;projection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'3d'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gpx_filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'r'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bla&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;gpx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gpxpy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bla&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;track&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gpx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tracks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;track&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;segments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;point&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;gps_lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;latitude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;gps_long&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;longitude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;gps_elevation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;elevation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gps_lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gps_long&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;           &lt;span class=&quot;c1&quot;&gt;# x coordinate
&lt;/span&gt;                &lt;span class=&quot;n&quot;&gt;gps_lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;            &lt;span class=&quot;c1&quot;&gt;# y,
&lt;/span&gt;                &lt;span class=&quot;n&quot;&gt;gps_elevation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;# z
&lt;/span&gt;                &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;viridis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# sequential color
&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_xlabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;longitude&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_ylabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;latitude&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_zlabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;altitude (meters)&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;animate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;elev&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;10.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;azim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;anim&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FuncAnimation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init_func&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                               &lt;span class=&quot;n&quot;&gt;frames&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;360&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;anim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'hike.mp4'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fps&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;extra_args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'-vcodec'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'libx264'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And this codes gives the path of our hike, after about 150 seconds:&lt;/p&gt;

&lt;video width=&quot;100%&quot; height=&quot;100%&quot; loop=&quot;True&quot; controls=&quot;&quot;&gt;
  &lt;source src=&quot;hike.mp4&quot; type=&quot;video/mp4&quot; /&gt;
  Your browser does not support the HTML5 video tag :(
  click &lt;a href=&quot;hike.mp4&quot;&gt; here &lt;/a&gt; to view the animation.
&lt;/video&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;And that‚Äôs pretty cool &lt;img draggable=&quot;false&quot; title=&quot;:sunglasses:&quot; alt=&quot;üòé&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f60e.svg&quot; class=&quot;emoji&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Lets extract some more information about this &lt;abbr title=&quot;GPS Exchange Format&quot;&gt;GPX&lt;/abbr&gt; file:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;gpxpy&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;gpx_filename&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;hike.gpx&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gpx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gpxpy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gpx_filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;distance:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gpx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;length_3d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;m&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;duration:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gpx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_duration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;started:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gpx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_time_bounds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ended:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;gpx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_time_bounds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;elevation extremes:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gpx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_elevation_extremes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()[:],&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;m&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Max speed: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gpx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_moving_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;m/s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Boundaries: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bla&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bla&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gpx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_bounds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()])&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-julia highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;python&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;infos&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;py&lt;/span&gt; 

&lt;span class=&quot;n&quot;&gt;distance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5892.264830266586&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;duration&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5550&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;started&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;09&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;07&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;36&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ended&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2018&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;09&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;09&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;08&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;elevation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;extremes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;320.36&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;429.36&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Max&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;mf&quot;&gt;1.8713130924592616&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Boundaries&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;x&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;46.1285393&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;46.13805&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5.9561619&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5.9720922&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Nice! But the nicest thing would be a simple way to add the &lt;abbr title=&quot;GPS Exchange Format&quot;&gt;GPX&lt;/abbr&gt; coordinates on
top of the map of the region. The library
&lt;a href=&quot;https://github.com/wrobell/geotiler&quot;&gt;geotiler&lt;/a&gt; provides a way to get the map
from &lt;a href=&quot;http://openstreetmap.org/&quot;&gt;OpenStreetMap&lt;/a&gt;. You might need
&lt;a href=&quot;https://redis.io/&quot;&gt;Redis&lt;/a&gt; running as server in the background for &lt;em&gt;geotiler&lt;/em&gt;
to work. Here‚Äôs the code:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;mpl_toolkits.basemap&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Basemap&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib.patheffects&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PathEffects&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib.patches&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Ellipse&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;geotiler&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;gpxpy&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;gpx_filename&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;hike.gpx&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gpx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gpxpy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gpx_filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;bbox&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gpx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_bounds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;min_longitude&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.002&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;gpx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_bounds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;min_latitude&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.002&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;gpx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_bounds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_longitude&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.002&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;gpx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_bounds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_latitude&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.002&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;figure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;figsize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subplot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;111&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# download tiles from OSM
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mm&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;geotiler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zoom&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;geotiler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;render_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;myMap&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Basemap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;llcrnrlon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;llcrnrlat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;urcrnrlon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urcrnrlat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;projection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'merc'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;myMap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interpolation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'lanczos'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;origin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'upper'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# plot hike
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gpx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_points_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;lon&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;longitude&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;latitude&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;point_no&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# to color sequentially each point
&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myMap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# map (long, lat) to (x,y) coordinates in plot
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'brg'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# add some texts and arrows with style
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;annotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'France'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;96&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xycoords&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'axes fraction'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;horizontalalignment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'left'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fontsize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;verticalalignment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'bottom'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fontname&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'monospace'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;t2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;annotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Switzerland'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;99&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;96&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xycoords&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'axes fraction'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;horizontalalignment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'right'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fontsize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;verticalalignment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'bottom'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fontname&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'monospace'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Ellipse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;t3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;annotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Border'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;61&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xycoords&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'axes fraction'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;xytext&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;96&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;textcoords&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'axes fraction'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;horizontalalignment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'center'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fontsize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;verticalalignment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'bottom'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fontname&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'monospace'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;arrowprops&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arrowstyle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;simple&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                 &lt;span class=&quot;n&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;black&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;none&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                 &lt;span class=&quot;n&quot;&gt;patchB&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                 &lt;span class=&quot;n&quot;&gt;connectionstyle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;arc3,rad=0.3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;t4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;annotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Switzerland's&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;westest point&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;myMap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;5.9559555&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;46.1323555&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;xytext&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;textcoords&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'axes fraction'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;horizontalalignment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'center'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fontsize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;verticalalignment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'bottom'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fontname&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'monospace'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;arrowprops&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arrowstyle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;simple&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                 &lt;span class=&quot;n&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;black&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;none&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                 &lt;span class=&quot;n&quot;&gt;patchB&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                 &lt;span class=&quot;n&quot;&gt;connectionstyle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;arc3,rad=0.3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_path_effects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PathEffects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;withStroke&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;linewidth&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;foreground&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'w'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.666&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)])&lt;/span&gt;


&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;savefig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'map.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;quality&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bbox_inches&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'tight'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It reads the &lt;abbr title=&quot;GPS Exchange Format&quot;&gt;GPX&lt;/abbr&gt; file, gets the map of the region from OpenStreeMap, adds
coloured points showing the path and some texts. The result:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;map.png&quot;&gt;&lt;img src=&quot;map.png&quot; alt=&quot;The coloured points are our hiking path :)&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The blue points mark the beginning of the hike. And it changes colours all the
way to the green points, marking the end of our 5892.3 meters walk :) As you
can see, we got pretty close to the westernmost Swiss point! For
some reason, my phone lost GPS connection in the beginning, that‚Äôs why it‚Äôs
missing some blue points.&lt;/p&gt;

&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://osm.org/go/0CFL8Bq5?m=&quot;&gt;Latitude: 46.1323565, Longitude: 5.9559113&lt;/a&gt;¬†&lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        <pubDate>Tue, 25 Sep 2018 00:00:00 -0300</pubDate>
        <link>https://heitorpb.github.io/bla/2018/09/25/hikingAnalysis/</link>
        <guid isPermaLink="true">https://heitorpb.github.io/bla/2018/09/25/hikingAnalysis/</guid>
        
        <category>hiking</category>
        
        <category>analysis</category>
        
        <category>python</category>
        
        
      </item>
    
      <item>
        <title>Mussum Ipsum</title>
        <description>&lt;p&gt;Mussum Ipsum, cacilds vidis litro abertis. Mais vale um bebadis conhecidiss, que um alcoolatra anonimis. Cevadis im ampola pa arma uma pindureta. Suco de cevadiss deixa as pessoas mais interessantis. Paisis, filhis, espiritis santis.&lt;/p&gt;

&lt;p&gt;A ordem dos tratores n√£o altera o p√£o duris. N√£o sou faixa preta cumpadi, sou preto inteiris, inteiris. Atirei o pau no gatis, per gatis num morreus. Suco de cevadiss, √© um leite divinis, qui tem lupuliz, matis, aguis e fermentis.&lt;/p&gt;

&lt;p&gt;Viva Forevis aptent taciti sociosqu ad litora torquent. Sapien in monti palavris qui num significa nadis i pareci latim. Delegadis gente finis, bibendum egestas augue arcu ut est. Interessantiss quisso pudia ce receita de bolis, mais bolis eu num gostis.&lt;/p&gt;

&lt;p&gt;Em p√© sem cair, deitado sem dormir, sentado sem cochilar e fazendo pose. Diuretics paradis num copo √© motivis de denguis. Copo furadis √© disculpa de bebadis, arcu quam euismod magna. Todo mundo v√™ os porris que eu tomo, mas ningu√©m v√™ os tombis que eu levo!&lt;/p&gt;

&lt;p&gt;Interagi no m√©, cursus quis, vehicula ac nisi. In elementis m√© pra quem √© amistosis quis leo. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Leite de capivaris, leite de mula manquis sem cabe√ßa.&lt;/p&gt;
</description>
        <pubDate>Thu, 06 Sep 2018 00:00:00 -0300</pubDate>
        <link>https://heitorpb.github.io/bla/2018/09/06/lorem/</link>
        <guid isPermaLink="true">https://heitorpb.github.io/bla/2018/09/06/lorem/</guid>
        
        <category>test</category>
        
        
        <category>random</category>
        
      </item>
    
      <item>
        <title>test</title>
        <description>&lt;p&gt;this is a &lt;abbr title=&quot;test!&quot;&gt;test&lt;/abbr&gt; entry&lt;sup id=&quot;fnref:bla&quot;&gt;&lt;a href=&quot;#fn:bla&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; for testing tests&lt;/p&gt;

&lt;p&gt;This is a python &lt;abbr title=&quot;test!&quot;&gt;test&lt;/abbr&gt; code:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;test0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zeros&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;test1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ones&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;137&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This a nice
&lt;a href=&quot;https://en.wikipedia.org/wiki/Higgs_boson#Technical_aspects_and_mathematical_formulation&quot;&gt;Higgs Lagrangian&lt;/a&gt;
for testing \( \LaTeX \) :&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\mathcal{L}_H = \left|\left(\partial_\mu -i g W_\mu^a \tau^a -i\frac{1}{2} g' B_\mu\right)\phi\right|^2 + \mu^2 \phi^\dagger\phi-\lambda (\phi^\dagger\phi)^2&lt;/script&gt;

&lt;p&gt;A pen &lt;abbr title=&quot;test!&quot;&gt;test&lt;/abbr&gt; for testing a post-it photo:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;test.png&quot; alt=&quot;img test&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Just &lt;code class=&quot;highlighter-rouge&quot;&gt;some Markdown tests&lt;/code&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;bold&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;italics&lt;/em&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;del&gt;list &lt;abbr title=&quot;test!&quot;&gt;test&lt;/abbr&gt;&lt;/del&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;http://pudim.com.br&quot;&gt;a link&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Some more &lt;abbr title=&quot;test!&quot;&gt;test&lt;/abbr&gt; code from Julia &lt;a href=&quot;https://qojulia.org/&quot;&gt;Quantum Optics&lt;/a&gt; package:&lt;/p&gt;

&lt;div class=&quot;language-julia highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;QuantumOptics&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FockBasis&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;destroy&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;H&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;psi0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fockstate&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;tout&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;psit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeevolution&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;schroedinger&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.25&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;psi0&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PyPlot&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;subplot&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qfunc&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;psit&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pcolor&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;tight_layout&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;savefig&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;fock.png&quot;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unicode/Emoji &lt;abbr title=&quot;test!&quot;&gt;test&lt;/abbr&gt;:&lt;/p&gt;

&lt;center&gt;
ü¶ï&lt;br /&gt;
ü¶ñ  &lt;img draggable=&quot;false&quot; title=&quot;:bird:&quot; alt=&quot;üê¶&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f426.svg&quot; class=&quot;emoji&quot; /&gt;&lt;br /&gt;
&lt;img draggable=&quot;false&quot; title=&quot;:dragon:&quot; alt=&quot;üêâ&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f409.svg&quot; class=&quot;emoji&quot; /&gt;  &lt;img draggable=&quot;false&quot; title=&quot;:fire:&quot; alt=&quot;üî•&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f525.svg&quot; class=&quot;emoji&quot; /&gt;  &lt;img draggable=&quot;false&quot; title=&quot;:octopus:&quot; alt=&quot;üêô&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f419.svg&quot; class=&quot;emoji&quot; /&gt;&lt;br /&gt;
ü¶ë  &lt;img draggable=&quot;false&quot; title=&quot;:cat2:&quot; alt=&quot;üêà&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f408.svg&quot; class=&quot;emoji&quot; /&gt;  &lt;img draggable=&quot;false&quot; title=&quot;:feet:&quot; alt=&quot;üêæ&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f43e.svg&quot; class=&quot;emoji&quot; /&gt;  &lt;img draggable=&quot;false&quot; title=&quot;:turtle:&quot; alt=&quot;üê¢&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f422.svg&quot; class=&quot;emoji&quot; /&gt;&lt;br /&gt;
&lt;img draggable=&quot;false&quot; title=&quot;:beetle:&quot; alt=&quot;üêû&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f41e.svg&quot; class=&quot;emoji&quot; /&gt;  ü¶ã  &lt;img draggable=&quot;false&quot; title=&quot;:snail:&quot; alt=&quot;üêå&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f40c.svg&quot; class=&quot;emoji&quot; /&gt;&lt;br /&gt;
üß™  üß¨&lt;br /&gt;
üß¨
&lt;/center&gt;

&lt;p&gt;Twemoji &lt;abbr title=&quot;test!&quot;&gt;test&lt;/abbr&gt;: &lt;img draggable=&quot;false&quot; title=&quot;:+1:&quot; alt=&quot;üëç&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f44d.svg&quot; class=&quot;emoji&quot; /&gt; &lt;img draggable=&quot;false&quot; title=&quot;:jack_o_lantern:&quot; alt=&quot;üéÉ&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f383.svg&quot; class=&quot;emoji&quot; /&gt; &lt;img draggable=&quot;false&quot; title=&quot;:open_mouth:&quot; alt=&quot;üòÆ&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f62e.svg&quot; class=&quot;emoji&quot; /&gt; &lt;img draggable=&quot;false&quot; title=&quot;:stuck_out_tongue:&quot; alt=&quot;üòõ&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f61b.svg&quot; class=&quot;emoji&quot; /&gt; &lt;img draggable=&quot;false&quot; title=&quot;:scream:&quot; alt=&quot;üò±&quot; src=&quot;https://twemoji.maxcdn.com/2/svg/1f631.svg&quot; class=&quot;emoji&quot; /&gt;&lt;/p&gt;

&lt;p&gt;It works!&lt;/p&gt;

&lt;p&gt;It works?&lt;/p&gt;

&lt;div class=&quot;alert alert-dark&quot;&gt;
&lt;blockquote class=&quot;blockquote&quot;&gt;
&lt;p&gt;This is a reminder for me in the future: &lt;em&gt;it &lt;strong&gt;is possible&lt;/strong&gt; to have&lt;/em&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;markdown&lt;/code&gt; inside &lt;code class=&quot;highlighter-rouge&quot;&gt;HTML&lt;/code&gt; code blocks!!&lt;/p&gt;
&lt;footer class=&quot;blockquote-footer&quot;&gt;Me, in the past.&lt;/footer&gt;
&lt;/blockquote&gt;
&lt;/div&gt;

&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:bla&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://lmgtfy.com/?q=bla&quot;&gt;blablabla&lt;/a&gt;¬†&lt;a href=&quot;#fnref:bla&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        <pubDate>Wed, 05 Sep 2018 00:00:00 -0300</pubDate>
        <link>https://heitorpb.github.io/bla/2018/09/05/test/</link>
        <guid isPermaLink="true">https://heitorpb.github.io/bla/2018/09/05/test/</guid>
        
        <category>test</category>
        
        
        <category>random</category>
        
      </item>
    
  </channel>
</rss>
